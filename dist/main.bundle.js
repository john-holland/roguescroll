/*! For license information please see main.bundle.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("mori"),require("jQuery")):"function"==typeof define&&define.amd?define("RogueScroll",["mori","jQuery"],t):"object"==typeof exports?exports.RogueScroll=t(require("mori"),require("jQuery")):e.RogueScroll=t(e.mori,e.jQuery)}(this,((e,t)=>(()=>{var n={"./client/js/components/animation.js":(e,t,n)=>{var i=n("./client/js/util/listmap.js"),a=n("./client/js/util/underscore.js");e.exports=function(){return{_:{currentAnimation:null,animationQueue:[]},requiredComponents:["glyphicon-renderer"],onAdd:function(e,t){if(!t.animationMetadata){var n=new i,a={walk:{duration:1e3,looping:!0,defferable:!0},"attack-down":{duration:1e3,looping:!1,defferable:!1},"attack-up":{duration:1e3,looping:!1,defferable:!1},"walk-down-steps":{duration:3e3,looping:!1,defferable:!1},"take-damage":{duration:750,looping:!1,defferable:!1},"fall-down-pit":{duration:1e3,looping:!1,defferable:!1},death:{duration:1e3,looping:!1,defferable:!1},"take-critical-damage":{duration:750,looping:!1,defferable:!1},explode:{duration:1e3,looping:!1,defferable:!1},drink:{duration:1500,looping:!0,defferable:!0}};for(var r in a)if(a.hasOwnProperty(r)){var o=a[r];o.name=r,n.add(r,o)}t.animationMetadata=n,t.playAnimation=function(e,n,i,a){if(t.animationMetadata.contains(i)||console.error("tried to play a bad animation"),!e.currentAnimation||e.currentAnimation.metadata.name!=i||!e.currentAnimation.metadata.looping){var r=t.animationMetadata.get(i),o=!1,s={metadata:r,callback:a,started:n.engine.gameTime};if(e.currentAnimation){var l=e.currentAnimation;l.metadata.defferable&&(n.data.animationQueue.push(l),o=!0)}else o=!0;o?(e.currentAnimation=s,t.playForElem(e.$el,t,e,r)):e.animationQueue.push(s)}},t.playForElem=function(e,t,n,i){e&&e.hasClass("animated")?t.animationMetadata.getList().forEach((function(t){e.removeClass(t.name)})):e&&e.addClass("animated"),i.looping&&e.addClass("infinite-animation"),e&&e.addClass(i.name)},t.stopCurrent=function(e,t,n){e&&(e.removeClass("animated"),e.removeClass("infinite-animation"),t.animationMetadata.getList().forEach((function(t){e.removeClass(t.name)})),n.currentAnimation&&e.removeClass(n.currentAnimation.name))}}},update:function(e,t,n){var i=!this.currentAnimation||!this.currentAnimation.metadata.looping&&this.currentAnimation.started+this.currentAnimation.metadata.duration<t.engine.gameTime;this.currentAnimation&&i&&(this.currentAnimation.callback&&this.currentAnimation.callback(),n.stopCurrent(this.$el,n,this),this.currentAnimation=null),a.any(this.animationQueue,(function(e){return e.started+e.metadata.duration<t.engine.gameTime&&!e.metadata.looping}))&&(this.animationQueue=a.filter(this.animationQueue,(function(e){var n=e.started+e.metadata.duration<t.engine.gameTime&&!e.metadata.looping;return n&&e.callback&&e.callback(),!n}))),i&&this.animationQueue.length&&(this.currentAnimation=this.animationQueue.pop(),n.playForElem(this.$el,n,this,this.currentAnimation.metadata))},messages:{animate:function(e,t,n){if(t&&t.animation){var i=t.animation,a=t.callback;n.playAnimation(this,e,i,a)}},"stop-animating":function(e,t,n){if(t.animation)return this.currentAnimation&&this.currentAnimation.metadata.name==t.animation&&(this.$el&&(this.$el.removeClass("animated"),this.$el.removeClass(t.animation),this.$el.removeClass("infinite-animation")),this.currentAnimation.callback&&this.currentAnimation.callback(),this.currentAnimation=null),void(this.animationQueue.length&&a.any(this.animationQueue,(function(e){return e.metadata.name===t.animation}))&&(this.animationQueue=a.filter(this.animationQueue,(function(e){return e.metadata.name!==t.animation}))));this.$el.removeClass("animated"),n.animationMetadata.getList().forEach((function(e){t.$el.removeClass(e.name)})),this.currentAnimation&&this.$el.removeClass(this.currentAnimation.name),this.currentAnimation&&(this.$el.removeClass(this.currentAnimation.name),this.currentAnimation.callback&&this.currentAnimation.callback()),this.animationQueue.forEach((function(e){e.callback&&e.callback()})),this.animationQueue=[]}}}}},"./client/js/components/augment.js":e=>{e.exports=function(){return{_:{augmentAbility:null,downRightOffset:{x:-35,y:-35},upRightOffset:{x:35,y:35},downLeftOffset:{x:35,y:-35},upLeftOffset:{x:-35,y:35},augmentPosition:"left"},requiredComponents:["mounted","animation","glyphicon-renderer"],update:function(e,t,n){this.target&&("left"===this.augmentPosition?"down"==this.target.direction?this.offset=this.downLeftOffset:this.offset=this.upLeftOffset:"down"==this.target.direction?this.offset=this.downRightOffset:this.offset=this.upRightOffset)}}}},"./client/js/components/center-aligned.js":(e,t,n)=>{var i=n("jquery"),a=n("./client/js/util/underscore.js");e.exports=function(){return{_:{alignCenter:!0,xOccupancyOffset:0,xOffsetOverride:0,previousCenterAlignX:0,previousXOccupancyOffset:0},requiredComponents:["position"],onAdd:function(e,t){t.getCenter||(t.getCenter=function(e){return e.$document.width()/2-e.size.width/2}),this.$document=i(document),this.position.x=t.getCenter(this),this.target&&(this.target.x=t.getCenter(this))},update:function(e,t,n){this.target&&this.alignCenter&&(this.target.x=n.getCenter(this)+(this.xOffsetOverride||this.xOccupancyOffset)),this.alignCenter&&(this.position.x=n.getCenter(this)+(this.xOffsetOverride||this.xOccupancyOffset))},aggregateUpdate:function(e,t,n){a.pairs(a.groupBy(t.getList(),(function(e){return Math.floor(e.data.position.y/100)}))).forEach((function(e){e[0],a.sortBy(e[1],(function(e){return e.id})).forEach((function(e){e.data.xOccupancyOffset=0}))}))}}}},"./client/js/components/combat.js":(e,t,n)=>{var i;function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,o(i.key),i)}}function o(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}void 0===(i=function(){return function(){return function(e,t){return t&&r(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}),[{key:"update",value:function(e){}}])}()}.call(t,n,t,e))||(e.exports=i)},"./client/js/components/combatant.js":(e,t,n)=>{var i=n("./client/js/util/underscore.js");n("./client/js/util/listmap.js"),e.exports=function(){return{_:{lastAttackTime:null,attackCooldown:1e3,range:70,side:"baddies"},requiredComponents:["health","movement","position"],onAdd:function(e,t){this.tryAttack=function(){if(null===this.lastAttackTime||e.engine.gameTime-this.attackCooldown>this.lastAttackTime){var t=this,n=i.filter(e.engine.entities.getList(),(function(e){return e.isActive&&"side"in e.data&&"position"in e.data&&"health"in e.data&&e.data.health>0&&e.data.side!==t.side&&Math.abs(e.data.position.y-t.position.y)<t.range}));if(n.length){var a=e.sendMessage("targets-in-range",{targets:n});if(i.any(a.results,(function(e){return!!e})))return this.lastAttackTime=e.engine.gameTime,!0}}return!1}},update:function(e,t,n){this.health<=0||this.tryAttack()},messages:{damage:function(e,t){this.health>0&&e.sendMessage("animate",{animation:t.isCritical?"take-critical-damage":"take-damage"})},death:function(e,t){e.sendMessage("animate",{animation:"death",callback:function(){e.shouldRender=!1,e.destroy()}})},attack:function(e,t){this.tryAttack()}}}}},"./client/js/components/defensive-augment.js":e=>{e.exports=function(){return{_:{augmentPosition:"right",icon:"umbrella"},requiredComponents:["augment"]}}},"./client/js/components/dialogue.js":(e,t,n)=>{var i;void 0===(i=function(){return function(){return{}}}.call(t,n,t,e))||(e.exports=i)},"./client/js/components/enemy-spawner.js":(e,t,n)=>{var i=n("jquery"),a=n("./client/js/util/underscore.js"),r=(n("./client/js/util/listmap.js"),new(n("./client/js/util/chance.js")));e.exports=function(){return{_:{lastSpawnTime:null,spawnCooldown:1e4,enemiesToSpawn:20,spawnPosition:null},onAdd:function(e,t){this.lastSpawnTime=e.engine.gameTime},update:function(e,t,n){if(!(!this.world||this.enemiesToSpawn<=0||(null!==this.lastSpawnTime&&t.engine.gameTime-this.lastSpawnTime)<this.spawnCooldown)){this.lastSpawnTime=t.engine.gameTime,this.enemiesToSpawn--;var o=a.random(i(window).height()/2,this.world.data.currentLevel.height-i(window).height()/2),s=Math.max(a.random(100,this.world.data.size.height/Math.max(4,this.enemiesToSpawn/4)),200),l=o-s/2,u=o+s/2,c={y:o,x:0},h=t.engine.createEntity({tags:["enemy","vision-candidate"]});null!==this.spawnPosition&&(c=this.spawnPosition),h.addComponent("enemy",{iconColor:"#eee",position:c,icon:r.pick(["person","skull","bug"]),target:{y:0,x:0}});var d=t.engine.createEntity({tags:["enemy-health-display"]});d.addComponent("health-display",{isStaticPosition:!1}),d.addComponent("mounted",{offset:{x:50,y:50}}),d.sendMessage("mount",{target:h}),h.data.patrolTopTarget.y=l,h.data.patrolBottomTarget.y=u,h.data.position.y=o,h.sendMessage("init"),console.log("spawned at: "+h.data.position.x+" "+h.data.position.y)}},messages:{init:function(e,t){this.world=e.engine.findEntityByTag("world")}}}}},"./client/js/components/enemy.js":(e,t,n)=>{var i=n("jquery");function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=function(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=new(n("./client/js/util/chance.js")),u=n("./client/js/util/underscore.js");e.exports=function(){return{_:{icon:"skull",baseMiss:10,side:"baddies",senseDistance:150,patrolTopTarget:{x:0,y:0},patrolBottomTarget:{x:0,y:0},size:{height:40,width:40},patrolTo:"top",isPatrolling:!1,damage:"1d6",playerAttackOffset:60,sineWaveRange:50,sineWaveSpeed:500,onCoffeeBreak:!1},onAdd:function(e,t){setTimeout((function(){e.sendMessage("coffee-break")}),l.integer({min:5e3,max:1e4}))},update:function(e,t,n){if(this.player){if(this.onCoffeeBreak)return this.sineWaveMovementEnabled=!1,void(this.xOffsetOverride=i(document).width()/5);var a=Math.abs(this.position.y-this.player.data.position.y)<this.senseDistance,r=Math.abs(this.position.y-this.player.data.position.y)<this.senseDistance;r&&!a?t.engine.findEntityByTag("music").sendMessage("enemy-spotted-player"):!r&&a&&t.engine.findEntityByTag("music").sendMessage("enemy-lost-player"),r?(t.isPatrolling=!1,this.target.y=this.player.data.position.y+this.playerAttackOffset,this.sineWaveMovementEnabled=!1):this.isPatrolling||(this.sineWaveMovementEnabled=!0,this.isPatrolling=!0,t.sendMessage("go-to",{x:"top"===this.patrolTo?this.patrolTopTarget.x:this.patrolBottomTarget.x,y:"top"===this.patrolTo?this.patrolTopTarget.y:this.patrolBottomTarget.y,callback:function(){t.data.isPatrolling&&(t.data.isPatrolling=!1,"bottom"===t.data.patrolTo?t.data.patrolTo="top":t.data.patrolTo="bottom")},stopAfterArrival:!0}))}},requiredComponents:["health","movement","world-entity","combatant","glyphicon-renderer","sine-wave-movement","floating-combat-text","animation","drops-loot"],messages:{init:function(e,t){this.player=e.engine.findEntityByTag("player"),this.world=e.engine.findEntityByTag("world")},"targets-in-range":function(e,t){if(t.targets&&t.targets.length){if(this.onCoffeeBreak||e.tags.indexOf("boss")>-1)return!1;e.sendMessage("animate",{animation:"attack-up"});var n=u.random(0,15-this.player.data.character.skills/4);return n<this.player.data.baseMiss||t.targets[0].sendMessage("damage",{amount:l.rpg(this.damage,{sum:!0}),hitRoll:n}),!0}},"coffee-break":function(e,t){t.withPlayer?(e.data.onBreak=!0,e.data.originalPosition=o({},e.data.position),e.data.originalBehavior=o({},e.data.behavior),e.data.position.x=e.engine.findEntityByTag("player").data.position.x+50,e.data.position.y=-100,e.sendMessage("change-icon",{icon:"smoking"})):(e.data.onBreak=!0,e.data.originalPosition=o({},e.data.position),e.data.originalBehavior=o({},e.data.behavior),e.data.behavior="idle")},"return-from-break":function(e,t){if(e.data.onBreak&&(e.data.onBreak=!1,e.data.willReturn)){e.data.position=o({},e.data.originalPosition),e.data.behavior=o({},e.data.originalBehavior),e.sendMessage("change-icon",{icon:e.data.originalIcon});var n=e.engine.findEntityByTag("player");e.sendMessage("attack",{target:n}),e.sendMessage("say",{text:"I can't believe you don't smoke!"})}}}}}},"./client/js/components/floating-combat-text.js":(e,t,n)=>{var i=n("./client/js/util/underscore.js");e.exports=function(){return{_:{createTextEntity:function(e,t){var n=e.engine.createEntity();n.addComponent("glyphicon-renderer",{icon:t.icon?t.icon:"globe",position:{x:this.position.x,y:this.position.y}}),n.addComponent("text",{}),n.data.levelSetsIconColor=!1,t.iconColor?n.data.$el.css("color",t.iconColor):n.data.$el.css("color","green"),t.textColor?n.data.$text.css("color",t.textColor):n.data.$text.css("color","#eee"),t.html?n.data.$text.html(t.html):n.data.$text.text(t.text),n.addComponent("movement",{speed:100}),n.sendMessage("go-to",{x:this.position.x+i.random(-60,60),y:this.position.y+("up"===this.direction?200:-200)+i.random(-60,60),callback:function(){n.destroy()}}),setTimeout((function(){n.destroy()}),3e3)}},messages:{damage:function(e,t){this.createTextEntity.call(this,e,{icon:t.isCritical?"dice":"tint",text:t.amount,iconColor:"red"})},heal:function(e,t){this.createTextEntity.call(this,e,{icon:"heart",text:t.amount,iconColor:"green"})},roll:function(e,t){this.createTextEntity.call(this,e,{icon:"dice",text:t.roll,iconColor:"red"})},blocked:function(e,t){this.createTextEntity.call(this,e,{icon:"shield",text:t.amount,iconColor:"blue"})}}}}},"./client/js/components/game-manager.js":(e,t,n)=>{var i=n("jquery"),a=n("./client/js/util/underscore.js");e.exports=function(){return{_:{gameState:"not-started",levels:[]},tags:[],messages:{init:function(e,t){e.sendMessage("character-selection",{})},"character-selection":function(e,t){if("not-started"===this.gameState){this.gameState="character-selection",e.engine.findEntitiesByTag("hide-at-start").forEach((function(e){e.sendMessage("hide")}));var r=["user","woman","girl","old-man","cat","dog","lamp"];r=a.map(r,(function(e){var t={name:e,icon:e,skills:10,brains:10,brawn:10,light:10,level:1};switch(e){case"cat":t.name="April",t.skills+=10,t.brawn-=5,t.description="A ca- aw jesus! I almost stepped on your tail, damnit cat!";break;case"dog":t.name="Sadie",t.brawn+=10,t.skills-=5,t.description="A dog. Woof woof!";break;case"lamp":t.name="Ozwald the Incinerator",t.light+=10,t.brains-=5,t.description="A lamp. It's bright, but not that bright!";break;case"old-man":t.name="Frank",t.brawn-=5,t.brains+=10,t.description="A wizened old man. What he's lost in muscle tone, he's learned in the magical arts.";break;case"girl":t.name="Cindy",t.skills+=10,t.light-=5,t.description="A little girl. She's scrappy but not very well equipped.";break;case"user":t.name="Joe",t.description="A man. Just a regular joe.";break;case"woman":t.name="Jane",t.description="A woman. Plain jane."}return t}));var o,s=new DOMParser,l=(o=n("./client/js/templates/characterSelection.hbs")({characters:r}),s.parseFromString(o,"text/html").body.firstElementChild);i("#menu").append(l),u(r[0]),this.selectedCharacter=r[0],i(".glyphicons-"+r[0].icon).addClass("active"),i(".character-selection .stats-container").show(),t=this,i(".character-selection .character-portrait").click((function(){var e=i(this);i(".character-selection .character-portrait").removeClass("active"),e.addClass("active");var n=a.find(r,(function(t){return e.hasClass("glyphicons-"+t.icon)}));n&&(t.selectedCharacter=n,u(n))})),i(".character-selection .character-select-button").click((function(){var n=i(".character-selection .character-name-input").val();t.selectedCharacter&&(n&&(t.selectedCharacter.name=n),e.sendMessage("start",{character:t.selectedCharacter}),i(".character-selection").remove())}))}function u(e){i(".character-selection .character-name-input").attr("placeholder",e.name),i(".character-selection .character-description").text(e.description),i(".character-selection .skills").text(e.skills),i(".character-selection .brains").text(e.brains),i(".character-selection .brawn").text(e.brawn),i(".character-selection .light").text(e.light)}},start:function(e,t){if("character-selection"===this.gameState){this.gameState="in-play";var n=t.character;i(".start-your-adventure").show();var a=i("#game");0===a.length&&document.querySelector("#scroll-container").append((new DOMParser).parseFromString('<div id="game"></div>',"text/html").body.firstElementChild),(a=i("#game")).show();var r=e.engine.findEntityByTag("player");r.data.character=n,r.isActive=!0,r.sendMessage("change-icon",{icon:n.icon}),e.engine.findEntitiesByTag("hide-at-start").forEach((function(e){e.sendMessage("show")}));var o=e.engine.findEntityByTag("level-manager");o.sendMessage("generate",{seed:n.name+ +new Date}),a.css("height",o.data.levels[0].height+"px"),e.engine.entities.getList().forEach((function(e){e.sendMessage("game-start")}))}},"game-over":function(e,t){i('<div style="position static">Restart</div> ').appendTo(i("#game"))},restart:function(e,t){e.engine.game.restart(),i(".character-selection").remove()}}}}},"./client/js/components/game-metrics-display.js":(e,t,n)=>{var i=n("jquery");e.exports=function(){return{_:{isStaticPosition:!0,icon:"clock",position:{x:50,y:250},metricsFunction:null,metricsTarget:null,metricsTargetTag:""},requiredComponents:["text"],onAdd:function(e,t){this.position.y=i(window).height()-50,this.metricsTargetTag&&(this.metricsTarget=e.engine.findEntityByTag(this.metricsTargetTag))},update:function(e,t,n){"function"==typeof this.metricsFunction?this.$text.text(this.metricsFunction(t,e,this.metricsTarget)):this.$text.text("gameTime "+(t.engine.gameTime/1e3).toFixed(4))}}}},"./client/js/components/glyphicon-renderer.js":(e,t,n)=>{var i=n("jquery");e.exports=function(){return{_:{icon:"user",iconColor:"#eee",levelSetsIconColor:!0,htmlTemplateFactory:function(e,t){return'<span style="position: '+(e.data.isStaticPosition?"fixed":"absolute")+"; display: block; overflow: visible; color: "+(e.data.iconColor||"black")+'" class="go-faster-hack glyphicons glyphicons-'+e.data.icon+'" data-entity-id="'+e.id+'"></span>'}},requiredComponents:["html-renderer"],onAdd:function(e,t){this.$el&&this.$el.remove(),this.$el=i(this.htmlTemplateFactory(e,t)).appendTo(this.selector)},update:function(e,t,n){this.world?this.levelSetsIconColor&&this.iconColor!==this.world.data.currentLevel.colors.font.toHexString()&&t.sendMessage("set-icon-color",{color:this.world.data.currentLevel.colors.accent.toHexString()}):this.world=t.engine.findEntityByTag("world")},messages:{"change-icon":function(e,t){if(!t.icon)throw new Error("Must receive icon to render!");this.$el&&(this.$el.removeClass("glyphicons-"+this.icon),this.icon=t.icon,this.$el.addClass("glyphicons-"+t.icon))},"set-icon-color":function(e,t){t.color&&(this.$el.css({color:t.color}),this.iconColor=t.color)}}}}},"./client/js/components/health-display.js":e=>{e.exports=function(){return{_:{isStaticPosition:!0,icon:"heart",healthTarget:null,position:{x:50,y:100},rotate:45,destroyOnTargetDestroy:!0},requiredComponents:["text"],onAdd:function(e,t){this.healthTarget=this.player=e.engine.findEntityByTag("player")},update:function(e,t,n){this.destroyOnTargetDestroy&&this.healthTarget.isDestroyed()&&t.destroy(),this.$text.text("Health "+this.healthTarget.data.health)},messages:{mount:function(e,t){t.target&&t.target.data&&t.target.data.health&&(this.healthTarget=t.target)}}}}},"./client/js/components/health-potion.js":e=>{e.exports=function(){return{_:{healingAmount:30,icon:"lab",useRange:100},requiredComponents:["glyphicon-renderer","center-aligned","world-entity"],onAdd:function(e,t){this.player=e.engine.findEntityByTag("player")},update:function(e,t,n){Math.abs(this.player.data.position.y-this.position.y)<this.useRange&&(this.player.sendMessage("heal",{amount:this.healingAmount}),t.sendMessage("hide"),t.isActive=!1)}}}},"./client/js/components/hide-on-pause.js":e=>{e.exports=function(){return{messages:{"game-pause":function(e,t){e.sendMessage("hide")},"game-resume":function(e,t){e.sendMessage("show")},"game-start":function(e,t){e.engine.isPlaying||e.sendMessage("hide")}}}}},"./client/js/components/keyboard-events.js":(e,t,n)=>{var i=n("jquery");e.exports=function(){return{onAdd:function(e,t){t.events||(t.events=!0,i(document).keydown((function(e){t.engine.isPlaying&&t.entities.getList().forEach((function(t){t.sendMessage("keydown",{which:e.which})}))})),i(document).keyup((function(e){t.engine.isPlaying&&t.entities.getList().forEach((function(t){t.sendMessage("keyup",{which:e.which})}))})))}}}},"./client/js/components/level-door.js":(e,t,n)=>{var i;void 0===(i=function(){(e=n("./client/js/util/V2.js")).ImmutableV2;var e=e.V2;return function(){return{_:{icon:"exit",senseTag:"player",position:{x:0,y:7300},senseRange:50,leads:"down"},requiredComponents:["center-aligned","glyphicon-renderer","world-entity","sensor"],messages:{sensed:function(e,t){"down"==this.leads?e.engine.findEntityByTag("world").sendMessage("go-down"):"up"==this.leads&&e.engine.findEntityByTag("world").sendMessage("go-up")}}}}}.call(t,n,t,e))||(e.exports=i)},"./client/js/components/level-manager.js":(e,t,n)=>{e.exports=function(){n("./client/js/util/underscore.js"),n("./client/js/models/walls/walls.js");var e=n("./client/js/models/level.js");return{name:"level-manager",tags:["level-manager"],_:{level:null,currentLevel:null,levels:[],maxLevel:25},requiredComponents:["position"],onAdd:function(e,t){t.worldEntity||(t.worldEntity=e.engine.components.get("world-entity")),t.player||(t.player=e.engine.findEntityByTag("player")),e.sendMessage("go-to-level",{level:1})},onRemove:function(){this.levels.forEach((function(e){e.walls.forEach((function(e){e.$wallContainer.remove()}))}))},update:function(e,t,n){this.currentLevel&&this.currentLevel.update(e)},messages:{"go-to-level":function(t,n){if(!(n.level<1||n.level>this.maxLevel)){for(;!this.levels.length||this.levels.length<n.level+2&&n.level+2<this.maxLevel;){var i=new e(t,this.levels.length+1);i.deactivate(),this.levels.push(i),t.engine.findEntitiesByTag("level-change-subscriber").forEach(function(e){e.sendMessage("loaded-level",{level:this.levels.length})}.bind(this))}this.currentLevel&&this.currentLevel.deactivate();var a=this.level;this.levels[n.level-1].activate(n.direction),this.level=n.level,this.currentLevel=this.levels[n.level-1],t.engine.findEntitiesByTag("level-change-subscriber").forEach((function(e){e.sendMessage("level-change",{level:n.level,previousLevel:a})}))}},"go-down":function(e,t){25!=this.level&&e.sendMessage("go-to-level",{level:this.level+1,direction:"above"})},"go-up":function(e,t){1!=this.level&&e.sendMessage("go-to-level",{level:this.level-1,direction:"below"})}}}}},"./client/js/components/minimap.js":(e,t,n)=>{var i,a=n("jquery");void 0===(i=function(){return function(){return{_:{isStaticPosition:!0,"z-index":1e6},requiredComponents:["glyphicon-renderer"],onAdd:function(e,t){this.$el.click((function(){e.data.player&&e.data.player.sendMessage("set-scroll-to-position")})),this.$el.css("cursor","pointer")},update:function(e,t,n){this.levelManager?this.player?(this.position.y=this.player.data.position.y/this.levelManager.data.currentLevel.maxHeight*a(window).height(),this.position.x=a(window).width()-50):(this.player=t.engine.findEntityByTag("player"),t.sendMessage("change-icon",{icon:this.player.data.icon})):this.levelManager=t.engine.findEntityByTag("level-manager")}}}}.call(t,n,t,e))||(e.exports=i)},"./client/js/components/mounted.js":e=>{e.exports=function(){return{_:{mountId:null,mountTag:"",offset:{x:null,y:null},mountTarget:null},onAdd:function(e,t){t.tryMount||(t.tryMount=function(e,t,n,i,a){n&&n.data&&n.data.position?e.mountTarget=n:null!==i&&(e.mountTarget=t.engine.entities.get(i),e.mountTarget)||!a||(e.mountTarget=t.engine.findEntityByTag(e.mountTag),e.mountTarget)}),e.sendMessage("mount",{target:this.mountTarget,mountId:this.mountId,mountTag:this.mountTag})},update:function(e,t,n){this.mountTarget?(null!==this.offset.x&&(this.position.x=this.mountTarget.data.position.x+this.offset.x),null!==this.offset.y&&(this.position.y=this.mountTarget.data.position.y+this.offset.y),t.shouldRender!=this.mountTarget.shouldRender&&(this.mountTarget.shouldRender?t.sendMessage("show"):t.sendMessage("hide")),this.direction=this.mountTarget.data.direction):t.sendMessage("mount",{target:this.mountTarget,mountId:this.mountId,mountTag:this.mountTag})},requiredComponents:["position"],tags:["level-change-subscriber"],messages:{mount:function(e,t,n){n.tryMount(this,e,t.target,t.mountId,t.mountTag)},dismount:function(e,t,n){this.mountTarget=null,this.mountTag=null,this.mountId=null},"level-change":function(e,t,n){this.mountTarget&&this.mountTarget.data.level&&this.worldEntity&&this.worldEntity.data.currentLevel===this.mountTarget.data.level&&(e.sendMessage("switch-to-current-level"),e.shouldRender!=this.mountTarget.shouldRender&&(this.mountTarget.shouldRender?e.sendMessage("show"):e.sendMessage("hide")))}}}}},"./client/js/components/movement.js":(e,t,n)=>{var i=n("./client/js/util/V2.js");i.ImmutableV2,i=i.V2,e.exports=function(){return{_:{target:{x:0,y:0,stopAfterArrival:!1,callbacks:[]},previousPosition:{x:0,y:0},speed:100,isMoving:!1,pursueTarget:!0,ignoreXForTarget:!0,direction:"down",isMobile:!0},onAdd:function(e,t){this.target.callbacks||(this.target.callbacks=[])},update:function(e,t,n){if(this.previousPosition.x=this.position.x,this.previousPosition.y=this.position.y,this.pursueTarget&&this.isMobile){var a=this.target.x-this.position.x,r=this.target.y-this.position.y,o=new i(a,r),s=o.length(),l=o.normalize().multiply(this.speed*(e/1e3)),u=new i(this.target.x,this.target.y),c=new i(this.position.x,this.position.y),h=u.sub(c).dot(l)<=0;if(h||s<3){for(this.position.x=this.target.x,this.position.y=this.target.y,this.isMoving=!1,this.target.stopAfterArrival&&(this.pursueTarget=!1);this.target.callbacks&&this.target.callbacks.length;)this.target.callbacks.pop()();h=!0}h||(this.centerAlign||(this.position.x+=l.X),this.position.y+=l.Y,this.rotation=l.toDegrees()),h||(this.direction=this.position.y>this.target.y?"down":"up");var d=this.isMoving;this.isMoving=!(this.position.x==this.previousPosition.x&&this.position.y==this.previousPosition.y),(h||!this.isMoving&&d)&&t.sendMessage("stop-animating",{animation:"walk"}),this.isMoving&&!d&&t.sendMessage("animate",{animation:"walk"})}},requiredComponents:["position"],messages:{"go-to":function(e,t){this.pursueTarget=!0,this.target.x=t.x,this.target.y=t.y,"stopAfterArrive"in t&&(this.target.stopAfterArrival=t.stopAfterArrive),"callback"in t&&this.target.callbacks.push(t.callback)}}}}},"./client/js/components/music.js":(e,t,n)=>{var i;void 0===(i=function(){var e=n("mori"),t=n("./client/js/util/buzz.js").sound,i=n("./client/js/util/tinycolor.js"),a=(n("./client/js/util/underscore.js"),n("./client/js/util/colorconversions.js"));return function(){var t=8/83*6e4;return{_:{baseDir:"/audio/",formats:["m4a","ogg","mp3","wav"],tracks:{unsorted:e.vector("DRUMS 1","DRUMS 2","DRUMS 3","DRUMS 4","DRUMS 5","DRUMS 6","HARMONY1","HARMONY2","HARMONY3","HARMONY4","HARMONY5","HARMONY6","MELODY1","MELODY2","MELODY3","MELODY4","MELODY5","MELODY6"),colors:e.vector("blue","purple","red","orange","yellow","green"),drums:e.hashMap("blue","OUTRO_DRUMS 2","red","OUTRO_DRUMS 3","yellow","OUTRO_DRUMS"),byColor:null},timeSinceLastQuantization:0,tracksToPlay:e.vector(),tracksToStop:e.vector(),volume:50,volumeRamps:e.hashMap("background",e.hashMap("target",50,"current",50,"speed",.5),"font",e.hashMap("target",50,"current",50,"speed",.5),"accent",e.hashMap("target",50,"current",50,"speed",.5)),defaultVolume:50,maxVolume:100,minVolume:20},tags:["level-change-subscriber"],onAdd:function(t,n){var i=e.group_by((function(e){return e.replace(/\d/gi,"").trim()}),this.tracks.unsorted);this.tracks.groups=e.map((function(t){return e.hash_map("name",e.first(t),"tracks",e.second(t))}),e.seq(i)),this.tracks.byColor=e.reduce((function(t,n){return e.assoc(t,n,e.vector())}),e.hash_map(),this.tracks.colors);for(var a=e.map((function(t){return e.hash_map("name",e.get(t,"name"),"tracks",e.into(e.vector(),e.get(t,"tracks")))}),this.tracks.groups);e.some((function(t){return e.count(e.get(t,"tracks"))>0}),a);)e.each(this.tracks.colors,(function(t){e.each(a,(function(n){var i=e.get(n,"tracks");if(e.count(i)>0){var a=e.first(i);this.tracks.byColor=e.update_in(this.tracks.byColor,[t],(function(t){return e.conj(t,a)})),e.assoc(n,"tracks",e.rest(i))}}))}))},update:function(n,i,a){this.timeSinceLastQuantization+=n,this.volumeRamps=e.reduce((function(t,i){var a=e.first(i),r=e.second(i),o=e.get(r,"target")-e.get(r,"current");if(Math.abs(o)>.1){var s=e.get(r,"current")+o*(n/1e3)*e.get(r,"speed");r=e.assoc(r,"current",s),this.loadedTracks&&e.has_key(this.loadedTracks,a)&&e.get(this.loadedTracks,a).setVolume(s)}return e.assoc(t,a,r)}),this.volumeRamps,e.seq(this.volumeRamps)),this.timeSinceLastQuantization>t&&(this.timeSinceLastQuantization-=t,e.each(this.tracksToStop,(function(t){this.loadedTracks&&e.has_key(this.loadedTracks,t)&&e.get(this.loadedTracks,t).stop()})),this.tracksToStop=e.vector(),e.each(this.tracksToPlay,(function(t){this.loadedTracks&&e.has_key(this.loadedTracks,t)&&e.get(this.loadedTracks,t).play().loop()})),this.tracksToPlay=e.vector())},messages:{"game-start":function(t,n){var i=t.engine.findEntityByTag("world").data.levels;this.loadedTracks=this.loadedTracks||e.hash_map(),this.levelToTracks=e.map((function(e){return c(t,this,e)}),e.vector.apply(null,i)),r(e.first(this.levelToTracks),this.loadedTracks,this.baseDir,this.formats).then(function(){o(e.first(this.levelToTracks),this.tracksToPlay)}.bind(this)),setTimeout(function(){r(e.nth(this.levelToTracks,1),this.loadedTracks,this.baseDir,this.formats),r(e.nth(this.levelToTracks,2),this.loadedTracks,this.baseDir,this.formats)}.bind(this),5e3)},"level-change":function(t,n){var i=n.level,a=t.engine.findEntityByTag("world");if(e.count(this.levelToTracks)<i)for(var s=a.data.levels;e.count(this.levelToTracks)<n.level;)this.levelToTracks=e.conj(this.levelToTracks,c(t,this,s[e.count(this.levelToTracks)]));var l=e.nth(this.levelToTracks,i-1);n.previousLevel&&function(t,n){e.conj(e.conj(e.conj(n,e.get(t,"background")),e.get(t,"font")),e.get(t,"accent"))}(e.nth(this.levelToTracks,n.previousLevel-1),this.tracksToStop),r(l,this.loadedTracks,this.baseDir,this.formats).then(function(){a.data.level===i&&o(l,this.tracksToPlay)}.bind(this))},"loaded-level":function(t,n){var i=n.level;if(e.count(this.levelToTracks)<n.level)for(var a=t.engine.findEntityByTag("world").data.levels;e.count(this.levelToTracks)<n.level;)this.levelToTracks=e.conj(this.levelToTracks,c(t,this,a[e.count(this.levelToTracks)]));r(e.nth(this.levelToTracks,i-1),this.loadedTracks,this.baseDir,this.formats),console.log("loaded music for next level")},"enemy-spotted-player":function(t,n){this.volumeRamps=e.update_in(this.volumeRamps,["background"],(function(t){return e.assoc(t,"target",this.maxVolume,"speed",1)}))},"enemy-lost-player":function(t,n){this.volumeRamps=e.update_in(this.volumeRamps,["background"],(function(t){return e.assoc(t,"target",this.defaultVolume,"speed",.3)}))},"trap-nearby":function(t,n){this.volumeRamps=e.update_in(this.volumeRamps,["accent"],(function(t){return e.assoc(t,"target",this.maxVolume,"speed",.8)}))},"trap-disarmed":function(t,n){this.volumeRamps=e.update_in(this.volumeRamps,["accent"],(function(t){return e.assoc(t,"target",this.defaultVolume,"speed",.3)}))},"set-volume":function(t,n){if(!n.volume)throw new Error("volume required");this.defaultVolume=n.volume,this.volumeRamps=e.reduce((function(t,i){var a=e.first(i),r=e.second(i);return e.assoc(t,a,e.assoc(r,"target",n.volume))}),this.volumeRamps,e.seq(this.volumeRamps))}}}};function r(n,i,a,r){var o=e.vals(n);return e.each(o,(function(n){e.has_key(i,n)||(i=e.assoc(i,n,new t(a+n,{formats:r})),e.get(i,n).load())})),Promise.all(e.map((function(t){return new Promise((function(n,a){var r=e.get(i,t);4===r.getStateCode()&&n(r),r.bind("canplay",(function(){n(r)})),r.bind("error",(function(e){a(e)}))}))}),o))}function o(t,n){return e.conj(e.conj(e.conj(n,e.get(t,"background")),e.get(t,"font")),e.get(t,"accent"))}function s(e,t){var n=t[0];return Math.sqrt(Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2)+Math.pow(n[2]-e[2],2))}function l(e){return[a.keyword2lab(e[0]),e[1]]}function u(e){var t=e.toRgb();return[t.r,t.g,t.b]}function c(t,n,r){var o=o||t.engine.findEntityByTag("world"),h=a.rgb2lab(u(1!==r.number?r.colors.background:i("yellow"))),d=a.rgb2lab(u(1!==r.number?r.colors.font:i("orange"))),m=a.rgb2lab(u(1!==r.number?r.colors.accent:i("yellow"))),f=r.number>1?o.data.levels[r.number-2]:null,p=f?e.vals(c(t,n,o.data.levels[f.number-1])):e.vector(),g=e.filter((function(t){return e.every((function(n){return e.get(t,1).indexOf(n)<0}),p)}),e.mapcat((function(t){return e.map((function(n){return e.vector(e.first(t),n)}),e.second(t))}),e.seq(n.tracks.byColor))),b=e.second(e.first(e.sort_by((function(e){return s(h,l(e))}),e.map(l,g)))),y=b.replace(/\d/gi,"").trim();g=e.filter((function(t){return e.get(t,1).indexOf(y)<0}),g);var v=e.second(e.first(e.sort_by((function(e){return s(d,l(e))}),e.map(l,g)))),w=v.replace(/\d/gi,"").trim();g=e.filter((function(t){return e.get(t,1).indexOf(w)<0}),g);var x=e.second(e.first(e.sort_by((function(e){return s(m,l(e))}),e.map(l,g))));return e.hash_map("background",b,"font",v,"accent",x)}}.call(t,n,t,e))||(e.exports=i)},"./client/js/components/offensive-augment.js":e=>{e.exports=function(){return{_:{augmentPosition:"left",icon:"candle"},requiredComponents:["augment"]}}},"./client/js/components/options.js":(e,t,n)=>{var i;void 0===(i=function(){var e=n("./client/js/util/underscore.js"),t=n("./client/js/util/buzz.js"),i=n("jquery");return function(){return{_:{size:{width:null,height:null},positionAnchor:"bottom-right",levelSetsColor:!1,"z-index":1e4,optionTemplates:{slider:{init:function(e,t,n,a){return i(a).change((function(){t.set(i(this).val())})),a},set:function(e,t){i(e).val(t)}},boolean:{init:function(e,t,n,a){i(a).change((function(){t.set(i(a).is(":checked"))}))},set:function(e,t){i(e).val(t)}},textbox:{init:function(e,t,n,a){return i(a).change((function(){t.set(i(this).val())})),a},set:function(e,t){i(e).val(t)}},textarea:{init:function(e,t,n,a){return i(a).change((function(){t.set(i(this).val())})),a},set:function(e,t){i(e).val(t)}},number:{init:function(e,t,n,a){return i(a).change((function(){t.set(i(this).val())})),a},set:function(e,t){i(e).val(t)}},text:{init:function(e,t,n,a){return i(a).change((function(){t.set(i(this).val())})),a},set:function(e,t){i(e).val(t)}}},options:{"dev options":{type:"text",get:function(){return"These options should be disabled upon release... probably."},set:function(){}},"temp max mode (30s)":{type:"boolean",get:function(e){return e.data.tempMaxMode||!1},set:function(e,t){t&&(e.data.tempMaxMode=!0,e.data.originalValues={speed:e.data.options.speed.get(e),health:e.data.options.health.get(e),damage:e.data.options.damage.get(e),audio:e.data.options["audio level"].get(e)},e.data.options.speed.set(1e3),e.data.options.health.set(200),e.data.options.damage.set(999),e.data.options["audio level"].set(100),setTimeout((function(){e.data.tempMaxMode=!1,e.data.options.speed.set(e.data.originalValues.speed),e.data.options.health.set(e.data.originalValues.health),e.data.options.damage.set(e.data.originalValues.damage),e.data.options["audio level"].set(e.data.originalValues.audio)}),3e4))}},"coffee break":{type:"boolean",get:function(e){return e.data.coffeeBreak||!1},set:function(e,t){if(t){e.data.coffeeBreak=!0;var n=e.engine.findEntityByTag("player"),i=e.engine.findEntitiesByTag("enemy");if(i.length>0){var a=i.reduce((function(e,t){var i=Math.abs(t.data.position.x-n.data.position.x);return!e||i<e.dist?{enemy:t,dist:i}:e}),null).enemy;Math.random()<.5?(a.data.willReturn=!0,a.sendMessage("coffee-break",{withPlayer:!0})):a.sendMessage("coffee-break",{withPlayer:!1})}setTimeout((function(){e.data.coffeeBreak=!1,closestEnemy&&closestEnemy.data.willReturn&&closestEnemy.sendMessage("return-from-break")}),6e4)}}},"max mode":{type:"boolean",get:function(e){return e.data.maxMode||!1},set:function(e,t){e.data.maxMode=t,t&&(e.data.playerCache=e.data.playerCache||e.engine.findEntityByTag("player"),e.data.playerCache.data.speed=1e3,e.data.playerCache.data.health=200,e.data.playerCache.data.weapon&&(e.data.playerCache.data.weapon.data.damage=999),e.data.buzz.all().setVolume(100),e.data.options.speed.set(1e3),e.data.options.health.set(200),e.data.options.damage.set(999),e.data.options["audio level"].set(100))}},speed:{type:"slider",min:0,max:1e3,step:1,get:function(e){return e.data.playerCache=e.data.playerCache||e.engine.findEntityByTag("player"),e.data.playerCache.data.speed},set:function(e,t){e.data.playerCache=e.data.playerCache||e.engine.findEntityByTag("player"),e.data.playerCache.data.speed=t}},health:{type:"slider",min:0,max:200,step:1,get:function(e){return e.data.playerCache=e.data.playerCache||e.engine.findEntityByTag("player"),e.data.playerCache.data.health},set:function(e,t){e.data.playerCache=e.data.playerCache||e.engine.findEntityByTag("player"),e.data.playerCache.data.health=t}},damage:{type:"textbox",get:function(e){return e.data.playerCache=e.data.playerCache||e.engine.findEntityByTag("player"),e.data.playerCache.data.weapon.data.damage},set:function(e,t){e.data.playerCache=e.data.playerCache||e.engine.findEntityByTag("player"),e.data.playerCache.data.weapon.data.damage=t}},"game options":{type:"text",get:function(){return""},set:function(){}},"audio level":{type:"slider",min:0,max:100,step:1,get:function(e){return e.data.musicCache=e.data.musicCache||e.engine.findEntityByTag("music"),e.data.musicCache.data.volume},set:function(e,t){e.data.buzz.all().setVolume(t)}}},isStaticPosition:!0,htmlTemplateFactory:function(t,i){e.pairs(t.data.options).forEach((function(e){e[1].name=e[0]}));var a=new DOMParser,r=function(e){return a.parseFromString(e,"text/html").body.firstElementChild},o=r(n("./client/js/templates/options.hbs")({options:t.data.options}));return e.pairs(t.data.options).forEach((function(i){var a=t.data,s=i[0],l=i[1],u=a.optionTemplates[l.type];l._name=s;var c=r(n("./client/js/templates/optionControls sync recursive ^\\.\\/.*\\.hbs$")("./"+l.type+".hbs")(e.extend({value:l.get(t)},l))),h=r("<li></li>");o.querySelector(".options-list").append(h),h.append(c),l.$el=u.init(t,l,o,c);var d=l.set;l.set=function(e){d&&d(t,e),u.set(l.$el,e)},l._template=u,l._previousValue=void 0})),o}},onAdd:function(n,i){this.buzz=t,this.updateOptions=e.values(this.options)},update:function(e,t,n){this.updateOptions.forEach((function(e){var n=e.get(t);n!==e._previousValue&&(e.set(n),e._previousValue=n)}))},requiredComponents:["html-renderer"]}}}.call(t,n,t,e))||(e.exports=i)},"./client/js/components/physics.js":(e,t,n)=>{var i;function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,o(i.key),i)}}function o(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}void 0===(i=function(){return function(){return function(e,t){return t&&r(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}),[{key:"update",value:function(e){}}])}()}.call(t,n,t,e))||(e.exports=i)},"./client/js/components/quest.js":(e,t,n)=>{var i;void 0===(i=function(){return function(){return{}}}.call(t,n,t,e))||(e.exports=i)},"./client/js/components/scroll-chaser.js":(e,t,n)=>{var i=n("jquery");e.exports=function(){return{onAdd:function(){this.$game=i("#game"),this.$menu=i("#menu"),this.$scrollContainer=i("#scroll-container"),this.$document=i(document),this.$window=i(window),this.topMargin=this.$window.height()/2;var e=this;this.$window.resize((function(){e.topMargin=e.$window.height()/2}))},update:function(e,t,n){var i=Math.max(this.$document.scrollTop()-this.$menu.height(),0)+this.topMargin;this.target.y=i},requiredComponents:["movement"],messages:{"set-scroll-to-position":function(){this.$document.scrollTop(this.position.y+this.topMargin-i("nav").height())}}}}},"./client/js/components/sensor.js":(e,t,n)=>{var i;void 0===(i=function(){var e=n("./client/js/util/V2.js").ImmutableV2;return function(){return{_:{senseTag:null,senseRange:100},requiredComponents:["position"],update:function(t,n,i){var a,r=e.coalesce(this.position),o=this;this.senseTag?(a=n.engine.findEntitiesByTag(this.senseTag).filter((function(e){return r.distanceTo(e.data.position)<o.senseRange}))).length&&n.sendMessage("sensed",{sensed:a,tag:this.senseTag}):(a=n.engine.entities.getList().filter((function(e){return!!e.data.position&&r.distanceTo(e.data.position)<o.senseRange}))).length&&n.sendMessage("sensed",{sensed:a,tag:this.senseTag})}}}}.call(t,n,t,e))||(e.exports=i)},"./client/js/components/shield.js":(e,t,n)=>{var i=new(n("./client/js/util/chance.js"));e.exports=function(){return{_:{offset:{x:35,y:35},pursueTarget:!1,icon:"shield",shields:[{name:"Wooden Shield",color:"brown",power:null}]},tags:["level-change-subscriber"],onAdd:function(e,t){this.mountTarget&&(this.mountTarget.data.shield=e),this.mountTarget.data.damagePredicates&&this.mountTarget.data.damagePredicates.push((function(t){return!((e.data.mountTarget.data.character.brawn+e.data.mountTarget.data.character.skills)/2+i.rpg("2d6",{sum:!0})>e.data.mountTarget.data.baseMiss&&(e.data.mountTarget.sendMessage("blocked",{amount:t.amount}),e.sendMessage("animate",{animation:"take-damage"}),1))}))},requiredComponents:["mounted","animation","glyphicon-renderer"]}}},"./client/js/components/sine-line.js":(e,t,n)=>{var i=n("jquery");e.exports=function(){return{_:{sineLineOffset:{x:0,y:200},isStaticPosition:!1},requiredComponents:["position"],onAdd:function(e,t){if(!t.spawned){t.spawned=!0;for(var n=0;n<25;n++){var i=e.engine.createEntity({tags:["hide-at-start"]});i.addComponent("sine-line",{}),i.addComponent("glyphicon-renderer",{icon:"clock"})}}},aggregateUpdate:function(e,t,n){var a=1,r=n.engine.gameTime,o=i(document).width()/2;t.getList().forEach((function(e){e.data.position.x=o+e.data.sineLineOffset.x+50*Math.sin(r/1e3+a),e.data.position.y=e.data.sineLineOffset.y+20*a,a++}))}}}},"./client/js/components/sine-wave-movement.js":(e,t,n)=>{var i;void 0===(i=function(){return function(){return{_:{sineWaveRange:200,sineWaveSpeed:3e3,sineWaveMovementEnabled:!0},requiredComponents:["center-aligned"],update:function(e,t,n){this.sineWaveMovementEnabled?this.xOffsetOverride=Math.sin(t.engine.gameTime/this.sineWaveSpeed)*this.sineWaveRange:(this.xOffsetOverride>0&&(this.xOffsetOverride-=.1*e/1e3),this.xOffsetOverride<0&&(this.xOffsetOverride=0))}}}}.call(t,n,t,e))||(e.exports=i)},"./client/js/components/spell-container.js":(e,t,n)=>{var i;void 0===(i=function(){var e=n("jquery");return function(){return{requiredComponents:["html-renderer"],_:{levelSetsColor:!1,size:{height:null,width:null},positionAnchor:"bottom-left",isStaticPosition:!0,spells:[],"z-index":800,htmlTemplateFactory:function(e,t){var i,a=new DOMParser;return i=n("./client/js/templates/spells.hbs")(),a.parseFromString(i,"text/html").body.firstElementChild}},onAdd:function(){},messages:{"add-spell":function(t,n,i){if(!n.spell)throw new Error("Must have a spell model to add!");var a=e('<div class="spell glyphicons glyphicons-'+n.spell.icon+'" />').appendTo(this.$el);a.click((function(){var e=t.engine.createEntity(),i=t.engine.findEntityByTag("player").data;e.addComponent("spell",{icon:n.spell.icon,position:{x:i.position.x,y:i.position.y}}),e.data.model=n.spell,a.remove()}))}}}}}.call(t,n,t,e))||(e.exports=i)},"./client/js/components/spell.js":(e,t,n)=>{var i;void 0===(i=function(){n("./client/js/models/spell.js");var e=n("./client/js/util/listmap.js"),t=n("./client/js/util/underscore.js");return function(){return{_:function(){return{model:null,sensedSoFar:new e,hitCount:0,maxHitCount:5,senseTag:"enemy","z-index":900}},tags:["spell"],requiredComponents:["movement","glyphicon-renderer","animation","sensor"],onAdd:function(e,n){this.maxHitCount=t.random(3,6),e.sendMessage("go-to",{x:this.position.x,y:this.position.y+500+4*e.engine.findEntityByTag("player").data.speed,callback:function(){e.sendMessage("animate",{animation:"explode",callback:function(){e.destroy()}})}})},update:function(e,t,n){},messages:{sensed:function(e,t){var n=this;t.sensed&&t.sensed.forEach((function(t){t===e.engine.findEntityByTag("player")||n.sensedSoFar.getList().length>=n.maxHitCount||(n.sensedSoFar.contains(t.id)||(n.sensedSoFar.add(t.id,t),t.sendMessage("damage",{amount:3*n.model.getDamage()})),n.sensedSoFar.getList().length>=n.maxHitCount&&e.sendMessage("animate",{animation:"explode",callback:function(){e.destroy()}}))}))},attack:function(e,t){e.sendMessage("go-to",{target:t.target,callback:function(){e.sendMessage("damage",{amount:this.model.getDamage()})}})}}}}}.call(t,n,t,e))||(e.exports=i)},"./client/js/components/tests.js":(e,t,n)=>{var i;void 0===(i=function(){return function(){return{_:{unitTests:[],unitTestResults:null,integrationTests:[],integrationTestResults:null,continuityTests:[],testResultFrames:new Array(3600),keepFrames:3600},onAdd:function(e,t){this.unitTestResults=_.map(this.unitTests,(function(e){return e()})),this.integrationTestResults=_.map(this.integrationTests,(function(e){return e()}))},update:function(e,t,n){this.testResultFrames.length>this.keepFrames&&this.testResultFrames.unshift(),this.testResultFrames.push(_.map(this.continuityTests,(function(e){return{results:e(),gameTime:t.engine.gameTime}})))},messages:{"set-keep-frames":function(e,t){if("keepFrames"in t){for(;this.testResultFrames.length>t.keepFrames;)this.testResultFrames.unshift();this.keepFrames=t.keepFrames}}}}}}.call(t,n,t,e))||(e.exports=i)},"./client/js/components/text.js":(e,t,n)=>{var i,a=n("jquery");void 0===(i=function(){return function(){return{_:{text:"",textColor:"#eee",fontSize:"14px",fontFamily:"Arial",textAlign:"center",textShadow:"none"},requiredComponents:["html-renderer"],onAdd:function(e,t){this.$text=a('<span class="text"></span>').appendTo(this.$el),this.$text.css({color:this.textColor,"font-size":this.fontSize,"font-family":this.fontFamily,"text-align":this.textAlign,"text-shadow":this.textShadow,display:"block",position:"absolute",width:"100%",height:"100%","line-height":"100%"}),this.$text.text(this.text)},messages:{"set-text":function(e,t){void 0!==t.text&&(this.text=t.text,this.$text.text(t.text)),t.color&&(this.textColor=t.color,this.$text.css("color",t.color)),t.fontSize&&(this.fontSize=t.fontSize,this.$text.css("font-size",t.fontSize)),t.fontFamily&&(this.fontFamily=t.fontFamily,this.$text.css("font-family",t.fontFamily)),t.textAlign&&(this.textAlign=t.textAlign,this.$text.css("text-align",t.textAlign)),t.textShadow&&(this.textShadow=t.textShadow,this.$text.css("text-shadow",t.textShadow))}}}}}.call(t,n,t,e))||(e.exports=i)},"./client/js/components/trap.js":(e,t,n)=>{var i;void 0===(i=function(){var e=new(n("./client/js/util/chance.js"));return function(){return{_:{icon:"warning-sign",damage:"2d6",disarmDifficulty:15,detectionRange:100,isDisarmed:!1,isDetected:!1,disarmAttempts:0,maxDisarmAttempts:3},requiredComponents:["position","glyphicon-renderer","sensor"],onAdd:function(e,t){this.senseTag="player",this.senseRange=this.detectionRange,e.sendMessage("change-icon",{icon:this.icon}),e.sendMessage("set-icon-color",{color:"#ff0000"})},update:function(e,t,n){if(!this.isDisarmed&&this.isDetected&&!this.isDisarmed){var i=t.engine.findEntityByTag("player");i&&Math.abs(i.data.position.y-this.position.y)<50&&this.triggerTrap(t,i)}},messages:{sensed:function(e,t){this.isDisarmed||this.isDetected||t.sensed.find((function(e){return e.tags.includes("player")}))&&(this.isDetected=!0,e.sendMessage("animate",{animation:"pulse"}),e.engine.findEntityByTag("music").sendMessage("trap-nearby"))},disarm:function(t,n){if(this.isDisarmed||!this.isDetected)return!1;this.disarmAttempts++;var i=t.engine.findEntityByTag("player");return e.rpg("1d20",{sum:!0})+(i.data.character.skills||0)>=this.disarmDifficulty?(this.isDisarmed=!0,t.sendMessage("animate",{animation:"explode",callback:function(){t.destroy()}}),t.engine.findEntityByTag("music").sendMessage("trap-disarmed"),!0):(this.disarmAttempts>=this.maxDisarmAttempts&&this.triggerTrap(t,i),!1)}},triggerTrap:function(t,n){if(!this.isDisarmed){this.isDisarmed=!0;var i=e.rpg(this.damage,{sum:!0});n.sendMessage("damage",{amount:i,isCritical:e.bool({likelihood:20})}),t.sendMessage("animate",{animation:"explode",callback:function(){t.destroy()}})}}}}}.call(t,n,t,e))||(e.exports=i)},"./client/js/components/vision.js":(e,t,n)=>{var i;void 0===(i=function(){var e=n("./client/js/util/underscore.js"),t=((t=n("./client/js/util/V2.js")).ImmutableV2,t.V2);return function(){return{_:{sightRange:400,withinSight:[],showVision:!0,circleColor:null},onAdd:function(e,t){this.levelManager=e.engine.findEntityByTag("level-manager"),this.levelManager,this.visionCircle=e.engine.createEntity({tags:["vision-circle"]}).addComponent("html-renderer",{htmlTemplateFactory:function(e,t){return'<div style="position:absolute;border:2px dashed '+e.engine.findEntityByTag("level-manager").data.currentLevel.colors.accent.toHexString()+'"></div>'}}).addComponent("mounted",{mountTag:"player",offset:{x:0,y:0}}),this.visionCircle.sendMessage("init"),this.visionCircle.data.$el.transition({"border-radius":this.sightRange+"px"}),this.visionCircle.data.size.width=2*this.sightRange,this.visionCircle.data.size.height=2*this.sightRange,this.$el.click((function(){e.data.visionCircle.shouldRender^=1}))},update:function(n,i,a){this.showVision&&this.circleColor!=this.levelManager.data.currentLevel.colors.accent.toHexString()&&(this.circleColor=this.levelManager.data.currentLevel.colors.accent.toHexString(),this.visionCircle.data.$el.css({"border-color":this.circleColor})),this.withinSight=e.filter(i.engine.findEntitiesByTag("vision-candidate"),(function(e){var n=e.isActive&&t.distanceBetween(i.data.position,e.data.position)<i.data.sightRange;return n?e.sendMessage("show"):e.sendMessage("hide"),n}))}}}}.call(t,n,t,e))||(e.exports=i)},"./client/js/components/weapon.js":(e,t,n)=>{var i=new(n("./client/js/util/chance.js"));e.exports=function(){return{_:{offset:{x:-35,y:35},pursueTarget:!1,icon:"ax",damage:"1d4",ability:null,state:"not-held"},tags:["level-change-subscriber"],onAdd:function(e,t){this.mountTarget&&(this.mountTarget.data.weapon=e,this.state="held"),this.$el.click((function(){if("held"==this.state)e.sendMessage("drop");else{var t=e.engine.findEntityByTag("player");t.data.weapon&&t.data.weapon.sendMessage("drop"),e.sendMessage("equip",{wielder:t})}})),this.$el.attr("title",this.icon+": "+this.damage)},requiredComponents:["mounted","animation","glyphicon-renderer","world-entity"],messages:{attack:function(e,t){return!(!t.target||"held"==!this.state||(t.target.sendMessage("damage",{amount:i.rpg(this.damage,{sum:!0})}),e.sendMessage("animate",{animation:"attack-down"}),0))},equip:function(e,t){t.wielder&&("held"==this.state&&e.sendMessage("drop"),e.sendMessage("mount",{target:t.wielder}),t.wielder.data.weapon=e,this.state="held")},drop:function(e,t){"held"==this.state&&(this.state="not-held",this.mountTarget.data.weapon=null,e.sendMessage("switch-to-current-level"),e.sendMessage("dismount",{}))}}}}},"./client/js/components/window.js":(e,t,n)=>{var i,a=n("jquery");function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e,t,n){return(t=function(e){var t=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}void 0===(i=function(){return n("./client/js/util/underscore.js"),function(){return{_:{isStaticPosition:!0,"z-index":1e3,title:"Window",width:300,height:400,position:{x:50,y:50},isDraggable:!0,isResizable:!0,isMinimized:!1,isMaximized:!1,originalPosition:null,originalSize:null},requiredComponents:["html-renderer"],onAdd:function(e,t){var n=this;this.$window=a('<div class="window" style="position: fixed; background: rgba(0,0,0,0.8); border: 1px solid #444; border-radius: 5px; box-shadow: 0 0 10px rgba(0,0,0,0.5);"></div>'),this.$titleBar=a('<div class="window-title" style="padding: 5px; background: #333; border-bottom: 1px solid #444; cursor: move; display: flex; justify-content: space-between; align-items: center;"></div>'),this.$title=a('<span class="window-title-text"></span>'),this.$controls=a('<div class="window-controls"></div>'),this.$minimize=a('<button class="window-minimize" style="background: none; border: none; color: #fff; cursor: pointer;">_</button>'),this.$maximize=a('<button class="window-maximize" style="background: none; border: none; color: #fff; cursor: pointer;">□</button>'),this.$close=a('<button class="window-close" style="background: none; border: none; color: #fff; cursor: pointer;">×</button>'),this.$content=a('<div class="window-content" style="padding: 10px; height: calc(100% - 30px); overflow: auto;"></div>'),this.$controls.append(this.$minimize,this.$maximize,this.$close),this.$titleBar.append(this.$title,this.$controls),this.$window.append(this.$titleBar,this.$content),this.$el.append(this.$window),this.updateWindowState(),this.isDraggable&&this.setupDragging(),this.isResizable&&this.setupResizing(),this.$minimize.click((function(){return n.toggleMinimize()})),this.$maximize.click((function(){return n.toggleMaximize()})),this.$close.click((function(){return e.destroy()}))},updateWindowState:function(){this.$title.text(this.title),this.isMinimized?(this.$window.css({height:"30px",width:this.width+"px"}),this.$content.hide()):this.isMaximized?(this.$window.css({width:"100%",height:"100%",top:0,left:0}),this.$content.show()):(this.$window.css({width:this.width+"px",height:this.height+"px",top:this.position.y+"px",left:this.position.x+"px"}),this.$content.show())},setupDragging:function(){var e,t,n,i,r=this,o=!1;this.$titleBar.mousedown((function(a){a.target!==r.$titleBar[0]&&a.target!==r.$title[0]||(o=!0,e=a.clientX,t=a.clientY,n=parseInt(r.$window.css("left")),i=parseInt(r.$window.css("top")))})),a(document).mousemove((function(a){o&&(r.position.x=n+(a.clientX-e),r.position.y=i+(a.clientY-t),r.updateWindowState())})),a(document).mouseup((function(){o=!1}))},setupResizing:function(){var e=this,t=a('<div class="window-resizer" style="position: absolute; right: 0; bottom: 0; width: 10px; height: 10px; cursor: se-resize;"></div>');this.$window.append(t);var n,i,r,o,s=!1;t.mousedown((function(t){s=!0,n=t.clientX,i=t.clientY,r=parseInt(e.$window.css("width")),o=parseInt(e.$window.css("height"))})),a(document).mousemove((function(t){s&&(e.width=Math.max(200,r+(t.clientX-n)),e.height=Math.max(200,o+(t.clientY-i)),e.updateWindowState())})),a(document).mouseup((function(){s=!1}))},toggleMinimize:function(){this.isMinimized=!this.isMinimized,this.isMaximized=!1,this.updateWindowState()},toggleMaximize:function(){this.isMaximized||(this.originalPosition=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.position),this.originalSize={width:this.width,height:this.height}),this.isMaximized=!this.isMaximized,this.isMinimized=!1,this.updateWindowState()},messages:{"set-title":function(e,t){this.title=t.title,this.updateWindowState()},"set-content":function(e,t){this.$content.html(t.content)}}}}}.call(t,n,t,e))||(e.exports=i)},"./client/js/models/level.js":(e,t,n)=>{var i;void 0===(i=function(){var e=n("./client/js/util/underscore.js"),t=n("./client/js/models/walls/walls.js"),i=n("./client/js/util/tinycolor.js"),a=e.values(i.names),r=n("jquery"),o=new(n("./client/js/util/chance.js"));return function(n,s){var l=this;if(this.worldEntity=n,this.active=!1,this.height=2e3+window.outerHeight,this.maxHeight=e.random(8e3,Math.min(8e3+1e3*s,14e3)),this.lowestKnownY=0,this.number=s,1===s)this.colors={background:i("#333"),font:i("#eee"),accent:i("#eee")};else{for(var u=i(a[e.random(0,a.length)]).splitcomplement(),c=i.mostReadable(u[0],[u[1],u[2]]),h=e.find(u,(function(e){return e!=c&&e!=u[0]})),d=u[0].toHsl(),m=n.data.levels[n.data.levels.length-1].colors.background.toHsl(),f=(d.h+m.h)/2,p=Math.abs(d.h-f),g=0;(p<100||!i.isReadable(u[0],c))&&(i.isReadable(u[0],c)&&g++,!(g>20));)u=i(a[e.random(0,a.length)]).splitcomplement(),c=i.mostReadable(u[0],[u[1],u[2]]),h=e.find(u,(function(e){return e!=c&&e!=u[0]})),f=((d=u[0].toHsl()).h+m.h)/2,p=Math.abs(d.h-f);u[0].getLuminance()>.6&&u[0].darken(20),this.colors={background:u[0],font:c,accent:h}}function b(){var e=r("#game"),t="none"===e.css("display");0===e.length&&(document.querySelector("#scroll-container").append((new DOMParser).parseFromString('<div id="game"></div>',"text/html").body.firstElementChild),e=r("#game")),e.show(),e.css("height",this.height+"px"),t&&e.hide()}this.entities=[],this.traps=[],this.walls=[],this.walls.push(new t(r("#game"),3e3,r(window).width()/3,t.Direction.LEFT,this.colors.accent.toHexString())),this.walls.push(new t(r("#game"),3e3,r(window).width()/3,t.Direction.RIGHT,this.colors.accent.toHexString())),this.entityMetaData=[],this.enemySpawner=n.engine.createEntity({tags:["enemy-spawner"]}).addComponent("enemy-spawner",{}),this.enemySpawner.sendMessage("init"),this.entities.push(this.enemySpawner),this.number<25&&(this.doorDown=n.engine.createEntity({tags:["vision-candidate","level-door"]}).addComponent("level-door",{size:{width:40,height:40}}),this.doorDown.sendMessage("init",{}),this.doorDown.data.position.y=this.maxHeight-500,this.doorDown.data.level=this,this.doorDown.sendMessage("hide"),this.entities.push(this.doorDown)),s>1&&(this.doorUp=n.engine.createEntity({tags:["vision-candidate","level-door"]}).addComponent("level-door",{leads:"up",size:{width:40,height:40}}),this.doorUp.sendMessage("init",{}),this.doorUp.data.position.y=700,this.doorUp.data.level=this,this.doorUp.sendMessage("hide"),this.entities.push(this.doorUp)),function(){for(var t=0;t<e.random(1,Math.min(8,Math.ceil(s/2)));t++){var i=e.random("doorUp"in l?l.doorUp.data.position.y+300:600,"doorDown"in l?l.doorDown.data.position.y-300:l.maxHeight-400);console.log("spawned trap at: "+i);var a=n.engine.createEntity({tags:["trap","vision-candidate"]}).addComponent("trap",{icon:o.pick(["fire","electricity","birthday-cake","bomb","heat","fingerprint-scan","webcam","restart"])});a.data.position.y=i,a.data.level=l,a.sendMessage("init"),l.entities.push(a)}}(),this.activate=function(e){var t=this.worldEntity.engine.findEntityByTag("player");if("below"==e)t&&(t.data.position.y=this.doorDown.data.position.y-150),this.doorDown.data.$el[0].scrollIntoView();else if(t&&this.number>1?(t.data.position.y=1e3,this.doorUp.data.$el[0].scrollIntoView()):t&&(t.data.position.y=0),this.number%5==0){var i=n.engine.createEntity({tags:["boss"]});i.data.level=l,i.addComponent("boss",{position:{x:this.doorDown.data.position.x,y:this.doorDown.data.position.y}}),this.doorDown.isActive=!1}this.worldEntity.data.currentLevel=this,b.call(this),this.walls.forEach((function(e){e.$wallContainer.show()})),this.entityMetaData.forEach((function(e){e.entity.isActive=e.isActive,e.shouldRender&&e.entity.sendMessage("show"),e.entity.shouldRender=e.shouldRender})),this.walls.forEach((function(e){e.$wallContainer.find(".wall-segment").animate({"border-top-color":l.colors.accent.toHexString()},1e3)})),r("#game").animate({"background-color":this.colors.background.toHexString()},1e3),r("#menu").css({background:"linear-gradient(to bottom, black 60%, "+this.colors.background.toHexString()+" 90%)"}),t&&t.sendMessage("set-scroll-to-position"),this.active=!0},this.deactivate=function(){var e=this.worldEntity.engine.findEntityByTag("player");this.worldEntity.data.currentLevel==this&&(this.worldEntity.data.currentLevel=null),this.walls.forEach((function(e){e.$wallContainer.hide()})),this.entityMetaData=this.entities.filter((function(t){return!e||t!=e})).map((function(e){var t={isActive:e.isActive,shouldRender:e.shouldRender,entity:e};return e.isActive=!1,e.sendMessage("hide"),e.shouldRender=!1,t})),this.active=!1},this.update=function(n){var i=this,a=i.lowestKnownY;if(this.entities.forEach((function(e){"position"in e.data&&e.data.position.y+3e3>i.lowestKnownY&&(i.lowestKnownY=e.data.position.y+3e3)})),this.player||(this.player=this.worldEntity.engine.findEntityByTag("player")),this.player&&this.player.data.position.y+1e3>this.lowestKnownY&&(this.lowestKnownY=this.player.data.position.y+2*document.height),this.lowestKnownY>a){if(this.height>=this.maxHeight)return;this.height=this.lowestKnownY,this.height>this.maxHeight&&(this.height=this.maxHeight),e.filter(this.walls,(function(e){return e.direction==t.Direction.LEFT||e.direction==t.Direction.RIGHT})).forEach((function(e){e.setMinLength(i.height)})),b.call(this)}}}}.call(t,n,t,e))||(e.exports=i)},"./client/js/models/spell.js":(e,t,n)=>{var i;void 0===(i=function(){var e=n("./client/js/util/chance.js"),t=(n("./client/js/util/underscore.js"),new e);function i(e,n){this.icon=e,this.damageRoll=n,this.getDamage=function(){return t.rpg(this.damageRoll,{sum:!0})},this.damageTarget=function(e){e.sendMessage("damage",{amount:this.getDamage()})}}var a=["heat","magic","fire","snowflake","stroller","ipod","flash","pizza","hazard"];return i.createRandom=function(){var e=t.integer({min:1,max:4})+"d"+t.integer({min:1,max:12});return new i(a[t.integer({min:0,max:a.length-1})],e)},i}.call(t,n,t,e))||(e.exports=i)},"./client/js/models/walls/wall-segment.js":(e,t,n)=>{var i,a=n("jquery");void 0===(i=function(){var e=(t=n("./client/js/util/V2.js")).ImmutableV2,t=t.V2;function i(t,n,i,a,r){this.topPoint=e.coalesce(i),this.bottomPoint=e.coalesce(n),this.wall=t,this.length=a,this.color=r}return i.prototype.getTransformAngle=function(){return Math.atan2(this.bottomPoint.Y-this.topPoint.Y,this.bottomPoint.X-this.topPoint.X),this.bottomPoint.sub(this.topPoint).toDegrees()},i.prototype.render=function(){this.$el&&(this.$el.remove(),this.$el=null),this.$gapFiller&&(this.$gapFiller.remove(),this.$gapFiller=null);var t=this.topPoint.vectorTo(this.bottomPoint),n=this.topPoint.add(t.normalize().multiply(t.length()/2)).add(t.normalize().perpendicular().multiply(25)).sub(new e(t.length()/2,25));this.$el="left"==this.wall.direction?a('<div class="wall-segment">').appendTo(this.wall.$wallContainer):a('<div class="wall-segment">').prependTo(this.wall.$wallContainer),this.$el.transition({width:t.length()+2+"px",height:"50px",left:n.X+"px",top:n.Y+"px","-webkit-transform":"rotate("+this.getTransformAngle()+"deg)","-moz-transform":"rotate("+this.getTransformAngle()+"deg)","-o-transform":"rotate("+this.getTransformAngle()+"deg)","-ms-transform":"rotate("+this.getTransformAngle()+"deg)",transform:"rotate("+this.getTransformAngle()+"deg)",duration:0,queue:!1}),this.$el.css({background:"transparent","border-top-color":this.color})},i}.call(t,n,t,e))||(e.exports=i)},"./client/js/models/walls/walls.js":(e,t,n)=>{var i,a=n("jquery");void 0===(i=function(){var e=n("./client/js/util/underscore.js"),t=n("./client/js/models/walls/wall-segment.js");function i(n,r,o,s,l){this.segments=[],this.$wallContainer=a('<div class="wall">').appendTo(n),this.$wallContainer.width(o),this.maxWidth=o,this.direction=s,this.length=0,this.addSegment=function(){var n={x:this.direction==i.Direction.RIGHT?o:0,y:0};this.segments.length&&(n.x=this.segments[this.segments.length-1].bottomPoint.X,n.y=this.segments[this.segments.length-1].bottomPoint.Y);var a={x:Math.min(Math.max(50,n.x+e.random(-75,75)),this.direction==i.Direction.RIGHT?this.maxWidth-50:this.maxWidth),y:n.y+e.random(50,200)},r=Math.abs(a.y-n.y),s=new t(this,a,n,r,l);this.length+=r,this.$wallContainer.height(this.length),s.render(),this.segments.push(s)},this.setMinLength=function(e){for(this.minLength=e;this.length<this.minLength;)this.addSegment()},this.setMinLength(r),this.$wallContainer.addClass(s+"-wall")}return i.Direction={UP:"up",DOWN:"down",RIGHT:"right",LEFT:"left",fromString:function(e){var t=e.toLowerCase().trim();return t!=this.UP&&t!=this.DOWN&&t!=this.RIGHT&&t!=this.LEFT?null:t}},i}.call(t,n,t,e))||(e.exports=i)},"./client/js/templates/characterSelection.hbs":(e,t,n)=>{var i=n("./node_modules/handlebars/runtime.js");e.exports=(i.default||i).template({1:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"            <span class='character-portrait glyphicons glyphicons-"+e.escapeExpression("function"==typeof(r=null!=(r=o(n,"icon")||(null!=t?o(t,"icon"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"icon",hash:{},data:a,loc:{start:{line:5,column:66},end:{line:5,column:74}}}):r)+"'></span>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<div class='character-selection text-center'>\n    <h2>Choose a character!</h2>\n    <div class='row portraits portrait-container' style='text-align: center'>\n"+(null!=(r=o(n,"each").call(null!=t?t:e.nullContext||{},null!=t?o(t,"characters"):t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:4,column:8},end:{line:6,column:17}}}))?r:"")+"    </div>\n\n    <h3 class='character-name'>Name</h3>\n    <input class='character-name-input' type='text' placeholder='Select a character' />\n    <p class='character-description'></p>\n    <h3>Stats</h3>\n    <div class='stats-container'>\n        <br/><strong>Skills </strong><span class='skills'></span>\n        <br/><strong>Brains </strong><span class='brains'></span>\n        <br/><strong>Brawn </strong><span class='brawn'></span>\n        <br/><strong>Light </strong><span class='light'></span>\n    </div>\n    <br/>\n    <button class='character-select-button centered btn btn-primary'>Select</button>\n</div>"},useData:!0})},"./client/js/templates/optionControls sync recursive ^\\.\\/.*\\.hbs$":(e,t,n)=>{var i={"./checkbox.hbs":"./client/js/templates/optionControls/checkbox.hbs","./number.hbs":"./client/js/templates/optionControls/number.hbs","./slider.hbs":"./client/js/templates/optionControls/slider.hbs","./text.hbs":"./client/js/templates/optionControls/text.hbs","./textarea.hbs":"./client/js/templates/optionControls/textarea.hbs","./textbox.hbs":"./client/js/templates/optionControls/textbox.hbs"};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id="./client/js/templates/optionControls sync recursive ^\\.\\/.*\\.hbs$"},"./client/js/templates/optionControls/checkbox.hbs":(e,t,n)=>{var i=n("./node_modules/handlebars/runtime.js");e.exports=(i.default||i).template({1:function(e,t,n,i,a){return"<input type='checkbox' checked='checked' />\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o,s=null!=t?t:e.nullContext||{},l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<h3>"+e.escapeExpression("function"==typeof(o=null!=(o=l(n,"_name")||(null!=t?l(t,"_name"):t))?o:e.hooks.helperMissing)?o.call(s,{name:"_name",hash:{},data:a,loc:{start:{line:1,column:4},end:{line:1,column:13}}}):o)+"</h3>\n"+(null!=(r=l(n,"if").call(s,null!=t?l(t,"value"):t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(1,a,0),data:a,loc:{start:{line:2,column:0},end:{line:6,column:7}}}))?r:"")},useData:!0})},"./client/js/templates/optionControls/number.hbs":(e,t,n)=>{var i=n("./node_modules/handlebars/runtime.js");e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,l="function",u=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<h3>"+u(typeof(r=null!=(r=c(n,"_name")||(null!=t?c(t,"_name"):t))?r:s)===l?r.call(o,{name:"_name",hash:{},data:a,loc:{start:{line:1,column:4},end:{line:1,column:13}}}):r)+"</h3>\n<input type='number' value='"+u(typeof(r=null!=(r=c(n,"value")||(null!=t?c(t,"value"):t))?r:s)===l?r.call(o,{name:"value",hash:{},data:a,loc:{start:{line:2,column:28},end:{line:2,column:37}}}):r)+"' />"},useData:!0})},"./client/js/templates/optionControls/slider.hbs":(e,t,n)=>{var i=n("./node_modules/handlebars/runtime.js");e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,l="function",u=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<h3>"+u(typeof(r=null!=(r=c(n,"_name")||(null!=t?c(t,"_name"):t))?r:s)===l?r.call(o,{name:"_name",hash:{},data:a,loc:{start:{line:1,column:4},end:{line:1,column:13}}}):r)+"</h3>\n<input style='width: 100%' type='range' min='"+u(typeof(r=null!=(r=c(n,"min")||(null!=t?c(t,"min"):t))?r:s)===l?r.call(o,{name:"min",hash:{},data:a,loc:{start:{line:2,column:45},end:{line:2,column:52}}}):r)+"' max='"+u(typeof(r=null!=(r=c(n,"max")||(null!=t?c(t,"max"):t))?r:s)===l?r.call(o,{name:"max",hash:{},data:a,loc:{start:{line:2,column:59},end:{line:2,column:66}}}):r)+"' value='"+u(typeof(r=null!=(r=c(n,"value")||(null!=t?c(t,"value"):t))?r:s)===l?r.call(o,{name:"value",hash:{},data:a,loc:{start:{line:2,column:75},end:{line:2,column:84}}}):r)+"' step='"+u(typeof(r=null!=(r=c(n,"step")||(null!=t?c(t,"step"):t))?r:s)===l?r.call(o,{name:"step",hash:{},data:a,loc:{start:{line:2,column:92},end:{line:2,column:100}}}):r)+"' />"},useData:!0})},"./client/js/templates/optionControls/text.hbs":(e,t,n)=>{var i=n("./node_modules/handlebars/runtime.js");e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,l="function",u=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<h3>"+u(typeof(r=null!=(r=c(n,"_name")||(null!=t?c(t,"_name"):t))?r:s)===l?r.call(o,{name:"_name",hash:{},data:a,loc:{start:{line:1,column:4},end:{line:1,column:13}}}):r)+"</h3>\n<p>\n    "+u(typeof(r=null!=(r=c(n,"value")||(null!=t?c(t,"value"):t))?r:s)===l?r.call(o,{name:"value",hash:{},data:a,loc:{start:{line:3,column:4},end:{line:3,column:13}}}):r)+"\n</p>"},useData:!0})},"./client/js/templates/optionControls/textarea.hbs":(e,t,n)=>{var i=n("./node_modules/handlebars/runtime.js");e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,l="function",u=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<h3>"+u(typeof(r=null!=(r=c(n,"_name")||(null!=t?c(t,"_name"):t))?r:s)===l?r.call(o,{name:"_name",hash:{},data:a,loc:{start:{line:1,column:4},end:{line:1,column:13}}}):r)+"</h3>\n<textarea cols='10' rows='4'>"+u(typeof(r=null!=(r=c(n,"value")||(null!=t?c(t,"value"):t))?r:s)===l?r.call(o,{name:"value",hash:{},data:a,loc:{start:{line:2,column:29},end:{line:2,column:38}}}):r)+"</textarea>"},useData:!0})},"./client/js/templates/optionControls/textbox.hbs":(e,t,n)=>{var i=n("./node_modules/handlebars/runtime.js");e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,l="function",u=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<h3>"+u(typeof(r=null!=(r=c(n,"_name")||(null!=t?c(t,"_name"):t))?r:s)===l?r.call(o,{name:"_name",hash:{},data:a,loc:{start:{line:1,column:4},end:{line:1,column:13}}}):r)+"</h3>\n<input type='text' value='"+u(typeof(r=null!=(r=c(n,"value")||(null!=t?c(t,"value"):t))?r:s)===l?r.call(o,{name:"value",hash:{},data:a,loc:{start:{line:2,column:26},end:{line:2,column:35}}}):r)+"' />"},useData:!0})},"./client/js/templates/options.hbs":(e,t,n)=>{var i=n("./node_modules/handlebars/runtime.js");e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){return"<div class='options-container' style='background-color: #eee; border: 4px solid #331; border-radius: 5px; position: fixed; font-size: 0.8em'>\n    <style type='text/css'>\n        .options-container * {\n            font-size: 1.2em;\n        }\n        \n        .options-container {\n            padding-right: 10px;\n            overflow-y: scroll;\n            height: 200px;\n        }\n        \n        .options-container p {\n            font-size: 0.8em;\n        }\n        \n        .hidden-options {\n            height: 100px;\n        }\n        \n        .options-header {\n            margin-top: 0;\n            padding-top: 10px;\n            padding-left: 10px;\n            cursor: pointer;\n        }\n    </style>\n    <h3 class='options-header'><span class='glyphicons glyphicons-chevron-right'></span><span class='options-hide'>Options</span></h3>\n    <script type='text/javascript'>\n    $(function() {\n        var $optionsHeader = $('.options-header');\n        \n        function hideHeader() {\n            $optionsHeader.attr('data-hidden', true);\n            $('.options-list, .options-hide').hide();\n            $('.options-container').addClass('hidden-options');\n            $optionsHeader.find('.glyphicons').css({ rotate: '90deg' });\n        }\n        \n        function showHeader() {\n            $optionsHeader.attr('data-hidden', false);\n            $('.options-list, .options-hide').show();\n            $('.options-container').removeClass('hidden-options');\n            $optionsHeader.find('.glyphicons').css({ rotate: '0deg' });\n        }\n        \n        $optionsHeader.click(function() {\n            if (!$(this).attr('data-hidden') || $(this).attr('data-hidden') == 'false') {\n                hideHeader();\n            } else {\n                showHeader();\n            }\n        });  \n        \n        hideHeader();\n    });\n    <\/script>\n    <ul class='options-list' style='list-style-type: none'>\n    </ul>\n</div>"},useData:!0})},"./client/js/templates/spells.hbs":(e,t,n)=>{var i=n("./node_modules/handlebars/runtime.js");e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){return"    <style type='text/css'>\n        .spell-container {\n            background-color: transparent;\n            left: 0;\n            width: 100%;\n            overflow-x: auto;\n            bottom: 0;\n            height: 100px;\n            position: fixed;\n            text-align: center;\n        }\n        \n        .spell-container .spell {\n            display: inline;\n            text-align: center;\n            width: 90px;\n            height: 90px;\n            margin: 0 10px 0 10px;\n            padding: 0;\n            font-size: 40px;\n            color: white;\n        }\n    </style>\n\n<div class='spell-container'>\n    \n    \n</div>"},useData:!0})},"./client/js/util/V2.js":(e,t,n)=>{var i;void 0===(i=function(){var e=n("mori");function t(n,a){void 0===n||void 0===a?(this.X=0,this.Y=0):(this.X=n,this.Y=a);var r=function(e){return e.constructor===t||e.constructor===i};this.isVector2=r,this.dot=function(e){return this.X*e.X+this.Y*e.Y},this.length=function(){return Math.sqrt(this.dot(this))},this.lengthSqr=function(){return this.dot(this)},this.abs=function(){return this.X=Math.abs(this.X),this.Y=Math.abs(this.Y),this},this.normalize=function(){var e=this.length();return this.X=this.X/e,this.Y=this.Y/e,this},this.multiply=function(e){return r(e)?(this.X=this.X*e.X,this.Y=this.Y*e.Y,this):(this.X=this.X*e,this.Y=this.Y*e,this)},this.divide=function(e){return this.X=this.X/e,this.Y=this.Y/e,this},this.add=function(e){return r(e)?(this.X=this.X+e.X,this.Y=this.Y+e.Y,this):(this.X=this.X+e,this.Y=this.Y+e,this)},this.sub=function(e){return r(e)?(this.X=this.X-e.X,this.Y=this.Y-e.Y,this):(this.X=this.X-e,this.Y=this.Y-e,this)},this.perpendicular=function(){var e=-this.Y,t=this.X;return this.Y=e,this.X=t,this},this.init=function(e,t){return this.X=e,this.Y=t,this},this.initFromV2=function(e){return this.X=e.X,this.Y=e.Y,this},this.copy=function(){return new t(this.X,this.Y)},this.asImmutable=function(){return new i(this.X,this.Y)},this.toRadians=function(){return Math.atan2(this.Y,this.X)},this.fromRadians=function(e){this.X=Math.cos(e),this.Y=Math.sin(e)},this.toDegrees=function(){return Math.degrees(this.toRadians())},this.fromDegrees=function(e){return this.fromRadians(Math.radians(e))},this.vectorTo=function(e){return t.coalesce(e).sub(this)},this.distanceTo=function(e){return t.coalesce(e).sub(this).length()},this.toString=function(){return"x: "+this.X+" y: "+this.Y},this.toFixed=function(e){return this.X=parseFloat(this.X.toFixed(e)),this.Y=parseFloat(this.Y.toFixed(e)),this},this.toMori=function(){return e.hashMap("x",this.X,"y",this.Y)},this.fromMori=function(t){return this.X=e.get(t,"x"),this.Y=e.get(t,"y"),this}}function i(n,a){void 0===n||void 0===a?(this.X=0,this.Y=0):(this.X=n,this.Y=a);var r=function(e){return e.constructor===t||e.constructor===i};this.Equals=function(e){return r(e)&&this.X==e.X&&this.Y==e.Y},this.dot=function(e){return this.X*e.X+this.Y*e.Y},this.length=function(){return Math.sqrt(this.dot(this))},this.perpendicular=function(){return new i(-this.Y,this.X)},this.lengthSqr=function(){return this.dot(this)},this.abs=function(){return new i(Math.abs(this.X),Math.abs(this.Y))},this.normalize=function(){var e=this.length();return new i(this.X/e,this.Y/e)},this.multiply=function(e){return r(e)?new i(this.X*e.X,this.Y*e.Y):new i(this.X*e,this.Y*e)},this.divide=function(e){return new i(this.X/e,this.Y/e)},this.add=function(e){return r(e)?new i(this.X+e.X,this.Y+e.Y):new i(this.X+e,this.Y+e)},this.sub=function(e){return r(e)?new i(this.X-e.X,this.Y-e.Y):new i(this.X-e,this.Y-e)},this.vectorTo=function(e){return i.coalesce(e).sub(this)},this.distanceTo=function(e){return i.coalesce(e).sub(this).length()},this.asMutable=function(){return new t(this.X,this.Y)},this.toRadians=function(){return Math.atan2(this.Y,this.X)},this.toDegrees=function(){return Math.degrees(this.toRadians())},this.fromDegrees=function(e){return this.fromRadians(Math.radians(e))},this.toString=function(){return"x: "+this.X+" y: "+this.Y},this.toFixed=function(e){return new i(parseFloat(this.X.toFixed(e)),parseFloat(this.Y.toFixed(e)))},this.toMori=function(){return e.hashMap("x",this.X,"y",this.Y)},this.fromMori=function(t){return new i(e.get(t,"x"),e.get(t,"y"))}}return t.coalesce=function(e){return e.constructor===t?e:new t(e.x||e.X||0,e.y||e.Y||0)},i.coalesce=function(e){return e.constructor===i?e:new i(e.x||e.X||0,e.y||e.Y||0)},t.distanceBetween=function(e,n){return t.coalesce(e).distanceTo(t.coalesce(n))},i.distanceBetween=function(e,t){return i.coalesce(e).distanceTo(i.coalesce(t))},i.fromTo=function(e,t){return i.coalesce(t).sub(i.coalesce(e))},i.fromRadians=function(e){return new i(Math.cos(e),Math.sin(e))},t.fromRadians=function(e){return new t(Math.cos(e),Math.sin(e))},t.fromTo=function(e,t){return i.coalesce(t).sub(i.coalesce(e))},Math.degrees=function(e){return e*(180/Math.PI)},Math.radians=function(e){return e*(Math.PI/180)},window&&(window.V2=t,window.ImmutableV2=i),{V2:t,ImmutableV2:i}}.call(t,n,t,e))||(e.exports=i)},"./client/js/util/buzz.js":function(e,t){var n,i,a;!function(r,o){"use strict";e.exports?e.exports=o():(i=[],void 0===(a="function"==typeof(n=o)?n.apply(t,i):n)||(e.exports=a))}(0,(function(){"use strict";var e=window.AudioContext||window.webkitAudioContext,t={defaults:{autoplay:!1,duration:5e3,formats:[],loop:!1,placeholder:"--",preload:"metadata",volume:80,webAudioApi:!1,document:window.document},types:{mp3:"audio/mpeg",ogg:"audio/ogg",wav:"audio/wav",aac:"audio/aac",m4a:"audio/x-m4a"},sounds:[],el:document.createElement("audio"),getAudioContext:function(){if(void 0===this.audioCtx)try{this.audioCtx=e?new e:null}catch(e){this.audioCtx=null}return this.audioCtx},sound:function(e,n){var i=(n=n||{}).document||t.defaults.document,a=0,r=[],o={},s=t.isSupported();function l(e){for(var t=[],n=e.length-1,i=0;i<=n;i++)t.push({start:e.start(i),end:e.end(i)});return t}function u(e){return e.split(".").pop()}if(this.load=function(){return s?(this.sound.load(),this):this},this.play=function(){return s?(this.sound.play(),this):this},this.togglePlay=function(){return s?(this.sound.paused?this.sound.play():this.sound.pause(),this):this},this.pause=function(){return s?(this.sound.pause(),this):this},this.isPaused=function(){return s?this.sound.paused:null},this.stop=function(){return s?(this.setTime(0),this.sound.pause(),this):this},this.isEnded=function(){return s?this.sound.ended:null},this.loop=function(){return s?(this.sound.loop="loop",this.bind("ended.buzzloop",(function(){this.currentTime=0,this.play()})),this):this},this.unloop=function(){return s?(this.sound.removeAttribute("loop"),this.unbind("ended.buzzloop"),this):this},this.mute=function(){return s?(this.sound.muted=!0,this):this},this.unmute=function(){return s?(this.sound.muted=!1,this):this},this.toggleMute=function(){return s?(this.sound.muted=!this.sound.muted,this):this},this.isMuted=function(){return s?this.sound.muted:null},this.setVolume=function(e){return s?(e<0&&(e=0),e>100&&(e=100),this.volume=e,this.sound.volume=e/100,this):this},this.getVolume=function(){return s?this.volume:this},this.increaseVolume=function(e){return this.setVolume(this.volume+(e||1))},this.decreaseVolume=function(e){return this.setVolume(this.volume-(e||1))},this.setTime=function(e){if(!s)return this;var t=!0;return this.whenReady((function(){!0===t&&(t=!1,this.sound.currentTime=e)})),this},this.getTime=function(){if(!s)return null;var e=Math.round(100*this.sound.currentTime)/100;return isNaN(e)?t.defaults.placeholder:e},this.setPercent=function(e){return s?this.setTime(t.fromPercent(e,this.sound.duration)):this},this.getPercent=function(){if(!s)return null;var e=Math.round(t.toPercent(this.sound.currentTime,this.sound.duration));return isNaN(e)?t.defaults.placeholder:e},this.setSpeed=function(e){return s?(this.sound.playbackRate=e,this):this},this.getSpeed=function(){return s?this.sound.playbackRate:null},this.getDuration=function(){if(!s)return null;var e=Math.round(100*this.sound.duration)/100;return isNaN(e)?t.defaults.placeholder:e},this.getPlayed=function(){return s?l(this.sound.played):null},this.getBuffered=function(){return s?l(this.sound.buffered):null},this.getSeekable=function(){return s?l(this.sound.seekable):null},this.getErrorCode=function(){return s&&this.sound.error?this.sound.error.code:0},this.getErrorMessage=function(){if(!s)return null;switch(this.getErrorCode()){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return null}},this.getStateCode=function(){return s?this.sound.readyState:null},this.getStateMessage=function(){if(!s)return null;switch(this.getStateCode()){case 0:return"HAVE_NOTHING";case 1:return"HAVE_METADATA";case 2:return"HAVE_CURRENT_DATA";case 3:return"HAVE_FUTURE_DATA";case 4:return"HAVE_ENOUGH_DATA";default:return null}},this.getNetworkStateCode=function(){return s?this.sound.networkState:null},this.getNetworkStateMessage=function(){if(!s)return null;switch(this.getNetworkStateCode()){case 0:return"NETWORK_EMPTY";case 1:return"NETWORK_IDLE";case 2:return"NETWORK_LOADING";case 3:return"NETWORK_NO_SOURCE";default:return null}},this.set=function(e,t){return s?(this.sound[e]=t,this):this},this.get=function(e){return s?e?this.sound[e]:this.sound:null},this.bind=function(e,t){if(!s)return this;e=e.split(" ");for(var n=this,i=function(e){t.call(n,e)},a=0;a<e.length;a++){var o=e[a],l=o;o=l.split(".")[0],r.push({idx:l,func:i}),this.sound.addEventListener(o,i,!0)}return this},this.unbind=function(e){if(!s)return this;e=e.split(" ");for(var t=0;t<e.length;t++)for(var n=e[t],i=n.split(".")[0],a=0;a<r.length;a++){var o=r[a].idx.split(".");(r[a].idx===n||o[1]&&o[1]===n.replace(".",""))&&(this.sound.removeEventListener(i,r[a].func,!0),r.splice(a,1))}return this},this.bindOnce=function(e,t){if(!s)return this;var n=this;return o[a++]=!1,this.bind(e+"."+a,(function(){o[a]||(o[a]=!0,t.call(n)),n.unbind(e+"."+a)})),this},this.trigger=function(e,t){if(!s)return this;e=e.split(" ");for(var n=0;n<e.length;n++)for(var a=e[n],o=0;o<r.length;o++){var l=r[o].idx.split(".");if(r[o].idx===a||l[0]&&l[0]===a.replace(".","")){var u=i.createEvent("HTMLEvents");u.initEvent(l[0],!1,!0),u.originalEvent=t,this.sound.dispatchEvent(u)}}return this},this.fadeTo=function(e,n,i){if(!s)return this;n instanceof Function?(i=n,n=t.defaults.duration):n=n||t.defaults.duration;var a=this.volume,r=n/Math.abs(a-e),o=this;function l(){setTimeout((function(){a<e&&o.volume<e?(o.setVolume(o.volume+=1),l()):a>e&&o.volume>e?(o.setVolume(o.volume-=1),l()):i instanceof Function&&i.apply(o)}),r)}return this.play(),this.whenReady((function(){l()})),this},this.fadeIn=function(e,t){return s?this.setVolume(0).fadeTo(100,e,t):this},this.fadeOut=function(e,t){return s?this.fadeTo(0,e,t):this},this.fadeWith=function(e,t){return s?(this.fadeOut(t,(function(){this.stop()})),e.play().fadeIn(t),this):this},this.whenReady=function(e){if(!s)return null;var t=this;0===this.sound.readyState?this.bind("canplay.buzzwhenready",(function(){e.call(t)})):e.call(t)},this.addSource=function(e){var n=this,a=i.createElement("source");return a.src=e,t.types[u(e)]&&(a.type=t.types[u(e)]),this.sound.appendChild(a),a.addEventListener("error",(function(e){n.sound.networkState=3,n.trigger("sourceerror",e)})),a},s&&e){for(var c in t.defaults)t.defaults.hasOwnProperty(c)&&void 0===n[c]&&(n[c]=t.defaults[c]);if(this.sound=i.createElement("audio"),n.webAudioApi){var h=t.getAudioContext();h&&(this.source=h.createMediaElementSource(this.sound),this.source.connect(h.destination))}if(e instanceof Array)for(var d in e)e.hasOwnProperty(d)&&this.addSource(e[d]);else if(n.formats.length)for(var m in n.formats)n.formats.hasOwnProperty(m)&&this.addSource(e+"."+n.formats[m]);else this.addSource(e);n.loop&&this.loop(),n.autoplay&&(this.sound.autoplay="autoplay"),!0===n.preload?this.sound.preload="auto":!1===n.preload?this.sound.preload="none":this.sound.preload=n.preload,this.setVolume(n.volume),t.sounds.push(this)}},group:function(e){function t(){for(var t=n(null,arguments),i=t.shift(),a=0;a<e.length;a++)e[a][i].apply(e[a],t)}function n(e,t){return e instanceof Array?e:Array.prototype.slice.call(t)}e=n(e,arguments),this.getSounds=function(){return e},this.add=function(t){t=n(t,arguments);for(var i=0;i<t.length;i++)e.push(t[i])},this.remove=function(t){t=n(t,arguments);for(var i=0;i<t.length;i++)for(var a=0;a<e.length;a++)if(e[a]===t[i]){e.splice(a,1);break}},this.load=function(){return t("load"),this},this.play=function(){return t("play"),this},this.togglePlay=function(){return t("togglePlay"),this},this.pause=function(e){return t("pause",e),this},this.stop=function(){return t("stop"),this},this.mute=function(){return t("mute"),this},this.unmute=function(){return t("unmute"),this},this.toggleMute=function(){return t("toggleMute"),this},this.setVolume=function(e){return t("setVolume",e),this},this.increaseVolume=function(e){return t("increaseVolume",e),this},this.decreaseVolume=function(e){return t("decreaseVolume",e),this},this.loop=function(){return t("loop"),this},this.unloop=function(){return t("unloop"),this},this.setSpeed=function(e){return t("setSpeed",e),this},this.setTime=function(e){return t("setTime",e),this},this.set=function(e,n){return t("set",e,n),this},this.bind=function(e,n){return t("bind",e,n),this},this.unbind=function(e){return t("unbind",e),this},this.bindOnce=function(e,n){return t("bindOnce",e,n),this},this.trigger=function(e){return t("trigger",e),this},this.fade=function(e,n,i,a){return t("fade",e,n,i,a),this},this.fadeIn=function(e,n){return t("fadeIn",e,n),this},this.fadeOut=function(e,n){return t("fadeOut",e,n),this}},all:function(){return new t.group(t.sounds)},isSupported:function(){return!!t.el.canPlayType},isOGGSupported:function(){return!!t.el.canPlayType&&t.el.canPlayType('audio/ogg; codecs="vorbis"')},isWAVSupported:function(){return!!t.el.canPlayType&&t.el.canPlayType('audio/wav; codecs="1"')},isMP3Supported:function(){return!!t.el.canPlayType&&t.el.canPlayType("audio/mpeg;")},isAACSupported:function(){return!!t.el.canPlayType&&(t.el.canPlayType("audio/x-m4a;")||t.el.canPlayType("audio/aac;"))},toTimer:function(e,t){var n,i,a;return n=Math.floor(e/3600),n=isNaN(n)?"--":n>=10?n:"0"+n,i=t?Math.floor(e/60%60):Math.floor(e/60),i=isNaN(i)?"--":i>=10?i:"0"+i,a=Math.floor(e%60),a=isNaN(a)?"--":a>=10?a:"0"+a,t?n+":"+i+":"+a:i+":"+a},fromTimer:function(e){var t=e.toString().split(":");return t&&3===t.length&&(e=3600*parseInt(t[0],10)+60*parseInt(t[1],10)+parseInt(t[2],10)),t&&2===t.length&&(e=60*parseInt(t[0],10)+parseInt(t[1],10)),e},toPercent:function(e,t,n){var i=Math.pow(10,n||0);return Math.round(100*e/t*i)/i},fromPercent:function(e,t,n){var i=Math.pow(10,n||0);return Math.round(t/100*e*i)/i}};return t}))},"./client/js/util/chance.js":(e,t)=>{var n;function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}!function(){var a=9007199254740992,r=-a,o="0123456789",s="abcdefghijklmnopqrstuvwxyz",l=s.toUpperCase(),u=o+"abcdef",c=Array.prototype.slice;function h(e){if(!(this instanceof h))return null==e?new h:new h(e);if("function"==typeof e)return this.random=e,this;var t;arguments.length&&(this.seed=0);for(var n=0;n<arguments.length;n++){if(t=0,"string"==typeof arguments[n])for(var i=0;i<arguments[n].length;i++)t+=(arguments[n].length-i)*arguments[n].charCodeAt(i);else t=arguments[n];this.seed+=(arguments.length-n)*t}return this.mt=this.mersenne_twister(this.seed),this.bimd5=this.blueimp_md5(),this.random=function(){return this.mt.random(this.seed)},this}function d(e,t){if(e||(e={}),t)for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e}function m(e,t){if(e)throw new RangeError(t)}h.prototype.VERSION="0.7.6";var f=function(){throw new Error("No Base64 encoder available.")};function p(e){return function(){return this.natural(e)}}"function"==typeof btoa?f=btoa:"function"==typeof Buffer&&(f=function(e){return new Buffer(e).toString("base64")}),h.prototype.bool=function(e){return m((e=d(e,{likelihood:50})).likelihood<0||e.likelihood>100,"Chance: Likelihood accepts values from 0 to 100."),100*this.random()<e.likelihood},h.prototype.character=function(e){m((e=d(e)).alpha&&e.symbols,"Chance: Cannot specify both alpha and symbols.");var t,n,i="!@#$%^&*()[]";return t="lower"===e.casing?s:"upper"===e.casing?l:s+l,(n=e.pool?e.pool:e.alpha?t:e.symbols?i:t+o+i).charAt(this.natural({max:n.length-1}))},h.prototype.floating=function(e){m((e=d(e,{fixed:4})).fixed&&e.precision,"Chance: Cannot specify both fixed and precision.");var t=Math.pow(10,e.fixed),n=a/t,i=-n;m(e.min&&e.fixed&&e.min<i,"Chance: Min specified is out of range with fixed. Min should be, at least, "+i),m(e.max&&e.fixed&&e.max>n,"Chance: Max specified is out of range with fixed. Max should be, at most, "+n),e=d(e,{min:i,max:n});var r=(this.integer({min:e.min*t,max:e.max*t})/t).toFixed(e.fixed);return parseFloat(r)},h.prototype.integer=function(e){return m((e=d(e,{min:r,max:a})).min>e.max,"Chance: Min cannot be greater than Max."),Math.floor(this.random()*(e.max-e.min+1)+e.min)},h.prototype.natural=function(e){return m((e=d(e,{min:0,max:a})).min<0,"Chance: Min cannot be less than zero."),this.integer(e)},h.prototype.string=function(e){m((e=d(e,{length:this.natural({min:5,max:20})})).length<0,"Chance: Length cannot be less than zero.");var t=e.length;return this.n(this.character,t,e).join("")},h.prototype.capitalize=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},h.prototype.mixin=function(e){for(var t in e)h.prototype[t]=e[t];return this},h.prototype.unique=function(e,t,n){m("function"!=typeof e,"Chance: The first argument must be a function."),n=d(n,{comparator:function(e,t){return-1!==e.indexOf(t)}});for(var i,a=[],r=0,o=50*t,s=c.call(arguments,2);a.length<t;)if(i=e.apply(this,s),n.comparator(a,i)||(a.push(i),r=0),++r>o)throw new RangeError("Chance: num is likely too large for sample set");return a},h.prototype.n=function(e,t){m("function"!=typeof e,"Chance: The first argument must be a function."),void 0===t&&(t=1);var n=t,i=[],a=c.call(arguments,2);for(n=Math.max(0,n);n--;null)i.push(e.apply(this,a));return i},h.prototype.pad=function(e,t,n){return n=n||"0",(e+="").length>=t?e:new Array(t-e.length+1).join(n)+e},h.prototype.pick=function(e,t){if(0===e.length)throw new RangeError("Chance: Cannot pick() from an empty array");return t&&1!==t?this.shuffle(e).slice(0,t):e[this.natural({max:e.length-1})]},h.prototype.shuffle=function(e){for(var t=e.slice(0),n=[],i=0,a=Number(t.length),r=0;r<a;r++)i=this.natural({max:t.length-1}),n[r]=t[i],t.splice(i,1);return n},h.prototype.weighted=function(e,t){if(e.length!==t.length)throw new RangeError("Chance: length of array and weights must match");for(var n=t.length-1;n>=0;--n)t[n]<=0&&(e.splice(n,1),t.splice(n,1));if(t.some((function(e){return e<1}))){var i=1/t.reduce((function(e,t){return t<e?t:e}),t[0]);t=t.map((function(e){return e*i}))}var a,r=t.reduce((function(e,t){return e+t}),0),o=this.natural({min:1,max:r}),s=0;return t.some((function(t,n){return o<=s+t?(a=e[n],!0):(s+=t,!1)})),a},h.prototype.paragraph=function(e){var t=(e=d(e)).sentences||this.natural({min:3,max:7});return this.n(this.sentence,t).join(" ")},h.prototype.sentence=function(e){var t,n=(e=d(e)).words||this.natural({min:12,max:18});return t=this.n(this.word,n).join(" "),this.capitalize(t)+"."},h.prototype.syllable=function(e){for(var t,n=(e=d(e)).length||this.natural({min:2,max:3}),i="bcdfghjklmnprstvwz",a="aeiou",r=i+a,o="",s=0;s<n;s++)o+=t=0===s?this.character({pool:r}):-1===i.indexOf(t)?this.character({pool:i}):this.character({pool:a});return o},h.prototype.word=function(e){m((e=d(e)).syllables&&e.length,"Chance: Cannot specify both syllables AND length.");var t=e.syllables||this.natural({min:1,max:3}),n="";if(e.length){do{n+=this.syllable()}while(n.length<e.length);n=n.substring(0,e.length)}else for(var i=0;i<t;i++)n+=this.syllable();return n},h.prototype.age=function(e){var t;switch((e=d(e)).type){case"child":t={min:1,max:12};break;case"teen":t={min:13,max:19};break;case"adult":default:t={min:18,max:65};break;case"senior":t={min:65,max:100};break;case"all":t={min:1,max:100}}return this.natural(t)},h.prototype.birthday=function(e){return e=d(e,{year:(new Date).getFullYear()-this.age(e)}),this.date(e)},h.prototype.cpf=function(){var e=this.n(this.natural,9,{max:9}),t=2*e[8]+3*e[7]+4*e[6]+5*e[5]+6*e[4]+7*e[3]+8*e[2]+9*e[1]+10*e[0];(t=11-t%11)>=10&&(t=0);var n=2*t+3*e[8]+4*e[7]+5*e[6]+6*e[5]+7*e[4]+8*e[3]+9*e[2]+10*e[1]+11*e[0];return(n=11-n%11)>=10&&(n=0),""+e[0]+e[1]+e[2]+"."+e[3]+e[4]+e[5]+"."+e[6]+e[7]+e[8]+"-"+t+n},h.prototype.first=function(e){return e=d(e,{gender:this.gender()}),this.pick(this.get("firstNames")[e.gender.toLowerCase()])},h.prototype.gender=function(){return this.pick(["Male","Female"])},h.prototype.last=function(){return this.pick(this.get("lastNames"))},h.prototype.mrz=function(e){var t,n,i,a,r=function(e){var t="<ABCDEFGHIJKLMNOPQRSTUVWXYXZ".split(""),n=[7,3,1],i=0;return"string"!=typeof e&&(e=e.toString()),e.split("").forEach((function(e,a){var r=t.indexOf(e);e=-1!==r?0===r?0:r+9:parseInt(e,10),i+=e*=n[a%n.length]})),i%10},o=this;return i=function(e){return new Array(e+1).join("<")},(a=["P<",(n=e=d(e,{first:this.first(),last:this.last(),passportNumber:this.integer({min:1e8,max:999999999}),dob:(t=o.birthday({type:"adult"}),[t.getFullYear().toString().substr(2),o.pad(t.getMonth()+1,2),o.pad(t.getDate(),2)].join("")),expiry:function(){var e=new Date;return[(e.getFullYear()+5).toString().substr(2),o.pad(e.getMonth()+1,2),o.pad(e.getDate(),2)].join("")}(),gender:"Female"===this.gender()?"F":"M",issuer:"GBR",nationality:"GBR"})).issuer,n.last.toUpperCase(),"<<",n.first.toUpperCase(),i(39-(n.last.length+n.first.length+2)),n.passportNumber,r(n.passportNumber),n.nationality,n.dob,r(n.dob),n.gender,n.expiry,r(n.expiry),i(14),r(i(14))].join(""))+r(a.substr(44,10)+a.substr(57,7)+a.substr(65,7))},h.prototype.name=function(e){e=d(e);var t,n=this.first(e),i=this.last();return t=e.middle?n+" "+this.first(e)+" "+i:e.middle_initial?n+" "+this.character({alpha:!0,casing:"upper"})+". "+i:n+" "+i,e.prefix&&(t=this.prefix(e)+" "+t),e.suffix&&(t=t+" "+this.suffix(e)),t},h.prototype.name_prefixes=function(e){var t=[{name:"Doctor",abbreviation:"Dr."}];return"male"!==(e=(e=e||"all").toLowerCase())&&"all"!==e||t.push({name:"Mister",abbreviation:"Mr."}),"female"!==e&&"all"!==e||(t.push({name:"Miss",abbreviation:"Miss"}),t.push({name:"Misses",abbreviation:"Mrs."})),t},h.prototype.prefix=function(e){return this.name_prefix(e)},h.prototype.name_prefix=function(e){return(e=d(e,{gender:"all"})).full?this.pick(this.name_prefixes(e.gender)).name:this.pick(this.name_prefixes(e.gender)).abbreviation},h.prototype.ssn=function(e){var t="1234567890",n=(e=d(e,{ssnFour:!1,dashes:!0})).dashes?"-":"";return e.ssnFour?this.string({pool:t,length:4}):this.string({pool:t,length:3})+n+this.string({pool:t,length:2})+n+this.string({pool:t,length:4})},h.prototype.name_suffixes=function(){return[{name:"Doctor of Osteopathic Medicine",abbreviation:"D.O."},{name:"Doctor of Philosophy",abbreviation:"Ph.D."},{name:"Esquire",abbreviation:"Esq."},{name:"Junior",abbreviation:"Jr."},{name:"Juris Doctor",abbreviation:"J.D."},{name:"Master of Arts",abbreviation:"M.A."},{name:"Master of Business Administration",abbreviation:"M.B.A."},{name:"Master of Science",abbreviation:"M.S."},{name:"Medical Doctor",abbreviation:"M.D."},{name:"Senior",abbreviation:"Sr."},{name:"The Third",abbreviation:"III"},{name:"The Fourth",abbreviation:"IV"},{name:"Bachelor of Engineering",abbreviation:"B.E"},{name:"Bachelor of Technology",abbreviation:"B.TECH"}]},h.prototype.suffix=function(e){return this.name_suffix(e)},h.prototype.name_suffix=function(e){return(e=d(e)).full?this.pick(this.name_suffixes()).name:this.pick(this.name_suffixes()).abbreviation},h.prototype.android_id=function(){return"APA91"+this.string({pool:"0123456789abcefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_",length:178})},h.prototype.apple_token=function(){return this.string({pool:"abcdef1234567890",length:64})},h.prototype.wp8_anid2=function(){return f(this.hash({length:32}))},h.prototype.wp7_anid=function(){return"A="+this.guid().replace(/-/g,"").toUpperCase()+"&E="+this.hash({length:3})+"&W="+this.integer({min:0,max:9})},h.prototype.bb_pin=function(){return this.hash({length:8})},h.prototype.avatar=function(e){var t={protocol:null,email:null,fileExtension:null,size:null,fallback:null,rating:null};if(e)if("string"==typeof e)t.email=e,e={};else{if("object"!==i(e))return null;if("Array"===e.constructor)return null}else t.email=this.email(),e={};return(t=d(e,t)).email||(t.email=this.email()),t.protocol={http:"http",https:"https"}[t.protocol]?t.protocol+":":"",t.size=parseInt(t.size,0)?t.size:"",t.rating={g:"g",pg:"pg",r:"r",x:"x"}[t.rating]?t.rating:"",t.fallback={404:"404",mm:"mm",identicon:"identicon",monsterid:"monsterid",wavatar:"wavatar",retro:"retro",blank:"blank"}[t.fallback]?t.fallback:"",t.fileExtension={bmp:"bmp",gif:"gif",jpg:"jpg",png:"png"}[t.fileExtension]?t.fileExtension:"",t.protocol+"//www.gravatar.com/avatar/"+this.bimd5.md5(t.email)+(t.fileExtension?"."+t.fileExtension:"")+(t.size||t.rating||t.fallback?"?":"")+(t.size?"&s="+t.size.toString():"")+(t.rating?"&r="+t.rating:"")+(t.fallback?"&d="+t.fallback:"")},h.prototype.color=function(e){function t(e,t){return[e,e,e].join(t||"")}var n,i=(e=d(e,{format:this.pick(["hex","shorthex","rgb","rgba","0x"]),grayscale:!1,casing:"lower"})).grayscale;if("hex"===e.format)n="#"+(i?t(this.hash({length:2})):this.hash({length:6}));else if("shorthex"===e.format)n="#"+(i?t(this.hash({length:1})):this.hash({length:3}));else if("rgb"===e.format)n=i?"rgb("+t(this.natural({max:255}),",")+")":"rgb("+this.natural({max:255})+","+this.natural({max:255})+","+this.natural({max:255})+")";else if("rgba"===e.format)n=i?"rgba("+t(this.natural({max:255}),",")+","+this.floating({min:0,max:1})+")":"rgba("+this.natural({max:255})+","+this.natural({max:255})+","+this.natural({max:255})+","+this.floating({min:0,max:1})+")";else{if("0x"!==e.format)throw new RangeError('Invalid format provided. Please provide one of "hex", "shorthex", "rgb", "rgba", or "0x".');n="0x"+(i?t(this.hash({length:2})):this.hash({length:6}))}return"upper"===e.casing&&(n=n.toUpperCase()),n},h.prototype.domain=function(e){return e=d(e),this.word()+"."+(e.tld||this.tld())},h.prototype.email=function(e){return e=d(e),this.word({length:e.length})+"@"+(e.domain||this.domain())},h.prototype.fbid=function(){return parseInt("10000"+this.natural({max:1e11}),10)},h.prototype.google_analytics=function(){return"UA-"+this.pad(this.natural({max:999999}),6)+"-"+this.pad(this.natural({max:99}),2)},h.prototype.hashtag=function(){return"#"+this.word()},h.prototype.ip=function(){return this.natural({max:255})+"."+this.natural({max:255})+"."+this.natural({max:255})+"."+this.natural({max:255})},h.prototype.ipv6=function(){return this.n(this.hash,8,{length:4}).join(":")},h.prototype.klout=function(){return this.natural({min:1,max:99})},h.prototype.tlds=function(){return["com","org","edu","gov","co.uk","net","io"]},h.prototype.tld=function(){return this.pick(this.tlds())},h.prototype.twitter=function(){return"@"+this.word()},h.prototype.url=function(e){var t=(e=d(e,{protocol:"http",domain:this.domain(e),domain_prefix:"",path:this.word(),extensions:[]})).extensions.length>0?"."+this.pick(e.extensions):"",n=e.domain_prefix?e.domain_prefix+"."+e.domain:e.domain;return e.protocol+"://"+n+"/"+e.path+t},h.prototype.address=function(e){return e=d(e),this.natural({min:5,max:2e3})+" "+this.street(e)},h.prototype.altitude=function(e){return e=d(e,{fixed:5,min:0,max:8848}),this.floating({min:e.min,max:e.max,fixed:e.fixed})},h.prototype.areacode=function(e){e=d(e,{parens:!0});var t=this.natural({min:2,max:9}).toString()+this.natural({min:0,max:8}).toString()+this.natural({min:0,max:9}).toString();return e.parens?"("+t+")":t},h.prototype.city=function(){return this.capitalize(this.word({syllables:3}))},h.prototype.coordinates=function(e){return this.latitude(e)+", "+this.longitude(e)},h.prototype.countries=function(){return this.get("countries")},h.prototype.country=function(e){e=d(e);var t=this.pick(this.countries());return e.full?t.name:t.abbreviation},h.prototype.depth=function(e){return e=d(e,{fixed:5,min:-2550,max:0}),this.floating({min:e.min,max:e.max,fixed:e.fixed})},h.prototype.geohash=function(e){return e=d(e,{length:7}),this.string({length:e.length,pool:"0123456789bcdefghjkmnpqrstuvwxyz"})},h.prototype.geojson=function(e){return this.latitude(e)+", "+this.longitude(e)+", "+this.altitude(e)},h.prototype.latitude=function(e){return e=d(e,{fixed:5,min:-90,max:90}),this.floating({min:e.min,max:e.max,fixed:e.fixed})},h.prototype.longitude=function(e){return e=d(e,{fixed:5,min:-180,max:180}),this.floating({min:e.min,max:e.max,fixed:e.fixed})},h.prototype.phone=function(e){var t,n,i=this,a=function(e){var t=[];return e.sections.forEach((function(e){t.push(i.string({pool:"0123456789",length:e}))})),e.area+t.join(" ")};switch((e=d(e,{formatted:!0,country:"us",mobile:!1})).formatted||(e.parens=!1),e.country){case"fr":e.mobile?(t=this.pick(["06","07"])+i.string({pool:"0123456789",length:8}),n=e.formatted?t.match(/../g).join(" "):t):(t=this.pick(["01"+this.pick(["30","34","39","40","41","42","43","44","45","46","47","48","49","53","55","56","58","60","64","69","70","72","73","74","75","76","77","78","79","80","81","82","83"])+i.string({pool:"0123456789",length:6}),"02"+this.pick(["14","18","22","23","28","29","30","31","32","33","34","35","36","37","38","40","41","43","44","45","46","47","48","49","50","51","52","53","54","56","57","61","62","69","72","76","77","78","85","90","96","97","98","99"])+i.string({pool:"0123456789",length:6}),"03"+this.pick(["10","20","21","22","23","24","25","26","27","28","29","39","44","45","51","52","54","55","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","80","81","82","83","84","85","86","87","88","89","90"])+i.string({pool:"0123456789",length:6}),"04"+this.pick(["11","13","15","20","22","26","27","30","32","34","37","42","43","44","50","56","57","63","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","88","89","90","91","92","93","94","95","97","98"])+i.string({pool:"0123456789",length:6}),"05"+this.pick(["08","16","17","19","24","31","32","33","34","35","40","45","46","47","49","53","55","56","57","58","59","61","62","63","64","65","67","79","81","82","86","87","90","94"])+i.string({pool:"0123456789",length:6}),"09"+i.string({pool:"0123456789",length:8})]),n=e.formatted?t.match(/../g).join(" "):t);break;case"uk":e.mobile?(t=this.pick([{area:"07"+this.pick(["4","5","7","8","9"]),sections:[2,6]},{area:"07624 ",sections:[6]}]),n=e.formatted?a(t):a(t).replace(" ","")):(t=this.pick([{area:"01"+this.character({pool:"234569"})+"1 ",sections:[3,4]},{area:"020 "+this.character({pool:"378"}),sections:[3,4]},{area:"023 "+this.character({pool:"89"}),sections:[3,4]},{area:"024 7",sections:[3,4]},{area:"028 "+this.pick(["25","28","37","71","82","90","92","95"]),sections:[2,4]},{area:"012"+this.pick(["04","08","54","76","97","98"])+" ",sections:[5]},{area:"013"+this.pick(["63","64","84","86"])+" ",sections:[5]},{area:"014"+this.pick(["04","20","60","61","80","88"])+" ",sections:[5]},{area:"015"+this.pick(["24","27","62","66"])+" ",sections:[5]},{area:"016"+this.pick(["06","29","35","47","59","95"])+" ",sections:[5]},{area:"017"+this.pick(["26","44","50","68"])+" ",sections:[5]},{area:"018"+this.pick(["27","37","84","97"])+" ",sections:[5]},{area:"019"+this.pick(["00","05","35","46","49","63","95"])+" ",sections:[5]}]),n=e.formatted?a(t):a(t).replace(" ","","g"));break;case"us":var r=this.areacode(e).toString(),o=this.natural({min:2,max:9}).toString()+this.natural({min:0,max:9}).toString()+this.natural({min:0,max:9}).toString(),s=this.natural({min:1e3,max:9999}).toString();n=e.formatted?r+" "+o+"-"+s:r+o+s}return n},h.prototype.postal=function(){return this.character({pool:"XVTSRPNKLMHJGECBA"})+this.natural({max:9})+this.character({alpha:!0,casing:"upper"})+" "+(this.natural({max:9})+this.character({alpha:!0,casing:"upper"})+this.natural({max:9}))},h.prototype.provinces=function(){return this.get("provinces")},h.prototype.province=function(e){return e&&e.full?this.pick(this.provinces()).name:this.pick(this.provinces()).abbreviation},h.prototype.state=function(e){return e&&e.full?this.pick(this.states(e)).name:this.pick(this.states(e)).abbreviation},h.prototype.states=function(e){e=d(e);var t,n=this.get("us_states_and_dc"),i=this.get("territories"),a=this.get("armed_forces");return t=n,e.territories&&(t=t.concat(i)),e.armed_forces&&(t=t.concat(a)),t},h.prototype.street=function(e){e=d(e);var t=this.word({syllables:2});return t=this.capitalize(t),(t+=" ")+(e.short_suffix?this.street_suffix().abbreviation:this.street_suffix().name)},h.prototype.street_suffix=function(){return this.pick(this.street_suffixes())},h.prototype.street_suffixes=function(){return this.get("street_suffixes")},h.prototype.zip=function(e){var t=this.n(this.natural,5,{max:9});return e&&!0===e.plusfour&&(t.push("-"),t=t.concat(this.n(this.natural,4,{max:9}))),t.join("")},h.prototype.ampm=function(){return this.bool()?"am":"pm"},h.prototype.date=function(e){var t,n;if(e&&(e.min||e.max)){var i=void 0!==(e=d(e,{american:!0,string:!1})).min?e.min.getTime():1,a=void 0!==e.max?e.max.getTime():864e13;n=new Date(this.natural({min:i,max:a}))}else{var r=this.month({raw:!0}),o=r.days;e&&e.month&&(o=this.get("months")[(e.month%12+12)%12].days),e=d(e,{year:parseInt(this.year(),10),month:r.numeric-1,day:this.natural({min:1,max:o}),hour:this.hour(),minute:this.minute(),second:this.second(),millisecond:this.millisecond(),american:!0,string:!1}),n=new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond)}return t=e.american?n.getMonth()+1+"/"+n.getDate()+"/"+n.getFullYear():n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear(),e.string?t:n},h.prototype.hammertime=function(e){return this.date(e).getTime()},h.prototype.hour=function(e){return m((e=d(e,{min:1,max:e&&e.twentyfour?24:12})).min<1,"Chance: Min cannot be less than 1."),m(e.twentyfour&&e.max>24,"Chance: Max cannot be greater than 24 for twentyfour option."),m(!e.twentyfour&&e.max>12,"Chance: Max cannot be greater than 12."),m(e.min>e.max,"Chance: Min cannot be greater than Max."),this.natural({min:e.min,max:e.max})},h.prototype.millisecond=function(){return this.natural({max:999})},h.prototype.minute=h.prototype.second=function(e){return m((e=d(e,{min:0,max:59})).min<0,"Chance: Min cannot be less than 0."),m(e.max>59,"Chance: Max cannot be greater than 59."),m(e.min>e.max,"Chance: Min cannot be greater than Max."),this.natural({min:e.min,max:e.max})},h.prototype.month=function(e){m((e=d(e,{min:1,max:12})).min<1,"Chance: Min cannot be less than 1."),m(e.max>12,"Chance: Max cannot be greater than 12."),m(e.min>e.max,"Chance: Min cannot be greater than Max.");var t=this.pick(this.months().slice(e.min-1,e.max));return e.raw?t:t.name},h.prototype.months=function(){return this.get("months")},h.prototype.second=function(){return this.natural({max:59})},h.prototype.timestamp=function(){return this.natural({min:1,max:parseInt((new Date).getTime()/1e3,10)})},h.prototype.year=function(e){return(e=d(e,{min:(new Date).getFullYear()})).max=void 0!==e.max?e.max:e.min+100,this.natural(e).toString()},h.prototype.cc=function(e){var t,n,i;return n=(t=(e=d(e)).type?this.cc_type({name:e.type,raw:!0}):this.cc_type({raw:!0})).prefix.split(""),i=t.length-t.prefix.length-1,(n=n.concat(this.n(this.integer,i,{min:0,max:9}))).push(this.luhn_calculate(n.join(""))),n.join("")},h.prototype.cc_types=function(){return this.get("cc_types")},h.prototype.cc_type=function(e){e=d(e);var t=this.cc_types(),n=null;if(e.name){for(var i=0;i<t.length;i++)if(t[i].name===e.name||t[i].short_name===e.name){n=t[i];break}if(null===n)throw new RangeError("Credit card type '"+e.name+"'' is not supported")}else n=this.pick(t);return e.raw?n:n.name},h.prototype.currency_types=function(){return this.get("currency_types")},h.prototype.currency=function(){return this.pick(this.currency_types())},h.prototype.currency_pair=function(e){var t=this.unique(this.currency,2,{comparator:function(e,t){return e.reduce((function(e,n){return e||n.code===t.code}),!1)}});return e?t[0].code+"/"+t[1].code:t},h.prototype.dollar=function(e){e=d(e,{max:1e4,min:0});var t=this.floating({min:e.min,max:e.max,fixed:2}).toString(),n=t.split(".")[1];return void 0===n?t+=".00":n.length<2&&(t+="0"),t<0?"-$"+t.replace("-",""):"$"+t},h.prototype.exp=function(e){e=d(e);var t={};return t.year=this.exp_year(),t.year===(new Date).getFullYear().toString()?t.month=this.exp_month({future:!0}):t.month=this.exp_month(),e.raw?t:t.month+"/"+t.year},h.prototype.exp_month=function(e){e=d(e);var t,n,i=(new Date).getMonth()+1;if(e.future)do{t=this.month({raw:!0}).numeric,n=parseInt(t,10)}while(n<=i);else t=this.month({raw:!0}).numeric;return t},h.prototype.exp_year=function(){return this.year({max:(new Date).getFullYear()+10})},h.prototype.d4=p({min:1,max:4}),h.prototype.d6=p({min:1,max:6}),h.prototype.d8=p({min:1,max:8}),h.prototype.d10=p({min:1,max:10}),h.prototype.d12=p({min:1,max:12}),h.prototype.d20=p({min:1,max:20}),h.prototype.d30=p({min:1,max:30}),h.prototype.d100=p({min:1,max:100}),h.prototype.rpg=function(e,t){if(t=d(t),e){var n=e.toLowerCase().split("d"),i=[];if(2!==n.length||!parseInt(n[0],10)||!parseInt(n[1],10))throw new Error("Invalid format provided. Please provide #d# where the first # is the number of dice to roll, the second # is the max of each die");for(var a=n[0];a>0;a--)i[a-1]=this.natural({min:1,max:n[1]});return void 0!==t.sum&&t.sum?i.reduce((function(e,t){return e+t})):i}throw new RangeError("A type of die roll must be included")},h.prototype.guid=function(e){e=d(e,{version:5});var t="abcdef1234567890";return this.string({pool:t,length:8})+"-"+this.string({pool:t,length:4})+"-"+e.version+this.string({pool:t,length:3})+"-"+this.string({pool:"ab89",length:1})+this.string({pool:t,length:3})+"-"+this.string({pool:t,length:12})},h.prototype.hash=function(e){var t="upper"===(e=d(e,{length:40,casing:"lower"})).casing?u.toUpperCase():u;return this.string({pool:t,length:e.length})},h.prototype.luhn_check=function(e){var t=e.toString();return+t.substring(t.length-1)===this.luhn_calculate(+t.substring(0,t.length-1))},h.prototype.luhn_calculate=function(e){for(var t,n=e.toString().split("").reverse(),i=0,a=0,r=n.length;r>a;++a)t=+n[a],a%2==0&&(t*=2)>9&&(t-=9),i+=t;return 9*i%10},h.prototype.md5=function(e){var t={str:"",key:null,raw:!1};if(e)if("string"==typeof e)t.str=e,e={};else{if("object"!==i(e))return null;if("Array"===e.constructor)return null}else t.str=this.string(),e={};if(!(t=d(e,t)).str)throw new Error("A parameter is required to return an md5 hash.");return this.bimd5.md5(t.str,t.key,t.raw)};var g={firstNames:{male:["James","John","Robert","Michael","William","David","Richard","Joseph","Charles","Thomas","Christopher","Daniel","Matthew","George","Donald","Anthony","Paul","Mark","Edward","Steven","Kenneth","Andrew","Brian","Joshua","Kevin","Ronald","Timothy","Jason","Jeffrey","Frank","Gary","Ryan","Nicholas","Eric","Stephen","Jacob","Larry","Jonathan","Scott","Raymond","Justin","Brandon","Gregory","Samuel","Benjamin","Patrick","Jack","Henry","Walter","Dennis","Jerry","Alexander","Peter","Tyler","Douglas","Harold","Aaron","Jose","Adam","Arthur","Zachary","Carl","Nathan","Albert","Kyle","Lawrence","Joe","Willie","Gerald","Roger","Keith","Jeremy","Terry","Harry","Ralph","Sean","Jesse","Roy","Louis","Billy","Austin","Bruce","Eugene","Christian","Bryan","Wayne","Russell","Howard","Fred","Ethan","Jordan","Philip","Alan","Juan","Randy","Vincent","Bobby","Dylan","Johnny","Phillip","Victor","Clarence","Ernest","Martin","Craig","Stanley","Shawn","Travis","Bradley","Leonard","Earl","Gabriel","Jimmy","Francis","Todd","Noah","Danny","Dale","Cody","Carlos","Allen","Frederick","Logan","Curtis","Alex","Joel","Luis","Norman","Marvin","Glenn","Tony","Nathaniel","Rodney","Melvin","Alfred","Steve","Cameron","Chad","Edwin","Caleb","Evan","Antonio","Lee","Herbert","Jeffery","Isaac","Derek","Ricky","Marcus","Theodore","Elijah","Luke","Jesus","Eddie","Troy","Mike","Dustin","Ray","Adrian","Bernard","Leroy","Angel","Randall","Wesley","Ian","Jared","Mason","Hunter","Calvin","Oscar","Clifford","Jay","Shane","Ronnie","Barry","Lucas","Corey","Manuel","Leo","Tommy","Warren","Jackson","Isaiah","Connor","Don","Dean","Jon","Julian","Miguel","Bill","Lloyd","Charlie","Mitchell","Leon","Jerome","Darrell","Jeremiah","Alvin","Brett","Seth","Floyd","Jim","Blake","Micheal","Gordon","Trevor","Lewis","Erik","Edgar","Vernon","Devin","Gavin","Jayden","Chris","Clyde","Tom","Derrick","Mario","Brent","Marc","Herman","Chase","Dominic","Ricardo","Franklin","Maurice","Max","Aiden","Owen","Lester","Gilbert","Elmer","Gene","Francisco","Glen","Cory","Garrett","Clayton","Sam","Jorge","Chester","Alejandro","Jeff","Harvey","Milton","Cole","Ivan","Andre","Duane","Landon"],female:["Mary","Emma","Elizabeth","Minnie","Margaret","Ida","Alice","Bertha","Sarah","Annie","Clara","Ella","Florence","Cora","Martha","Laura","Nellie","Grace","Carrie","Maude","Mabel","Bessie","Jennie","Gertrude","Julia","Hattie","Edith","Mattie","Rose","Catherine","Lillian","Ada","Lillie","Helen","Jessie","Louise","Ethel","Lula","Myrtle","Eva","Frances","Lena","Lucy","Edna","Maggie","Pearl","Daisy","Fannie","Josephine","Dora","Rosa","Katherine","Agnes","Marie","Nora","May","Mamie","Blanche","Stella","Ellen","Nancy","Effie","Sallie","Nettie","Della","Lizzie","Flora","Susie","Maud","Mae","Etta","Harriet","Sadie","Caroline","Katie","Lydia","Elsie","Kate","Susan","Mollie","Alma","Addie","Georgia","Eliza","Lulu","Nannie","Lottie","Amanda","Belle","Charlotte","Rebecca","Ruth","Viola","Olive","Amelia","Hannah","Jane","Virginia","Emily","Matilda","Irene","Kathryn","Esther","Willie","Henrietta","Ollie","Amy","Rachel","Sara","Estella","Theresa","Augusta","Ora","Pauline","Josie","Lola","Sophia","Leona","Anne","Mildred","Ann","Beulah","Callie","Lou","Delia","Eleanor","Barbara","Iva","Louisa","Maria","Mayme","Evelyn","Estelle","Nina","Betty","Marion","Bettie","Dorothy","Luella","Inez","Lela","Rosie","Allie","Millie","Janie","Cornelia","Victoria","Ruby","Winifred","Alta","Celia","Christine","Beatrice","Birdie","Harriett","Mable","Myra","Sophie","Tillie","Isabel","Sylvia","Carolyn","Isabelle","Leila","Sally","Ina","Essie","Bertie","Nell","Alberta","Katharine","Lora","Rena","Mina","Rhoda","Mathilda","Abbie","Eula","Dollie","Hettie","Eunice","Fanny","Ola","Lenora","Adelaide","Christina","Lelia","Nelle","Sue","Johanna","Lilly","Lucinda","Minerva","Lettie","Roxie","Cynthia","Helena","Hilda","Hulda","Bernice","Genevieve","Jean","Cordelia","Marian","Francis","Jeanette","Adeline","Gussie","Leah","Lois","Lura","Mittie","Hallie","Isabella","Olga","Phoebe","Teresa","Hester","Lida","Lina","Winnie","Claudia","Marguerite","Vera","Cecelia","Bess","Emilie","John","Rosetta","Verna","Myrtie","Cecilia","Elva","Olivia","Ophelia","Georgie","Elnora","Violet","Adele","Lily","Linnie","Loretta","Madge","Polly","Virgie","Eugenia","Lucile","Lucille","Mabelle","Rosalie"]},lastNames:["Smith","Johnson","Williams","Jones","Brown","Davis","Miller","Wilson","Moore","Taylor","Anderson","Thomas","Jackson","White","Harris","Martin","Thompson","Garcia","Martinez","Robinson","Clark","Rodriguez","Lewis","Lee","Walker","Hall","Allen","Young","Hernandez","King","Wright","Lopez","Hill","Scott","Green","Adams","Baker","Gonzalez","Nelson","Carter","Mitchell","Perez","Roberts","Turner","Phillips","Campbell","Parker","Evans","Edwards","Collins","Stewart","Sanchez","Morris","Rogers","Reed","Cook","Morgan","Bell","Murphy","Bailey","Rivera","Cooper","Richardson","Cox","Howard","Ward","Torres","Peterson","Gray","Ramirez","James","Watson","Brooks","Kelly","Sanders","Price","Bennett","Wood","Barnes","Ross","Henderson","Coleman","Jenkins","Perry","Powell","Long","Patterson","Hughes","Flores","Washington","Butler","Simmons","Foster","Gonzales","Bryant","Alexander","Russell","Griffin","Diaz","Hayes","Myers","Ford","Hamilton","Graham","Sullivan","Wallace","Woods","Cole","West","Jordan","Owens","Reynolds","Fisher","Ellis","Harrison","Gibson","McDonald","Cruz","Marshall","Ortiz","Gomez","Murray","Freeman","Wells","Webb","Simpson","Stevens","Tucker","Porter","Hunter","Hicks","Crawford","Henry","Boyd","Mason","Morales","Kennedy","Warren","Dixon","Ramos","Reyes","Burns","Gordon","Shaw","Holmes","Rice","Robertson","Hunt","Black","Daniels","Palmer","Mills","Nichols","Grant","Knight","Ferguson","Rose","Stone","Hawkins","Dunn","Perkins","Hudson","Spencer","Gardner","Stephens","Payne","Pierce","Berry","Matthews","Arnold","Wagner","Willis","Ray","Watkins","Olson","Carroll","Duncan","Snyder","Hart","Cunningham","Bradley","Lane","Andrews","Ruiz","Harper","Fox","Riley","Armstrong","Carpenter","Weaver","Greene","Lawrence","Elliott","Chavez","Sims","Austin","Peters","Kelley","Franklin","Lawson","Fields","Gutierrez","Ryan","Schmidt","Carr","Vasquez","Castillo","Wheeler","Chapman","Oliver","Montgomery","Richards","Williamson","Johnston","Banks","Meyer","Bishop","McCoy","Howell","Alvarez","Morrison","Hansen","Fernandez","Garza","Harvey","Little","Burton","Stanley","Nguyen","George","Jacobs","Reid","Kim","Fuller","Lynch","Dean","Gilbert","Garrett","Romero","Welch","Larson","Frazier","Burke","Hanson","Day","Mendoza","Moreno","Bowman","Medina","Fowler","Brewer","Hoffman","Carlson","Silva","Pearson","Holland","Douglas","Fleming","Jensen","Vargas","Byrd","Davidson","Hopkins","May","Terry","Herrera","Wade","Soto","Walters","Curtis","Neal","Caldwell","Lowe","Jennings","Barnett","Graves","Jimenez","Horton","Shelton","Barrett","Obrien","Castro","Sutton","Gregory","McKinney","Lucas","Miles","Craig","Rodriquez","Chambers","Holt","Lambert","Fletcher","Watts","Bates","Hale","Rhodes","Pena","Beck","Newman","Haynes","McDaniel","Mendez","Bush","Vaughn","Parks","Dawson","Santiago","Norris","Hardy","Love","Steele","Curry","Powers","Schultz","Barker","Guzman","Page","Munoz","Ball","Keller","Chandler","Weber","Leonard","Walsh","Lyons","Ramsey","Wolfe","Schneider","Mullins","Benson","Sharp","Bowen","Daniel","Barber","Cummings","Hines","Baldwin","Griffith","Valdez","Hubbard","Salazar","Reeves","Warner","Stevenson","Burgess","Santos","Tate","Cross","Garner","Mann","Mack","Moss","Thornton","Dennis","McGee","Farmer","Delgado","Aguilar","Vega","Glover","Manning","Cohen","Harmon","Rodgers","Robbins","Newton","Todd","Blair","Higgins","Ingram","Reese","Cannon","Strickland","Townsend","Potter","Goodwin","Walton","Rowe","Hampton","Ortega","Patton","Swanson","Joseph","Francis","Goodman","Maldonado","Yates","Becker","Erickson","Hodges","Rios","Conner","Adkins","Webster","Norman","Malone","Hammond","Flowers","Cobb","Moody","Quinn","Blake","Maxwell","Pope","Floyd","Osborne","Paul","McCarthy","Guerrero","Lindsey","Estrada","Sandoval","Gibbs","Tyler","Gross","Fitzgerald","Stokes","Doyle","Sherman","Saunders","Wise","Colon","Gill","Alvarado","Greer","Padilla","Simon","Waters","Nunez","Ballard","Schwartz","McBride","Houston","Christensen","Klein","Pratt","Briggs","Parsons","McLaughlin","Zimmerman","French","Buchanan","Moran","Copeland","Roy","Pittman","Brady","McCormick","Holloway","Brock","Poole","Frank","Logan","Owen","Bass","Marsh","Drake","Wong","Jefferson","Park","Morton","Abbott","Sparks","Patrick","Norton","Huff","Clayton","Massey","Lloyd","Figueroa","Carson","Bowers","Roberson","Barton","Tran","Lamb","Harrington","Casey","Boone","Cortez","Clarke","Mathis","Singleton","Wilkins","Cain","Bryan","Underwood","Hogan","McKenzie","Collier","Luna","Phelps","McGuire","Allison","Bridges","Wilkerson","Nash","Summers","Atkins"],countries:[{name:"Afghanistan",abbreviation:"AF"},{name:"Albania",abbreviation:"AL"},{name:"Algeria",abbreviation:"DZ"},{name:"American Samoa",abbreviation:"AS"},{name:"Andorra",abbreviation:"AD"},{name:"Angola",abbreviation:"AO"},{name:"Anguilla",abbreviation:"AI"},{name:"Antarctica",abbreviation:"AQ"},{name:"Antigua and Barbuda",abbreviation:"AG"},{name:"Argentina",abbreviation:"AR"},{name:"Armenia",abbreviation:"AM"},{name:"Aruba",abbreviation:"AW"},{name:"Australia",abbreviation:"AU"},{name:"Austria",abbreviation:"AT"},{name:"Azerbaijan",abbreviation:"AZ"},{name:"Bahamas",abbreviation:"BS"},{name:"Bahrain",abbreviation:"BH"},{name:"Bangladesh",abbreviation:"BD"},{name:"Barbados",abbreviation:"BB"},{name:"Belarus",abbreviation:"BY"},{name:"Belgium",abbreviation:"BE"},{name:"Belize",abbreviation:"BZ"},{name:"Benin",abbreviation:"BJ"},{name:"Bermuda",abbreviation:"BM"},{name:"Bhutan",abbreviation:"BT"},{name:"Bolivia",abbreviation:"BO"},{name:"Bosnia and Herzegovina",abbreviation:"BA"},{name:"Botswana",abbreviation:"BW"},{name:"Bouvet Island",abbreviation:"BV"},{name:"Brazil",abbreviation:"BR"},{name:"British Antarctic Territory",abbreviation:"BQ"},{name:"British Indian Ocean Territory",abbreviation:"IO"},{name:"British Virgin Islands",abbreviation:"VG"},{name:"Brunei",abbreviation:"BN"},{name:"Bulgaria",abbreviation:"BG"},{name:"Burkina Faso",abbreviation:"BF"},{name:"Burundi",abbreviation:"BI"},{name:"Cambodia",abbreviation:"KH"},{name:"Cameroon",abbreviation:"CM"},{name:"Canada",abbreviation:"CA"},{name:"Canton and Enderbury Islands",abbreviation:"CT"},{name:"Cape Verde",abbreviation:"CV"},{name:"Cayman Islands",abbreviation:"KY"},{name:"Central African Republic",abbreviation:"CF"},{name:"Chad",abbreviation:"TD"},{name:"Chile",abbreviation:"CL"},{name:"China",abbreviation:"CN"},{name:"Christmas Island",abbreviation:"CX"},{name:"Cocos [Keeling] Islands",abbreviation:"CC"},{name:"Colombia",abbreviation:"CO"},{name:"Comoros",abbreviation:"KM"},{name:"Congo - Brazzaville",abbreviation:"CG"},{name:"Congo - Kinshasa",abbreviation:"CD"},{name:"Cook Islands",abbreviation:"CK"},{name:"Costa Rica",abbreviation:"CR"},{name:"Croatia",abbreviation:"HR"},{name:"Cuba",abbreviation:"CU"},{name:"Cyprus",abbreviation:"CY"},{name:"Czech Republic",abbreviation:"CZ"},{name:"Côte d’Ivoire",abbreviation:"CI"},{name:"Denmark",abbreviation:"DK"},{name:"Djibouti",abbreviation:"DJ"},{name:"Dominica",abbreviation:"DM"},{name:"Dominican Republic",abbreviation:"DO"},{name:"Dronning Maud Land",abbreviation:"NQ"},{name:"East Germany",abbreviation:"DD"},{name:"Ecuador",abbreviation:"EC"},{name:"Egypt",abbreviation:"EG"},{name:"El Salvador",abbreviation:"SV"},{name:"Equatorial Guinea",abbreviation:"GQ"},{name:"Eritrea",abbreviation:"ER"},{name:"Estonia",abbreviation:"EE"},{name:"Ethiopia",abbreviation:"ET"},{name:"Falkland Islands",abbreviation:"FK"},{name:"Faroe Islands",abbreviation:"FO"},{name:"Fiji",abbreviation:"FJ"},{name:"Finland",abbreviation:"FI"},{name:"France",abbreviation:"FR"},{name:"French Guiana",abbreviation:"GF"},{name:"French Polynesia",abbreviation:"PF"},{name:"French Southern Territories",abbreviation:"TF"},{name:"French Southern and Antarctic Territories",abbreviation:"FQ"},{name:"Gabon",abbreviation:"GA"},{name:"Gambia",abbreviation:"GM"},{name:"Georgia",abbreviation:"GE"},{name:"Germany",abbreviation:"DE"},{name:"Ghana",abbreviation:"GH"},{name:"Gibraltar",abbreviation:"GI"},{name:"Greece",abbreviation:"GR"},{name:"Greenland",abbreviation:"GL"},{name:"Grenada",abbreviation:"GD"},{name:"Guadeloupe",abbreviation:"GP"},{name:"Guam",abbreviation:"GU"},{name:"Guatemala",abbreviation:"GT"},{name:"Guernsey",abbreviation:"GG"},{name:"Guinea",abbreviation:"GN"},{name:"Guinea-Bissau",abbreviation:"GW"},{name:"Guyana",abbreviation:"GY"},{name:"Haiti",abbreviation:"HT"},{name:"Heard Island and McDonald Islands",abbreviation:"HM"},{name:"Honduras",abbreviation:"HN"},{name:"Hong Kong SAR China",abbreviation:"HK"},{name:"Hungary",abbreviation:"HU"},{name:"Iceland",abbreviation:"IS"},{name:"India",abbreviation:"IN"},{name:"Indonesia",abbreviation:"ID"},{name:"Iran",abbreviation:"IR"},{name:"Iraq",abbreviation:"IQ"},{name:"Ireland",abbreviation:"IE"},{name:"Isle of Man",abbreviation:"IM"},{name:"Israel",abbreviation:"IL"},{name:"Italy",abbreviation:"IT"},{name:"Jamaica",abbreviation:"JM"},{name:"Japan",abbreviation:"JP"},{name:"Jersey",abbreviation:"JE"},{name:"Johnston Island",abbreviation:"JT"},{name:"Jordan",abbreviation:"JO"},{name:"Kazakhstan",abbreviation:"KZ"},{name:"Kenya",abbreviation:"KE"},{name:"Kiribati",abbreviation:"KI"},{name:"Kuwait",abbreviation:"KW"},{name:"Kyrgyzstan",abbreviation:"KG"},{name:"Laos",abbreviation:"LA"},{name:"Latvia",abbreviation:"LV"},{name:"Lebanon",abbreviation:"LB"},{name:"Lesotho",abbreviation:"LS"},{name:"Liberia",abbreviation:"LR"},{name:"Libya",abbreviation:"LY"},{name:"Liechtenstein",abbreviation:"LI"},{name:"Lithuania",abbreviation:"LT"},{name:"Luxembourg",abbreviation:"LU"},{name:"Macau SAR China",abbreviation:"MO"},{name:"Macedonia",abbreviation:"MK"},{name:"Madagascar",abbreviation:"MG"},{name:"Malawi",abbreviation:"MW"},{name:"Malaysia",abbreviation:"MY"},{name:"Maldives",abbreviation:"MV"},{name:"Mali",abbreviation:"ML"},{name:"Malta",abbreviation:"MT"},{name:"Marshall Islands",abbreviation:"MH"},{name:"Martinique",abbreviation:"MQ"},{name:"Mauritania",abbreviation:"MR"},{name:"Mauritius",abbreviation:"MU"},{name:"Mayotte",abbreviation:"YT"},{name:"Metropolitan France",abbreviation:"FX"},{name:"Mexico",abbreviation:"MX"},{name:"Micronesia",abbreviation:"FM"},{name:"Midway Islands",abbreviation:"MI"},{name:"Moldova",abbreviation:"MD"},{name:"Monaco",abbreviation:"MC"},{name:"Mongolia",abbreviation:"MN"},{name:"Montenegro",abbreviation:"ME"},{name:"Montserrat",abbreviation:"MS"},{name:"Morocco",abbreviation:"MA"},{name:"Mozambique",abbreviation:"MZ"},{name:"Myanmar [Burma]",abbreviation:"MM"},{name:"Namibia",abbreviation:"NA"},{name:"Nauru",abbreviation:"NR"},{name:"Nepal",abbreviation:"NP"},{name:"Netherlands",abbreviation:"NL"},{name:"Netherlands Antilles",abbreviation:"AN"},{name:"Neutral Zone",abbreviation:"NT"},{name:"New Caledonia",abbreviation:"NC"},{name:"New Zealand",abbreviation:"NZ"},{name:"Nicaragua",abbreviation:"NI"},{name:"Niger",abbreviation:"NE"},{name:"Nigeria",abbreviation:"NG"},{name:"Niue",abbreviation:"NU"},{name:"Norfolk Island",abbreviation:"NF"},{name:"North Korea",abbreviation:"KP"},{name:"North Vietnam",abbreviation:"VD"},{name:"Northern Mariana Islands",abbreviation:"MP"},{name:"Norway",abbreviation:"NO"},{name:"Oman",abbreviation:"OM"},{name:"Pacific Islands Trust Territory",abbreviation:"PC"},{name:"Pakistan",abbreviation:"PK"},{name:"Palau",abbreviation:"PW"},{name:"Palestinian Territories",abbreviation:"PS"},{name:"Panama",abbreviation:"PA"},{name:"Panama Canal Zone",abbreviation:"PZ"},{name:"Papua New Guinea",abbreviation:"PG"},{name:"Paraguay",abbreviation:"PY"},{name:"People's Democratic Republic of Yemen",abbreviation:"YD"},{name:"Peru",abbreviation:"PE"},{name:"Philippines",abbreviation:"PH"},{name:"Pitcairn Islands",abbreviation:"PN"},{name:"Poland",abbreviation:"PL"},{name:"Portugal",abbreviation:"PT"},{name:"Puerto Rico",abbreviation:"PR"},{name:"Qatar",abbreviation:"QA"},{name:"Romania",abbreviation:"RO"},{name:"Russia",abbreviation:"RU"},{name:"Rwanda",abbreviation:"RW"},{name:"Réunion",abbreviation:"RE"},{name:"Saint Barthélemy",abbreviation:"BL"},{name:"Saint Helena",abbreviation:"SH"},{name:"Saint Kitts and Nevis",abbreviation:"KN"},{name:"Saint Lucia",abbreviation:"LC"},{name:"Saint Martin",abbreviation:"MF"},{name:"Saint Pierre and Miquelon",abbreviation:"PM"},{name:"Saint Vincent and the Grenadines",abbreviation:"VC"},{name:"Samoa",abbreviation:"WS"},{name:"San Marino",abbreviation:"SM"},{name:"Saudi Arabia",abbreviation:"SA"},{name:"Senegal",abbreviation:"SN"},{name:"Serbia",abbreviation:"RS"},{name:"Serbia and Montenegro",abbreviation:"CS"},{name:"Seychelles",abbreviation:"SC"},{name:"Sierra Leone",abbreviation:"SL"},{name:"Singapore",abbreviation:"SG"},{name:"Slovakia",abbreviation:"SK"},{name:"Slovenia",abbreviation:"SI"},{name:"Solomon Islands",abbreviation:"SB"},{name:"Somalia",abbreviation:"SO"},{name:"South Africa",abbreviation:"ZA"},{name:"South Georgia and the South Sandwich Islands",abbreviation:"GS"},{name:"South Korea",abbreviation:"KR"},{name:"Spain",abbreviation:"ES"},{name:"Sri Lanka",abbreviation:"LK"},{name:"Sudan",abbreviation:"SD"},{name:"Suriname",abbreviation:"SR"},{name:"Svalbard and Jan Mayen",abbreviation:"SJ"},{name:"Swaziland",abbreviation:"SZ"},{name:"Sweden",abbreviation:"SE"},{name:"Switzerland",abbreviation:"CH"},{name:"Syria",abbreviation:"SY"},{name:"São Tomé and Príncipe",abbreviation:"ST"},{name:"Taiwan",abbreviation:"TW"},{name:"Tajikistan",abbreviation:"TJ"},{name:"Tanzania",abbreviation:"TZ"},{name:"Thailand",abbreviation:"TH"},{name:"Timor-Leste",abbreviation:"TL"},{name:"Togo",abbreviation:"TG"},{name:"Tokelau",abbreviation:"TK"},{name:"Tonga",abbreviation:"TO"},{name:"Trinidad and Tobago",abbreviation:"TT"},{name:"Tunisia",abbreviation:"TN"},{name:"Turkey",abbreviation:"TR"},{name:"Turkmenistan",abbreviation:"TM"},{name:"Turks and Caicos Islands",abbreviation:"TC"},{name:"Tuvalu",abbreviation:"TV"},{name:"U.S. Minor Outlying Islands",abbreviation:"UM"},{name:"U.S. Miscellaneous Pacific Islands",abbreviation:"PU"},{name:"U.S. Virgin Islands",abbreviation:"VI"},{name:"Uganda",abbreviation:"UG"},{name:"Ukraine",abbreviation:"UA"},{name:"Union of Soviet Socialist Republics",abbreviation:"SU"},{name:"United Arab Emirates",abbreviation:"AE"},{name:"United Kingdom",abbreviation:"GB"},{name:"United States",abbreviation:"US"},{name:"Unknown or Invalid Region",abbreviation:"ZZ"},{name:"Uruguay",abbreviation:"UY"},{name:"Uzbekistan",abbreviation:"UZ"},{name:"Vanuatu",abbreviation:"VU"},{name:"Vatican City",abbreviation:"VA"},{name:"Venezuela",abbreviation:"VE"},{name:"Vietnam",abbreviation:"VN"},{name:"Wake Island",abbreviation:"WK"},{name:"Wallis and Futuna",abbreviation:"WF"},{name:"Western Sahara",abbreviation:"EH"},{name:"Yemen",abbreviation:"YE"},{name:"Zambia",abbreviation:"ZM"},{name:"Zimbabwe",abbreviation:"ZW"},{name:"Åland Islands",abbreviation:"AX"}],provinces:[{name:"Alberta",abbreviation:"AB"},{name:"British Columbia",abbreviation:"BC"},{name:"Manitoba",abbreviation:"MB"},{name:"New Brunswick",abbreviation:"NB"},{name:"Newfoundland and Labrador",abbreviation:"NL"},{name:"Nova Scotia",abbreviation:"NS"},{name:"Ontario",abbreviation:"ON"},{name:"Prince Edward Island",abbreviation:"PE"},{name:"Quebec",abbreviation:"QC"},{name:"Saskatchewan",abbreviation:"SK"},{name:"Northwest Territories",abbreviation:"NT"},{name:"Nunavut",abbreviation:"NU"},{name:"Yukon",abbreviation:"YT"}],us_states_and_dc:[{name:"Alabama",abbreviation:"AL"},{name:"Alaska",abbreviation:"AK"},{name:"Arizona",abbreviation:"AZ"},{name:"Arkansas",abbreviation:"AR"},{name:"California",abbreviation:"CA"},{name:"Colorado",abbreviation:"CO"},{name:"Connecticut",abbreviation:"CT"},{name:"Delaware",abbreviation:"DE"},{name:"District of Columbia",abbreviation:"DC"},{name:"Florida",abbreviation:"FL"},{name:"Georgia",abbreviation:"GA"},{name:"Hawaii",abbreviation:"HI"},{name:"Idaho",abbreviation:"ID"},{name:"Illinois",abbreviation:"IL"},{name:"Indiana",abbreviation:"IN"},{name:"Iowa",abbreviation:"IA"},{name:"Kansas",abbreviation:"KS"},{name:"Kentucky",abbreviation:"KY"},{name:"Louisiana",abbreviation:"LA"},{name:"Maine",abbreviation:"ME"},{name:"Maryland",abbreviation:"MD"},{name:"Massachusetts",abbreviation:"MA"},{name:"Michigan",abbreviation:"MI"},{name:"Minnesota",abbreviation:"MN"},{name:"Mississippi",abbreviation:"MS"},{name:"Missouri",abbreviation:"MO"},{name:"Montana",abbreviation:"MT"},{name:"Nebraska",abbreviation:"NE"},{name:"Nevada",abbreviation:"NV"},{name:"New Hampshire",abbreviation:"NH"},{name:"New Jersey",abbreviation:"NJ"},{name:"New Mexico",abbreviation:"NM"},{name:"New York",abbreviation:"NY"},{name:"North Carolina",abbreviation:"NC"},{name:"North Dakota",abbreviation:"ND"},{name:"Ohio",abbreviation:"OH"},{name:"Oklahoma",abbreviation:"OK"},{name:"Oregon",abbreviation:"OR"},{name:"Pennsylvania",abbreviation:"PA"},{name:"Rhode Island",abbreviation:"RI"},{name:"South Carolina",abbreviation:"SC"},{name:"South Dakota",abbreviation:"SD"},{name:"Tennessee",abbreviation:"TN"},{name:"Texas",abbreviation:"TX"},{name:"Utah",abbreviation:"UT"},{name:"Vermont",abbreviation:"VT"},{name:"Virginia",abbreviation:"VA"},{name:"Washington",abbreviation:"WA"},{name:"West Virginia",abbreviation:"WV"},{name:"Wisconsin",abbreviation:"WI"},{name:"Wyoming",abbreviation:"WY"}],territories:[{name:"American Samoa",abbreviation:"AS"},{name:"Federated States of Micronesia",abbreviation:"FM"},{name:"Guam",abbreviation:"GU"},{name:"Marshall Islands",abbreviation:"MH"},{name:"Northern Mariana Islands",abbreviation:"MP"},{name:"Puerto Rico",abbreviation:"PR"},{name:"Virgin Islands, U.S.",abbreviation:"VI"}],armed_forces:[{name:"Armed Forces Europe",abbreviation:"AE"},{name:"Armed Forces Pacific",abbreviation:"AP"},{name:"Armed Forces the Americas",abbreviation:"AA"}],street_suffixes:[{name:"Avenue",abbreviation:"Ave"},{name:"Boulevard",abbreviation:"Blvd"},{name:"Center",abbreviation:"Ctr"},{name:"Circle",abbreviation:"Cir"},{name:"Court",abbreviation:"Ct"},{name:"Drive",abbreviation:"Dr"},{name:"Extension",abbreviation:"Ext"},{name:"Glen",abbreviation:"Gln"},{name:"Grove",abbreviation:"Grv"},{name:"Heights",abbreviation:"Hts"},{name:"Highway",abbreviation:"Hwy"},{name:"Junction",abbreviation:"Jct"},{name:"Key",abbreviation:"Key"},{name:"Lane",abbreviation:"Ln"},{name:"Loop",abbreviation:"Loop"},{name:"Manor",abbreviation:"Mnr"},{name:"Mill",abbreviation:"Mill"},{name:"Park",abbreviation:"Park"},{name:"Parkway",abbreviation:"Pkwy"},{name:"Pass",abbreviation:"Pass"},{name:"Path",abbreviation:"Path"},{name:"Pike",abbreviation:"Pike"},{name:"Place",abbreviation:"Pl"},{name:"Plaza",abbreviation:"Plz"},{name:"Point",abbreviation:"Pt"},{name:"Ridge",abbreviation:"Rdg"},{name:"River",abbreviation:"Riv"},{name:"Road",abbreviation:"Rd"},{name:"Square",abbreviation:"Sq"},{name:"Street",abbreviation:"St"},{name:"Terrace",abbreviation:"Ter"},{name:"Trail",abbreviation:"Trl"},{name:"Turnpike",abbreviation:"Tpke"},{name:"View",abbreviation:"Vw"},{name:"Way",abbreviation:"Way"}],months:[{name:"January",short_name:"Jan",numeric:"01",days:31},{name:"February",short_name:"Feb",numeric:"02",days:28},{name:"March",short_name:"Mar",numeric:"03",days:31},{name:"April",short_name:"Apr",numeric:"04",days:30},{name:"May",short_name:"May",numeric:"05",days:31},{name:"June",short_name:"Jun",numeric:"06",days:30},{name:"July",short_name:"Jul",numeric:"07",days:31},{name:"August",short_name:"Aug",numeric:"08",days:31},{name:"September",short_name:"Sep",numeric:"09",days:30},{name:"October",short_name:"Oct",numeric:"10",days:31},{name:"November",short_name:"Nov",numeric:"11",days:30},{name:"December",short_name:"Dec",numeric:"12",days:31}],cc_types:[{name:"American Express",short_name:"amex",prefix:"34",length:15},{name:"Bankcard",short_name:"bankcard",prefix:"5610",length:16},{name:"China UnionPay",short_name:"chinaunion",prefix:"62",length:16},{name:"Diners Club Carte Blanche",short_name:"dccarte",prefix:"300",length:14},{name:"Diners Club enRoute",short_name:"dcenroute",prefix:"2014",length:15},{name:"Diners Club International",short_name:"dcintl",prefix:"36",length:14},{name:"Diners Club United States & Canada",short_name:"dcusc",prefix:"54",length:16},{name:"Discover Card",short_name:"discover",prefix:"6011",length:16},{name:"InstaPayment",short_name:"instapay",prefix:"637",length:16},{name:"JCB",short_name:"jcb",prefix:"3528",length:16},{name:"Laser",short_name:"laser",prefix:"6304",length:16},{name:"Maestro",short_name:"maestro",prefix:"5018",length:16},{name:"Mastercard",short_name:"mc",prefix:"51",length:16},{name:"Solo",short_name:"solo",prefix:"6334",length:16},{name:"Switch",short_name:"switch",prefix:"4903",length:16},{name:"Visa",short_name:"visa",prefix:"4",length:16},{name:"Visa Electron",short_name:"electron",prefix:"4026",length:16}],currency_types:[{code:"AED",name:"United Arab Emirates Dirham"},{code:"AFN",name:"Afghanistan Afghani"},{code:"ALL",name:"Albania Lek"},{code:"AMD",name:"Armenia Dram"},{code:"ANG",name:"Netherlands Antilles Guilder"},{code:"AOA",name:"Angola Kwanza"},{code:"ARS",name:"Argentina Peso"},{code:"AUD",name:"Australia Dollar"},{code:"AWG",name:"Aruba Guilder"},{code:"AZN",name:"Azerbaijan New Manat"},{code:"BAM",name:"Bosnia and Herzegovina Convertible Marka"},{code:"BBD",name:"Barbados Dollar"},{code:"BDT",name:"Bangladesh Taka"},{code:"BGN",name:"Bulgaria Lev"},{code:"BHD",name:"Bahrain Dinar"},{code:"BIF",name:"Burundi Franc"},{code:"BMD",name:"Bermuda Dollar"},{code:"BND",name:"Brunei Darussalam Dollar"},{code:"BOB",name:"Bolivia Boliviano"},{code:"BRL",name:"Brazil Real"},{code:"BSD",name:"Bahamas Dollar"},{code:"BTN",name:"Bhutan Ngultrum"},{code:"BWP",name:"Botswana Pula"},{code:"BYR",name:"Belarus Ruble"},{code:"BZD",name:"Belize Dollar"},{code:"CAD",name:"Canada Dollar"},{code:"CDF",name:"Congo/Kinshasa Franc"},{code:"CHF",name:"Switzerland Franc"},{code:"CLP",name:"Chile Peso"},{code:"CNY",name:"China Yuan Renminbi"},{code:"COP",name:"Colombia Peso"},{code:"CRC",name:"Costa Rica Colon"},{code:"CUC",name:"Cuba Convertible Peso"},{code:"CUP",name:"Cuba Peso"},{code:"CVE",name:"Cape Verde Escudo"},{code:"CZK",name:"Czech Republic Koruna"},{code:"DJF",name:"Djibouti Franc"},{code:"DKK",name:"Denmark Krone"},{code:"DOP",name:"Dominican Republic Peso"},{code:"DZD",name:"Algeria Dinar"},{code:"EGP",name:"Egypt Pound"},{code:"ERN",name:"Eritrea Nakfa"},{code:"ETB",name:"Ethiopia Birr"},{code:"EUR",name:"Euro Member Countries"},{code:"FJD",name:"Fiji Dollar"},{code:"FKP",name:"Falkland Islands (Malvinas) Pound"},{code:"GBP",name:"United Kingdom Pound"},{code:"GEL",name:"Georgia Lari"},{code:"GGP",name:"Guernsey Pound"},{code:"GHS",name:"Ghana Cedi"},{code:"GIP",name:"Gibraltar Pound"},{code:"GMD",name:"Gambia Dalasi"},{code:"GNF",name:"Guinea Franc"},{code:"GTQ",name:"Guatemala Quetzal"},{code:"GYD",name:"Guyana Dollar"},{code:"HKD",name:"Hong Kong Dollar"},{code:"HNL",name:"Honduras Lempira"},{code:"HRK",name:"Croatia Kuna"},{code:"HTG",name:"Haiti Gourde"},{code:"HUF",name:"Hungary Forint"},{code:"IDR",name:"Indonesia Rupiah"},{code:"ILS",name:"Israel Shekel"},{code:"IMP",name:"Isle of Man Pound"},{code:"INR",name:"India Rupee"},{code:"IQD",name:"Iraq Dinar"},{code:"IRR",name:"Iran Rial"},{code:"ISK",name:"Iceland Krona"},{code:"JEP",name:"Jersey Pound"},{code:"JMD",name:"Jamaica Dollar"},{code:"JOD",name:"Jordan Dinar"},{code:"JPY",name:"Japan Yen"},{code:"KES",name:"Kenya Shilling"},{code:"KGS",name:"Kyrgyzstan Som"},{code:"KHR",name:"Cambodia Riel"},{code:"KMF",name:"Comoros Franc"},{code:"KPW",name:"Korea (North) Won"},{code:"KRW",name:"Korea (South) Won"},{code:"KWD",name:"Kuwait Dinar"},{code:"KYD",name:"Cayman Islands Dollar"},{code:"KZT",name:"Kazakhstan Tenge"},{code:"LAK",name:"Laos Kip"},{code:"LBP",name:"Lebanon Pound"},{code:"LKR",name:"Sri Lanka Rupee"},{code:"LRD",name:"Liberia Dollar"},{code:"LSL",name:"Lesotho Loti"},{code:"LTL",name:"Lithuania Litas"},{code:"LYD",name:"Libya Dinar"},{code:"MAD",name:"Morocco Dirham"},{code:"MDL",name:"Moldova Leu"},{code:"MGA",name:"Madagascar Ariary"},{code:"MKD",name:"Macedonia Denar"},{code:"MMK",name:"Myanmar (Burma) Kyat"},{code:"MNT",name:"Mongolia Tughrik"},{code:"MOP",name:"Macau Pataca"},{code:"MRO",name:"Mauritania Ouguiya"},{code:"MUR",name:"Mauritius Rupee"},{code:"MVR",name:"Maldives (Maldive Islands) Rufiyaa"},{code:"MWK",name:"Malawi Kwacha"},{code:"MXN",name:"Mexico Peso"},{code:"MYR",name:"Malaysia Ringgit"},{code:"MZN",name:"Mozambique Metical"},{code:"NAD",name:"Namibia Dollar"},{code:"NGN",name:"Nigeria Naira"},{code:"NIO",name:"Nicaragua Cordoba"},{code:"NOK",name:"Norway Krone"},{code:"NPR",name:"Nepal Rupee"},{code:"NZD",name:"New Zealand Dollar"},{code:"OMR",name:"Oman Rial"},{code:"PAB",name:"Panama Balboa"},{code:"PEN",name:"Peru Nuevo Sol"},{code:"PGK",name:"Papua New Guinea Kina"},{code:"PHP",name:"Philippines Peso"},{code:"PKR",name:"Pakistan Rupee"},{code:"PLN",name:"Poland Zloty"},{code:"PYG",name:"Paraguay Guarani"},{code:"QAR",name:"Qatar Riyal"},{code:"RON",name:"Romania New Leu"},{code:"RSD",name:"Serbia Dinar"},{code:"RUB",name:"Russia Ruble"},{code:"RWF",name:"Rwanda Franc"},{code:"SAR",name:"Saudi Arabia Riyal"},{code:"SBD",name:"Solomon Islands Dollar"},{code:"SCR",name:"Seychelles Rupee"},{code:"SDG",name:"Sudan Pound"},{code:"SEK",name:"Sweden Krona"},{code:"SGD",name:"Singapore Dollar"},{code:"SHP",name:"Saint Helena Pound"},{code:"SLL",name:"Sierra Leone Leone"},{code:"SOS",name:"Somalia Shilling"},{code:"SPL",name:"Seborga Luigino"},{code:"SRD",name:"Suriname Dollar"},{code:"STD",name:"São Tomé and Príncipe Dobra"},{code:"SVC",name:"El Salvador Colon"},{code:"SYP",name:"Syria Pound"},{code:"SZL",name:"Swaziland Lilangeni"},{code:"THB",name:"Thailand Baht"},{code:"TJS",name:"Tajikistan Somoni"},{code:"TMT",name:"Turkmenistan Manat"},{code:"TND",name:"Tunisia Dinar"},{code:"TOP",name:"Tonga Pa'anga"},{code:"TRY",name:"Turkey Lira"},{code:"TTD",name:"Trinidad and Tobago Dollar"},{code:"TVD",name:"Tuvalu Dollar"},{code:"TWD",name:"Taiwan New Dollar"},{code:"TZS",name:"Tanzania Shilling"},{code:"UAH",name:"Ukraine Hryvnia"},{code:"UGX",name:"Uganda Shilling"},{code:"USD",name:"United States Dollar"},{code:"UYU",name:"Uruguay Peso"},{code:"UZS",name:"Uzbekistan Som"},{code:"VEF",name:"Venezuela Bolivar"},{code:"VND",name:"Viet Nam Dong"},{code:"VUV",name:"Vanuatu Vatu"},{code:"WST",name:"Samoa Tala"},{code:"XAF",name:"Communauté Financière Africaine (BEAC) CFA Franc BEAC"},{code:"XCD",name:"East Caribbean Dollar"},{code:"XDR",name:"International Monetary Fund (IMF) Special Drawing Rights"},{code:"XOF",name:"Communauté Financière Africaine (BCEAO) Franc"},{code:"XPF",name:"Comptoirs Français du Pacifique (CFP) Franc"},{code:"YER",name:"Yemen Rial"},{code:"ZAR",name:"South Africa Rand"},{code:"ZMW",name:"Zambia Kwacha"},{code:"ZWD",name:"Zimbabwe Dollar"}]},b=Object.prototype.hasOwnProperty,y=Object.keys||function(e){var t=[];for(var n in e)b.call(e,n)&&t.push(n);return t};function v(e,t){var n=Array.isArray(e),i=t||(n?new Array(e.length):{});return n?function(e,t){for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}(e,i):function(e,t){for(var n,i=y(e),a=0,r=i.length;a<r;a++)t[n=i[a]]=e[n]||t[n]}(e,i),i}h.prototype.get=function(e){return v(g[e])},h.prototype.mac_address=function(e){(e=d(e)).separator||(e.separator=e.networkVersion?".":":");var t="ABCDEF1234567890";return e.networkVersion?this.n(this.string,3,{pool:t,length:4}).join(e.separator):this.n(this.string,6,{pool:t,length:2}).join(e.separator)},h.prototype.normal=function(e){var t,n,i,a=(e=d(e,{mean:0,dev:1})).mean,r=e.dev;do{t=(n=2*this.random()-1)*n+(i=2*this.random()-1)*i}while(t>=1);return r*(n*Math.sqrt(-2*Math.log(t)/t))+a},h.prototype.radio=function(e){var t="";switch((e=d(e,{side:"?"})).side.toLowerCase()){case"east":case"e":t="W";break;case"west":case"w":t="K";break;default:t=this.character({pool:"KW"})}return t+this.character({alpha:!0,casing:"upper"})+this.character({alpha:!0,casing:"upper"})+this.character({alpha:!0,casing:"upper"})},h.prototype.set=function(e,t){"string"==typeof e?g[e]=t:g=v(e,g)},h.prototype.tv=function(e){return this.radio(e)},h.prototype.cnpj=function(){var e=this.n(this.natural,8,{max:9}),t=2+6*e[7]+7*e[6]+8*e[5]+9*e[4]+2*e[3]+3*e[2]+4*e[1]+5*e[0];(t=11-t%11)>=10&&(t=0);var n=2*t+3+7*e[7]+8*e[6]+9*e[5]+2*e[4]+3*e[3]+4*e[2]+5*e[1]+6*e[0];return(n=11-n%11)>=10&&(n=0),""+e[0]+e[1]+"."+e[2]+e[3]+e[4]+"."+e[5]+e[6]+e[7]+"/0001-"+t+n},h.prototype.mersenne_twister=function(e){return new w(e)},h.prototype.blueimp_md5=function(){return new x};var w=function(e){void 0===e&&(e=Math.floor(Math.random()*Math.pow(10,13))),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,this.init_genrand(e)};w.prototype.init_genrand=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++)e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30,this.mt[this.mti]=(1812433253*((4294901760&e)>>>16)<<16)+1812433253*(65535&e)+this.mti,this.mt[this.mti]>>>=0},w.prototype.init_by_array=function(e,t){var n,i,a=1,r=0;for(this.init_genrand(19650218),n=this.N>t?this.N:t;n;n--)i=this.mt[a-1]^this.mt[a-1]>>>30,this.mt[a]=(this.mt[a]^(1664525*((4294901760&i)>>>16)<<16)+1664525*(65535&i))+e[r]+r,this.mt[a]>>>=0,r++,++a>=this.N&&(this.mt[0]=this.mt[this.N-1],a=1),r>=t&&(r=0);for(n=this.N-1;n;n--)i=this.mt[a-1]^this.mt[a-1]>>>30,this.mt[a]=(this.mt[a]^(1566083941*((4294901760&i)>>>16)<<16)+1566083941*(65535&i))-a,this.mt[a]>>>=0,++a>=this.N&&(this.mt[0]=this.mt[this.N-1],a=1);this.mt[0]=2147483648},w.prototype.genrand_int32=function(){var e,t=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var n;for(this.mti===this.N+1&&this.init_genrand(5489),n=0;n<this.N-this.M;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+this.M]^e>>>1^t[1&e];for(;n<this.N-1;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+(this.M-this.N)]^e>>>1^t[1&e];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^t[1&e],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,(e^=e>>>18)>>>0},w.prototype.genrand_int31=function(){return this.genrand_int32()>>>1},w.prototype.genrand_real1=function(){return this.genrand_int32()*(1/4294967295)},w.prototype.random=function(){return this.genrand_int32()*(1/4294967296)},w.prototype.genrand_real3=function(){return(this.genrand_int32()+.5)*(1/4294967296)},w.prototype.genrand_res53=function(){return(67108864*(this.genrand_int32()>>>5)+(this.genrand_int32()>>>6))*(1/9007199254740992)};var x=function(){};x.prototype.VERSION="1.0.1",x.prototype.safe_add=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},x.prototype.bit_roll=function(e,t){return e<<t|e>>>32-t},x.prototype.md5_cmn=function(e,t,n,i,a,r){return this.safe_add(this.bit_roll(this.safe_add(this.safe_add(t,e),this.safe_add(i,r)),a),n)},x.prototype.md5_ff=function(e,t,n,i,a,r,o){return this.md5_cmn(t&n|~t&i,e,t,a,r,o)},x.prototype.md5_gg=function(e,t,n,i,a,r,o){return this.md5_cmn(t&i|n&~i,e,t,a,r,o)},x.prototype.md5_hh=function(e,t,n,i,a,r,o){return this.md5_cmn(t^n^i,e,t,a,r,o)},x.prototype.md5_ii=function(e,t,n,i,a,r,o){return this.md5_cmn(n^(t|~i),e,t,a,r,o)},x.prototype.binl_md5=function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var n,i,a,r,o,s=1732584193,l=-271733879,u=-1732584194,c=271733878;for(n=0;n<e.length;n+=16)i=s,a=l,r=u,o=c,s=this.md5_ff(s,l,u,c,e[n],7,-680876936),c=this.md5_ff(c,s,l,u,e[n+1],12,-389564586),u=this.md5_ff(u,c,s,l,e[n+2],17,606105819),l=this.md5_ff(l,u,c,s,e[n+3],22,-1044525330),s=this.md5_ff(s,l,u,c,e[n+4],7,-176418897),c=this.md5_ff(c,s,l,u,e[n+5],12,1200080426),u=this.md5_ff(u,c,s,l,e[n+6],17,-1473231341),l=this.md5_ff(l,u,c,s,e[n+7],22,-45705983),s=this.md5_ff(s,l,u,c,e[n+8],7,1770035416),c=this.md5_ff(c,s,l,u,e[n+9],12,-1958414417),u=this.md5_ff(u,c,s,l,e[n+10],17,-42063),l=this.md5_ff(l,u,c,s,e[n+11],22,-1990404162),s=this.md5_ff(s,l,u,c,e[n+12],7,1804603682),c=this.md5_ff(c,s,l,u,e[n+13],12,-40341101),u=this.md5_ff(u,c,s,l,e[n+14],17,-1502002290),l=this.md5_ff(l,u,c,s,e[n+15],22,1236535329),s=this.md5_gg(s,l,u,c,e[n+1],5,-165796510),c=this.md5_gg(c,s,l,u,e[n+6],9,-1069501632),u=this.md5_gg(u,c,s,l,e[n+11],14,643717713),l=this.md5_gg(l,u,c,s,e[n],20,-373897302),s=this.md5_gg(s,l,u,c,e[n+5],5,-701558691),c=this.md5_gg(c,s,l,u,e[n+10],9,38016083),u=this.md5_gg(u,c,s,l,e[n+15],14,-660478335),l=this.md5_gg(l,u,c,s,e[n+4],20,-405537848),s=this.md5_gg(s,l,u,c,e[n+9],5,568446438),c=this.md5_gg(c,s,l,u,e[n+14],9,-1019803690),u=this.md5_gg(u,c,s,l,e[n+3],14,-187363961),l=this.md5_gg(l,u,c,s,e[n+8],20,1163531501),s=this.md5_gg(s,l,u,c,e[n+13],5,-1444681467),c=this.md5_gg(c,s,l,u,e[n+2],9,-51403784),u=this.md5_gg(u,c,s,l,e[n+7],14,1735328473),l=this.md5_gg(l,u,c,s,e[n+12],20,-1926607734),s=this.md5_hh(s,l,u,c,e[n+5],4,-378558),c=this.md5_hh(c,s,l,u,e[n+8],11,-2022574463),u=this.md5_hh(u,c,s,l,e[n+11],16,1839030562),l=this.md5_hh(l,u,c,s,e[n+14],23,-35309556),s=this.md5_hh(s,l,u,c,e[n+1],4,-1530992060),c=this.md5_hh(c,s,l,u,e[n+4],11,1272893353),u=this.md5_hh(u,c,s,l,e[n+7],16,-155497632),l=this.md5_hh(l,u,c,s,e[n+10],23,-1094730640),s=this.md5_hh(s,l,u,c,e[n+13],4,681279174),c=this.md5_hh(c,s,l,u,e[n],11,-358537222),u=this.md5_hh(u,c,s,l,e[n+3],16,-722521979),l=this.md5_hh(l,u,c,s,e[n+6],23,76029189),s=this.md5_hh(s,l,u,c,e[n+9],4,-640364487),c=this.md5_hh(c,s,l,u,e[n+12],11,-421815835),u=this.md5_hh(u,c,s,l,e[n+15],16,530742520),l=this.md5_hh(l,u,c,s,e[n+2],23,-995338651),s=this.md5_ii(s,l,u,c,e[n],6,-198630844),c=this.md5_ii(c,s,l,u,e[n+7],10,1126891415),u=this.md5_ii(u,c,s,l,e[n+14],15,-1416354905),l=this.md5_ii(l,u,c,s,e[n+5],21,-57434055),s=this.md5_ii(s,l,u,c,e[n+12],6,1700485571),c=this.md5_ii(c,s,l,u,e[n+3],10,-1894986606),u=this.md5_ii(u,c,s,l,e[n+10],15,-1051523),l=this.md5_ii(l,u,c,s,e[n+1],21,-2054922799),s=this.md5_ii(s,l,u,c,e[n+8],6,1873313359),c=this.md5_ii(c,s,l,u,e[n+15],10,-30611744),u=this.md5_ii(u,c,s,l,e[n+6],15,-1560198380),l=this.md5_ii(l,u,c,s,e[n+13],21,1309151649),s=this.md5_ii(s,l,u,c,e[n+4],6,-145523070),c=this.md5_ii(c,s,l,u,e[n+11],10,-1120210379),u=this.md5_ii(u,c,s,l,e[n+2],15,718787259),l=this.md5_ii(l,u,c,s,e[n+9],21,-343485551),s=this.safe_add(s,i),l=this.safe_add(l,a),u=this.safe_add(u,r),c=this.safe_add(c,o);return[s,l,u,c]},x.prototype.binl2rstr=function(e){var t,n="";for(t=0;t<32*e.length;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n},x.prototype.rstr2binl=function(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n},x.prototype.rstr_md5=function(e){return this.binl2rstr(this.binl_md5(this.rstr2binl(e),8*e.length))},x.prototype.rstr_hmac_md5=function(e,t){var n,i,a=this.rstr2binl(e),r=[],o=[];for(r[15]=o[15]=void 0,a.length>16&&(a=this.binl_md5(a,8*e.length)),n=0;n<16;n+=1)r[n]=909522486^a[n],o[n]=1549556828^a[n];return i=this.binl_md5(r.concat(this.rstr2binl(t)),512+8*t.length),this.binl2rstr(this.binl_md5(o.concat(i),640))},x.prototype.rstr2hex=function(e){var t,n,i="0123456789abcdef",a="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),a+=i.charAt(t>>>4&15)+i.charAt(15&t);return a},x.prototype.str2rstr_utf8=function(e){return unescape(encodeURIComponent(e))},x.prototype.raw_md5=function(e){return this.rstr_md5(this.str2rstr_utf8(e))},x.prototype.hex_md5=function(e){return this.rstr2hex(this.raw_md5(e))},x.prototype.raw_hmac_md5=function(e,t){return this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t))},x.prototype.hex_hmac_md5=function(e,t){return this.rstr2hex(this.raw_hmac_md5(e,t))},x.prototype.md5=function(e,t,n){return t?n?this.raw_hmac_md5(t,e):this.hex_hmac_md5(t,e):n?this.raw_md5(e):this.hex_md5(e)},e.exports&&(t=e.exports=h),t.Chance=h,void 0===(n=function(){return h}.apply(t,[]))||(e.exports=n),"undefined"!=typeof importScripts&&(chance=new h),"object"===("undefined"==typeof window?"undefined":i(window))&&"object"===i(window.document)&&(window.Chance=h,window.chance=new h)}()},"./client/js/util/colorconversions.js":function(e,t){var n,i;void 0===(i="function"==typeof(n=function(){return{rgb2hsl:e,rgb2hsv:t,rgb2hwb:n,rgb2cmyk:i,rgb2keyword:a,rgb2xyz:o,rgb2lab:s,rgb2lch:function(e){return p(s(e))},hsl2rgb:l,hsl2hsv:function(e){var t=e[0],n=e[1]/100,i=e[2]/100;return[t,2*(n*=(i*=2)<=1?i:2-i)/(i+n)*100,(i+n)/2*100]},hsl2hwb:function(e){return n(l(e))},hsl2cmyk:function(e){return i(l(e))},hsl2keyword:function(e){return a(l(e))},hsv2rgb:u,hsv2hsl:function(e){var t,n,i=e[0],a=e[1]/100,r=e[2]/100;return t=a*r,[i,100*(t=(t/=(n=(2-a)*r)<=1?n:2-n)||0),100*(n/=2)]},hsv2hwb:function(e){return n(u(e))},hsv2cmyk:function(e){return i(u(e))},hsv2keyword:function(e){return a(u(e))},hwb2rgb:c,hwb2hsl:function(t){return e(c(t))},hwb2hsv:function(e){return t(c(e))},hwb2cmyk:function(e){return i(c(e))},hwb2keyword:function(e){return a(c(e))},cmyk2rgb:h,cmyk2hsl:function(t){return e(h(t))},cmyk2hsv:function(e){return t(h(e))},cmyk2hwb:function(e){return n(h(e))},cmyk2keyword:function(e){return a(h(e))},keyword2rgb:w,keyword2hsl:function(t){return e(w(t))},keyword2hsv:function(e){return t(w(e))},keyword2hwb:function(e){return n(w(e))},keyword2cmyk:function(e){return i(w(e))},keyword2lab:function(e){return s(w(e))},keyword2xyz:function(e){return o(w(e))},xyz2rgb:d,xyz2lab:m,xyz2lch:function(e){return p(m(e))},lab2xyz:f,lab2rgb:y,lab2lch:p,lch2lab:v,lch2xyz:function(e){return f(v(e))},lch2rgb:function(e){return y(v(e))}};function e(e){var t,n,i=e[0]/255,a=e[1]/255,r=e[2]/255,o=Math.min(i,a,r),s=Math.max(i,a,r),l=s-o;return s==o?t=0:i==s?t=(a-r)/l:a==s?t=2+(r-i)/l:r==s&&(t=4+(i-a)/l),(t=Math.min(60*t,360))<0&&(t+=360),n=(o+s)/2,[t,100*(s==o?0:n<=.5?l/(s+o):l/(2-s-o)),100*n]}function t(e){var t,n,i=e[0],a=e[1],r=e[2],o=Math.min(i,a,r),s=Math.max(i,a,r),l=s-o;return n=0==s?0:l/s*1e3/10,s==o?t=0:i==s?t=(a-r)/l:a==s?t=2+(r-i)/l:r==s&&(t=4+(i-a)/l),(t=Math.min(60*t,360))<0&&(t+=360),[t,n,s/255*1e3/10]}function n(t){var n=t[0],i=t[1],a=t[2];return[e(t)[0],1/255*Math.min(n,Math.min(i,a))*100,100*(a=1-1/255*Math.max(n,Math.max(i,a)))]}function i(e){var t,n=e[0]/255,i=e[1]/255,a=e[2]/255;return[100*((1-n-(t=Math.min(1-n,1-i,1-a)))/(1-t)||0),100*((1-i-t)/(1-t)||0),100*((1-a-t)/(1-t)||0),100*t]}function a(e){return M[JSON.stringify(e)]}function o(e){var t=e[0]/255,n=e[1]/255,i=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)),100*(.2126*t+.7152*n+.0722*i),100*(.0193*t+.1192*n+.9505*i)]}function s(e){var t=o(e),n=t[0],i=t[1],a=t[2];return i/=100,a/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(n-i),200*(i-(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116))]}function l(e){var t,n,i,a,r,o=e[0]/360,s=e[1]/100,l=e[2]/100;if(0==s)return[r=255*l,r,r];t=2*l-(n=l<.5?l*(1+s):l+s-l*s),a=[0,0,0];for(var u=0;u<3;u++)(i=o+1/3*-(u-1))<0&&i++,i>1&&i--,r=6*i<1?t+6*(n-t)*i:2*i<1?n:3*i<2?t+(n-t)*(2/3-i)*6:t,a[u]=255*r;return a}function u(e){var t=e[0]/60,n=e[1]/100,i=e[2]/100,a=Math.floor(t)%6,r=t-Math.floor(t),o=255*i*(1-n),s=255*i*(1-n*r),l=255*i*(1-n*(1-r));switch(i*=255,a){case 0:return[i,l,o];case 1:return[s,i,o];case 2:return[o,i,l];case 3:return[o,s,i];case 4:return[l,o,i];case 5:return[i,o,s]}}function c(e){var t,n,i,a,o=e[0]/360,s=e[1]/100,l=e[2]/100,u=s+l;switch(u>1&&(s/=u,l/=u),i=6*o-(t=Math.floor(6*o)),1&t&&(i=1-i),a=s+i*((n=1-l)-s),t){default:case 6:case 0:r=n,g=a,b=s;break;case 1:r=a,g=n,b=s;break;case 2:r=s,g=n,b=a;break;case 3:r=s,g=a,b=n;break;case 4:r=a,g=s,b=n;break;case 5:r=n,g=s,b=a}return[255*r,255*g,255*b]}function h(e){var t=e[0]/100,n=e[1]/100,i=e[2]/100,a=e[3]/100;return[255*(1-Math.min(1,t*(1-a)+a)),255*(1-Math.min(1,n*(1-a)+a)),255*(1-Math.min(1,i*(1-a)+a))]}function d(e){var t,n,i,a=e[0]/100,r=e[1]/100,o=e[2]/100;return n=-.9689*a+1.8758*r+.0415*o,i=.0557*a+-.204*r+1.057*o,t=(t=3.2406*a+-1.5372*r+-.4986*o)>.0031308?1.055*Math.pow(t,1/2.4)-.055:t*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,[255*(t=Math.min(Math.max(0,t),1)),255*(n=Math.min(Math.max(0,n),1)),255*(i=Math.min(Math.max(0,i),1))]}function m(e){var t=e[0],n=e[1],i=e[2];return n/=100,i/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(t-n),200*(n-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]}function f(e){var t,n,i,a,r=e[0],o=e[1],s=e[2];return r<=8?a=(n=100*r/903.3)/100*7.787+16/116:(n=100*Math.pow((r+16)/116,3),a=Math.pow(n/100,1/3)),[t=t/95.047<=.008856?t=95.047*(o/500+a-16/116)/7.787:95.047*Math.pow(o/500+a,3),n,i=i/108.883<=.008859?i=108.883*(a-s/200-16/116)/7.787:108.883*Math.pow(a-s/200,3)]}function p(e){var t,n=e[0],i=e[1],a=e[2];return(t=360*Math.atan2(a,i)/2/Math.PI)<0&&(t+=360),[n,Math.sqrt(i*i+a*a),t]}function y(e){return d(f(e))}function v(e){var t,n=e[0],i=e[1];return t=e[2]/360*2*Math.PI,[n,i*Math.cos(t),i*Math.sin(t)]}function w(e){return x[e]}var x,M})?n.apply(t,[]):n)||(e.exports=i)},"./client/js/util/data-clone.js":(e,t,n)=>{var i;function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}void 0===(i=function(){function e(t){if(!t)return t;if("object"!==a(t))return t;if(Array.isArray(t))return t.map(e);if(t instanceof Object){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}return t}return n("./client/js/util/underscore.js"),{clone:e,cloneMessage:function(t,n){return{message:t,data:e(n),timestamp:Date.now()}}}}.call(t,n,t,e))||(e.exports=i)},"./client/js/util/listmap.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var i=n("mori"),a=n.n(i);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,s(i.key),i)}}function s(e){var t=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}const l=function(){return function(e,t){return t&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=a()?("function"==typeof a().hashMap?a().hashMap:a().hash_map)():{}}),[{key:"get",value:function(e){return a()?a().get(this.map,e):this.map[e]}},{key:"has",value:function(e){return a()?a().hasKey(this.map,e):e in this.map}},{key:"set",value:function(e,t){return a()?this.map=a().assoc(this.map,e,t):this.map[e]=t,this}},{key:"delete",value:function(e){return a()?this.map=a().dissoc(this.map,e):delete this.map[e],this}},{key:"clear",value:function(){return a()?this.map=a().hash_map():this.map={},this}},{key:"keys",value:function(){return a()?a().keys(this.map):Object.keys(this.map)}},{key:"values",value:function(){return a()?a().vals(this.map):Object.values(this.map)}},{key:"entries",value:function(){return a()?a().seq(this.map):Object.entries(this.map)}}])}()},"./client/js/util/random.js":(e,t,n)=>{var i;void 0===(i=function(){return{random:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},randomFloat:function(e,t){return Math.random()*(t-e)+e},pick:function(e){return e[Math.floor(Math.random()*e.length)]},chance:function(e){return Math.random()<e}}}.call(t,n,t,e))||(e.exports=i)},"./client/js/util/tinycolor.js":(e,t,n)=>{var i;function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}!function(){var r=/^[\s,#]+/,o=/\s+$/,s=0,l=Math,u=l.round,c=l.min,h=l.max,d=l.random;function m(e,t){if(t=t||{},(e=e||"")instanceof m)return e;if(!(this instanceof m))return new m(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,i=!1,s=!1;return"string"==typeof e&&(e=function(e){e=e.replace(r,"").replace(o,"").toLowerCase();var t,n,i=!1;if(E[e])e=E[e],i=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=V.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=V.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=V.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=V.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=V.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=V.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=V.hex8.exec(e))?{a:(n=t[1],L(n)/255),r:L(t[2]),g:L(t[3]),b:L(t[4]),format:i?"name":"hex8"}:(t=V.hex6.exec(e))?{r:L(t[1]),g:L(t[2]),b:L(t[3]),format:i?"name":"hex"}:!!(t=V.hex3.exec(e))&&{r:L(t[1]+""+t[1]),g:L(t[2]+""+t[2]),b:L(t[3]+""+t[3]),format:i?"name":"hex"}}(e)),"object"==a(e)&&(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")?(t=function(e,t,n){return{r:255*R(e,255),g:255*R(t,255),b:255*R(n,255)}}(e.r,e.g,e.b),i=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")?(e.s=z(e.s),e.v=z(e.v),t=function(e,t,n){e=6*R(e,360),t=R(t,100),n=R(n,100);var i=l.floor(e),a=e-i,r=n*(1-t),o=n*(1-a*t),s=n*(1-(1-a)*t),u=i%6;return{r:255*[n,o,r,r,s,n][u],g:255*[s,n,n,o,r,r][u],b:255*[r,r,s,n,n,o][u]}}(e.h,e.s,e.v),i=!0,s="hsv"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&(e.s=z(e.s),e.l=z(e.l),t=function(e,t,n){var i,a,r;function o(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=R(e,360),t=R(t,100),n=R(n,100),0===t)i=a=r=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;i=o(l,s,e+1/3),a=o(l,s,e),r=o(l,s,e-1/3)}return{r:255*i,g:255*a,b:255*r}}(e.h,e.s,e.l),i=!0,s="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=D(n),{ok:i,format:e.format||s,r:c(255,h(t.r,0)),g:c(255,h(t.g,0)),b:c(255,h(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=u(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=u(this._r)),this._g<1&&(this._g=u(this._g)),this._b<1&&(this._b=u(this._b)),this._ok=n.ok,this._tc_id=s++}function f(e,t,n){e=R(e,255),t=R(t,255),n=R(n,255);var i,a,r=h(e,t,n),o=c(e,t,n),s=(r+o)/2;if(r==o)i=a=0;else{var l=r-o;switch(a=s>.5?l/(2-r-o):l/(r+o),r){case e:i=(t-n)/l+(t<n?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:a,l:s}}function p(e,t,n){e=R(e,255),t=R(t,255),n=R(n,255);var i,a,r=h(e,t,n),o=c(e,t,n),s=r,l=r-o;if(a=0===r?0:l/r,r==o)i=0;else{switch(r){case e:i=(t-n)/l+(t<n?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:a,v:s}}function g(e,t,n,i){var a=[I(u(e).toString(16)),I(u(t).toString(16)),I(u(n).toString(16))];return i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function b(e,t,n,i){var a;return[I((a=i,Math.round(255*parseFloat(a)).toString(16))),I(u(e).toString(16)),I(u(t).toString(16)),I(u(n).toString(16))].join("")}function y(e,t){t=0===t?0:t||10;var n=m(e).toHsl();return n.s-=t/100,n.s=B(n.s),m(n)}function v(e,t){t=0===t?0:t||10;var n=m(e).toHsl();return n.s+=t/100,n.s=B(n.s),m(n)}function w(e){return m(e).desaturate(100)}function x(e,t){t=0===t?0:t||10;var n=m(e).toHsl();return n.l+=t/100,n.l=B(n.l),m(n)}function M(e,t){t=0===t?0:t||10;var n=m(e).toRgb();return n.r=h(0,c(255,n.r-u(-t/100*255))),n.g=h(0,c(255,n.g-u(-t/100*255))),n.b=h(0,c(255,n.b-u(-t/100*255))),m(n)}function j(e,t){t=0===t?0:t||10;var n=m(e).toHsl();return n.l-=t/100,n.l=B(n.l),m(n)}function _(e,t){var n=m(e).toHsl(),i=(u(n.h)+t)%360;return n.h=i<0?360+i:i,m(n)}function k(e){var t=m(e).toHsl();return t.h=(t.h+180)%360,m(t)}function S(e){var t=m(e).toHsl(),n=t.h;return[m(e),m({h:(n+120)%360,s:t.s,l:t.l}),m({h:(n+240)%360,s:t.s,l:t.l})]}function C(e){var t=m(e).toHsl(),n=t.h;return[m(e),m({h:(n+90)%360,s:t.s,l:t.l}),m({h:(n+180)%360,s:t.s,l:t.l}),m({h:(n+270)%360,s:t.s,l:t.l})]}function T(e){var t=m(e).toHsl(),n=t.h;return[m(e),m({h:(n+72)%360,s:t.s,l:t.l}),m({h:(n+216)%360,s:t.s,l:t.l})]}function A(e,t,n){t=t||6,n=n||30;var i=m(e).toHsl(),a=360/n,r=[m(e)];for(i.h=(i.h-(a*t>>1)+720)%360;--t;)i.h=(i.h+a)%360,r.push(m(i));return r}function P(e,t){t=t||6;for(var n=m(e).toHsv(),i=n.h,a=n.s,r=n.v,o=[],s=1/t;t--;)o.push(m({h:i,s:a,v:r})),r=(r+s)%1;return o}m.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,i=this.toRgb();return e=i.r/255,t=i.g/255,n=i.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=D(e),this._roundA=u(100*this._a)/100,this},toHsv:function(){var e=p(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=p(this._r,this._g,this._b),t=u(360*e.h),n=u(100*e.s),i=u(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=f(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=f(this._r,this._g,this._b),t=u(360*e.h),n=u(100*e.s),i=u(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+i+"%)":"hsla("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return g(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(){return b(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:u(this._r),g:u(this._g),b:u(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+u(this._r)+", "+u(this._g)+", "+u(this._b)+")":"rgba("+u(this._r)+", "+u(this._g)+", "+u(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:u(100*R(this._r,255))+"%",g:u(100*R(this._g,255))+"%",b:u(100*R(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+u(100*R(this._r,255))+"%, "+u(100*R(this._g,255))+"%, "+u(100*R(this._b,255))+"%)":"rgba("+u(100*R(this._r,255))+"%, "+u(100*R(this._g,255))+"%, "+u(100*R(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(O[g(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+b(this._r,this._g,this._b,this._a),n=t,i=this._gradientType?"GradientType = 1, ":"";return e&&(n=m(e).toHex8String()),"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,i=this._a<1&&this._a>=0;return t||!i||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(x,arguments)},brighten:function(){return this._applyModification(M,arguments)},darken:function(){return this._applyModification(j,arguments)},desaturate:function(){return this._applyModification(y,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(w,arguments)},spin:function(){return this._applyModification(_,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(A,arguments)},complement:function(){return this._applyCombination(k,arguments)},monochromatic:function(){return this._applyCombination(P,arguments)},splitcomplement:function(){return this._applyCombination(T,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(C,arguments)}},m.fromRatio=function(e,t){if("object"==a(e)){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]="a"===i?e[i]:z(e[i]));e=n}return m(e,t)},m.equals=function(e,t){return!(!e||!t)&&m(e).toRgbString()==m(t).toRgbString()},m.random=function(){return m.fromRatio({r:d(),g:d(),b:d()})},m.mix=function(e,t,n){n=0===n?0:n||50;var i,a=m(e).toRgb(),r=m(t).toRgb(),o=n/100,s=2*o-1,l=r.a-a.a,u=1-(i=((i=s*l==-1?s:(s+l)/(1+s*l))+1)/2);return m({r:r.r*i+a.r*u,g:r.g*i+a.g*u,b:r.b*i+a.b*u,a:r.a*o+a.a*(1-o)})},m.readability=function(e,t){var n=m(e),i=m(t);return(Math.max(n.getLuminance(),i.getLuminance())+.05)/(Math.min(n.getLuminance(),i.getLuminance())+.05)},m.isReadable=function(e,t,n){var i,a,r,o,s,l=m.readability(e,t);switch(a=!1,(r=n,"AA"!==(o=((r=r||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==o&&(o="AA"),"small"!==(s=(r.size||"small").toLowerCase())&&"large"!==s&&(s="small"),i={level:o,size:s}).level+i.size){case"AAsmall":case"AAAlarge":a=l>=4.5;break;case"AAlarge":a=l>=3;break;case"AAAsmall":a=l>=7}return a},m.mostReadable=function(e,t,n){var i,a,r,o,s=null,l=0;a=(n=n||{}).includeFallbackColors,r=n.level,o=n.size;for(var u=0;u<t.length;u++)(i=m.readability(e,t[u]))>l&&(l=i,s=m(t[u]));return m.isReadable(e,s,{level:r,size:o})||!a?s:(n.includeFallbackColors=!1,m.mostReadable(e,["#fff","#000"],n))};var E=m.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},O=m.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(E);function D(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function R(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=c(t,h(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),l.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function B(e){return c(1,h(0,e))}function L(e){return parseInt(e,16)}function I(e){return 1==e.length?"0"+e:""+e}function z(e){return e<=1&&(e=100*e+"%"),e}var F,N,H,V=(N="[\\s|\\(]+("+(F="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+F+")[,|\\s]+("+F+")\\s*\\)?",H="[\\s|\\(]+("+F+")[,|\\s]+("+F+")[,|\\s]+("+F+")[,|\\s]+("+F+")\\s*\\)?",{rgb:new RegExp("rgb"+N),rgba:new RegExp("rgba"+H),hsl:new RegExp("hsl"+N),hsla:new RegExp("hsla"+H),hsv:new RegExp("hsv"+N),hsva:new RegExp("hsva"+H),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});e.exports?e.exports=m:void 0===(i=function(){return m}.call(t,n,t,e))||(e.exports=i)}()},"./client/js/util/underscore.js":function(e,t){var n;function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}(function(){var a=this,r=a._,o=Array.prototype,s=Object.prototype,l=Function.prototype,u=o.push,c=o.slice,h=s.toString,d=s.hasOwnProperty,m=Array.isArray,f=Object.keys,p=l.bind,g=Object.create,b=function(){},y=function(e){return e instanceof y?e:this instanceof y?void(this._wrapped=e):new y(e)};e.exports&&(t=e.exports=y),t._=y,y.VERSION="1.8.3";var v=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,a){return e.call(t,n,i,a)};case 4:return function(n,i,a,r){return e.call(t,n,i,a,r)}}return function(){return e.apply(t,arguments)}},w=function(e,t,n){return null==e?y.identity:y.isFunction(e)?v(e,t,n):y.isObject(e)?y.matcher(e):y.property(e)};y.iteratee=function(e,t){return w(e,t,1/0)};var x=function(e,t){return function(n){var i=arguments.length;if(i<2||null==n)return n;for(var a=1;a<i;a++)for(var r=arguments[a],o=e(r),s=o.length,l=0;l<s;l++){var u=o[l];t&&void 0!==n[u]||(n[u]=r[u])}return n}},M=function(e){if(!y.isObject(e))return{};if(g)return g(e);b.prototype=e;var t=new b;return b.prototype=null,t},j=function(e){return function(t){return null==t?void 0:t[e]}},_=Math.pow(2,53)-1,k=j("length"),S=function(e){var t=k(e);return"number"==typeof t&&t>=0&&t<=_};function C(e){return function(t,n,i,a){n=v(n,a,4);var r=!S(t)&&y.keys(t),o=(r||t).length,s=e>0?0:o-1;return arguments.length<3&&(i=t[r?r[s]:s],s+=e),function(t,n,i,a,r,o){for(;r>=0&&r<o;r+=e){var s=a?a[r]:r;i=n(i,t[s],s,t)}return i}(t,n,i,r,s,o)}}y.each=y.forEach=function(e,t,n){var i,a;if(t=v(t,n),S(e))for(i=0,a=e.length;i<a;i++)t(e[i],i,e);else{var r=y.keys(e);for(i=0,a=r.length;i<a;i++)t(e[r[i]],r[i],e)}return e},y.map=y.collect=function(e,t,n){t=w(t,n);for(var i=!S(e)&&y.keys(e),a=(i||e).length,r=Array(a),o=0;o<a;o++){var s=i?i[o]:o;r[o]=t(e[s],s,e)}return r},y.reduce=y.foldl=y.inject=C(1),y.reduceRight=y.foldr=C(-1),y.find=y.detect=function(e,t,n){var i;if(void 0!==(i=S(e)?y.findIndex(e,t,n):y.findKey(e,t,n))&&-1!==i)return e[i]},y.filter=y.select=function(e,t,n){var i=[];return t=w(t,n),y.each(e,(function(e,n,a){t(e,n,a)&&i.push(e)})),i},y.reject=function(e,t,n){return y.filter(e,y.negate(w(t)),n)},y.every=y.all=function(e,t,n){t=w(t,n);for(var i=!S(e)&&y.keys(e),a=(i||e).length,r=0;r<a;r++){var o=i?i[r]:r;if(!t(e[o],o,e))return!1}return!0},y.some=y.any=function(e,t,n){t=w(t,n);for(var i=!S(e)&&y.keys(e),a=(i||e).length,r=0;r<a;r++){var o=i?i[r]:r;if(t(e[o],o,e))return!0}return!1},y.contains=y.includes=y.include=function(e,t,n,i){return S(e)||(e=y.values(e)),("number"!=typeof n||i)&&(n=0),y.indexOf(e,t,n)>=0},y.invoke=function(e,t){var n=c.call(arguments,2),i=y.isFunction(t);return y.map(e,(function(e){var a=i?t:e[t];return null==a?a:a.apply(e,n)}))},y.pluck=function(e,t){return y.map(e,y.property(t))},y.where=function(e,t){return y.filter(e,y.matcher(t))},y.findWhere=function(e,t){return y.find(e,y.matcher(t))},y.max=function(e,t,n){var i,a,r=-1/0,o=-1/0;if(null==t&&null!=e)for(var s=0,l=(e=S(e)?e:y.values(e)).length;s<l;s++)(i=e[s])>r&&(r=i);else t=w(t,n),y.each(e,(function(e,n,i){((a=t(e,n,i))>o||a===-1/0&&r===-1/0)&&(r=e,o=a)}));return r},y.min=function(e,t,n){var i,a,r=1/0,o=1/0;if(null==t&&null!=e)for(var s=0,l=(e=S(e)?e:y.values(e)).length;s<l;s++)(i=e[s])<r&&(r=i);else t=w(t,n),y.each(e,(function(e,n,i){((a=t(e,n,i))<o||a===1/0&&r===1/0)&&(r=e,o=a)}));return r},y.shuffle=function(e){for(var t,n=S(e)?e:y.values(e),i=n.length,a=Array(i),r=0;r<i;r++)(t=y.random(0,r))!==r&&(a[r]=a[t]),a[t]=n[r];return a},y.sample=function(e,t,n){return null==t||n?(S(e)||(e=y.values(e)),e[y.random(e.length-1)]):y.shuffle(e).slice(0,Math.max(0,t))},y.sortBy=function(e,t,n){return t=w(t,n),y.pluck(y.map(e,(function(e,n,i){return{value:e,index:n,criteria:t(e,n,i)}})).sort((function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index})),"value")};var T=function(e){return function(t,n,i){var a={};return n=w(n,i),y.each(t,(function(i,r){var o=n(i,r,t);e(a,i,o)})),a}};y.groupBy=T((function(e,t,n){y.has(e,n)?e[n].push(t):e[n]=[t]})),y.indexBy=T((function(e,t,n){e[n]=t})),y.countBy=T((function(e,t,n){y.has(e,n)?e[n]++:e[n]=1})),y.toArray=function(e){return e?y.isArray(e)?c.call(e):S(e)?y.map(e,y.identity):y.values(e):[]},y.size=function(e){return null==e?0:S(e)?e.length:y.keys(e).length},y.partition=function(e,t,n){t=w(t,n);var i=[],a=[];return y.each(e,(function(e,n,r){(t(e,n,r)?i:a).push(e)})),[i,a]},y.first=y.head=y.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:y.initial(e,e.length-t)},y.initial=function(e,t,n){return c.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},y.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:y.rest(e,Math.max(0,e.length-t))},y.rest=y.tail=y.drop=function(e,t,n){return c.call(e,null==t||n?1:t)},y.compact=function(e){return y.filter(e,y.identity)};var A=function(e,t,n,i){for(var a=[],r=0,o=i||0,s=k(e);o<s;o++){var l=e[o];if(S(l)&&(y.isArray(l)||y.isArguments(l))){t||(l=A(l,t,n));var u=0,c=l.length;for(a.length+=c;u<c;)a[r++]=l[u++]}else n||(a[r++]=l)}return a};function P(e){return function(t,n,i){n=w(n,i);for(var a=k(t),r=e>0?0:a-1;r>=0&&r<a;r+=e)if(n(t[r],r,t))return r;return-1}}function E(e,t,n){return function(i,a,r){var o=0,s=k(i);if("number"==typeof r)e>0?o=r>=0?r:Math.max(r+s,o):s=r>=0?Math.min(r+1,s):r+s+1;else if(n&&r&&s)return i[r=n(i,a)]===a?r:-1;if(a!=a)return(r=t(c.call(i,o,s),y.isNaN))>=0?r+o:-1;for(r=e>0?o:s-1;r>=0&&r<s;r+=e)if(i[r]===a)return r;return-1}}y.flatten=function(e,t){return A(e,t,!1)},y.without=function(e){return y.difference(e,c.call(arguments,1))},y.uniq=y.unique=function(e,t,n,i){y.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=w(n,i));for(var a=[],r=[],o=0,s=k(e);o<s;o++){var l=e[o],u=n?n(l,o,e):l;t?(o&&r===u||a.push(l),r=u):n?y.contains(r,u)||(r.push(u),a.push(l)):y.contains(a,l)||a.push(l)}return a},y.union=function(){return y.uniq(A(arguments,!0,!0))},y.intersection=function(e){for(var t=[],n=arguments.length,i=0,a=k(e);i<a;i++){var r=e[i];if(!y.contains(t,r)){for(var o=1;o<n&&y.contains(arguments[o],r);o++);o===n&&t.push(r)}}return t},y.difference=function(e){var t=A(arguments,!0,!0,1);return y.filter(e,(function(e){return!y.contains(t,e)}))},y.zip=function(){return y.unzip(arguments)},y.unzip=function(e){for(var t=e&&y.max(e,k).length||0,n=Array(t),i=0;i<t;i++)n[i]=y.pluck(e,i);return n},y.object=function(e,t){for(var n={},i=0,a=k(e);i<a;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},y.findIndex=P(1),y.findLastIndex=P(-1),y.sortedIndex=function(e,t,n,i){for(var a=(n=w(n,i,1))(t),r=0,o=k(e);r<o;){var s=Math.floor((r+o)/2);n(e[s])<a?r=s+1:o=s}return r},y.indexOf=E(1,y.findIndex,y.sortedIndex),y.lastIndexOf=E(-1,y.findLastIndex),y.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),a=Array(i),r=0;r<i;r++,e+=n)a[r]=e;return a};var O=function(e,t,n,i,a){if(!(i instanceof t))return e.apply(n,a);var r=M(e.prototype),o=e.apply(r,a);return y.isObject(o)?o:r};y.bind=function(e,t){if(p&&e.bind===p)return p.apply(e,c.call(arguments,1));if(!y.isFunction(e))throw new TypeError("Bind must be called on a function");var n=c.call(arguments,2),i=function(){return O(e,i,t,this,n.concat(c.call(arguments)))};return i},y.partial=function(e){var t=c.call(arguments,1),n=function(){for(var i=0,a=t.length,r=Array(a),o=0;o<a;o++)r[o]=t[o]===y?arguments[i++]:t[o];for(;i<arguments.length;)r.push(arguments[i++]);return O(e,n,this,this,r)};return n},y.bindAll=function(e){var t,n,i=arguments.length;if(i<=1)throw new Error("bindAll must be passed function names");for(t=1;t<i;t++)e[n=arguments[t]]=y.bind(e[n],e);return e},y.memoize=function(e,t){var n=function(i){var a=n.cache,r=""+(t?t.apply(this,arguments):i);return y.has(a,r)||(a[r]=e.apply(this,arguments)),a[r]};return n.cache={},n},y.delay=function(e,t){var n=c.call(arguments,2);return setTimeout((function(){return e.apply(null,n)}),t)},y.defer=y.partial(y.delay,y,1),y.throttle=function(e,t,n){var i,a,r,o=null,s=0;n||(n={});var l=function(){s=!1===n.leading?0:y.now(),o=null,r=e.apply(i,a),o||(i=a=null)};return function(){var u=y.now();s||!1!==n.leading||(s=u);var c=t-(u-s);return i=this,a=arguments,c<=0||c>t?(o&&(clearTimeout(o),o=null),s=u,r=e.apply(i,a),o||(i=a=null)):o||!1===n.trailing||(o=setTimeout(l,c)),r}},y.debounce=function(e,t,n){var i,a,r,o,s,l=function(){var u=y.now()-o;u<t&&u>=0?i=setTimeout(l,t-u):(i=null,n||(s=e.apply(r,a),i||(r=a=null)))};return function(){r=this,a=arguments,o=y.now();var u=n&&!i;return i||(i=setTimeout(l,t)),u&&(s=e.apply(r,a),r=a=null),s}},y.wrap=function(e,t){return y.partial(t,e)},y.negate=function(e){return function(){return!e.apply(this,arguments)}},y.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},y.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},y.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},y.once=y.partial(y.before,2);var D=!{toString:null}.propertyIsEnumerable("toString"),R=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function B(e,t){var n=R.length,i=e.constructor,a=y.isFunction(i)&&i.prototype||s,r="constructor";for(y.has(e,r)&&!y.contains(t,r)&&t.push(r);n--;)(r=R[n])in e&&e[r]!==a[r]&&!y.contains(t,r)&&t.push(r)}y.keys=function(e){if(!y.isObject(e))return[];if(f)return f(e);var t=[];for(var n in e)y.has(e,n)&&t.push(n);return D&&B(e,t),t},y.allKeys=function(e){if(!y.isObject(e))return[];var t=[];for(var n in e)t.push(n);return D&&B(e,t),t},y.values=function(e){for(var t=y.keys(e),n=t.length,i=Array(n),a=0;a<n;a++)i[a]=e[t[a]];return i},y.mapObject=function(e,t,n){t=w(t,n);for(var i,a=y.keys(e),r=a.length,o={},s=0;s<r;s++)o[i=a[s]]=t(e[i],i,e);return o},y.pairs=function(e){for(var t=y.keys(e),n=t.length,i=Array(n),a=0;a<n;a++)i[a]=[t[a],e[t[a]]];return i},y.invert=function(e){for(var t={},n=y.keys(e),i=0,a=n.length;i<a;i++)t[e[n[i]]]=n[i];return t},y.functions=y.methods=function(e){var t=[];for(var n in e)y.isFunction(e[n])&&t.push(n);return t.sort()},y.extend=x(y.allKeys),y.extendOwn=y.assign=x(y.keys),y.findKey=function(e,t,n){t=w(t,n);for(var i,a=y.keys(e),r=0,o=a.length;r<o;r++)if(t(e[i=a[r]],i,e))return i},y.pick=function(e,t,n){var i,a,r={},o=e;if(null==o)return r;y.isFunction(t)?(a=y.allKeys(o),i=v(t,n)):(a=A(arguments,!1,!1,1),i=function(e,t,n){return t in n},o=Object(o));for(var s=0,l=a.length;s<l;s++){var u=a[s],c=o[u];i(c,u,o)&&(r[u]=c)}return r},y.omit=function(e,t,n){if(y.isFunction(t))t=y.negate(t);else{var i=y.map(A(arguments,!1,!1,1),String);t=function(e,t){return!y.contains(i,t)}}return y.pick(e,t,n)},y.defaults=x(y.allKeys,!0),y.create=function(e,t){var n=M(e);return t&&y.extendOwn(n,t),n},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.tap=function(e,t){return t(e),e},y.isMatch=function(e,t){var n=y.keys(t),i=n.length;if(null==e)return!i;for(var a=Object(e),r=0;r<i;r++){var o=n[r];if(t[o]!==a[o]||!(o in a))return!1}return!0};var L=function(e,t,n,a){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof y&&(e=e._wrapped),t instanceof y&&(t=t._wrapped);var r=h.call(e);if(r!==h.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0===+e?1/+e==1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var o="[object Array]"===r;if(!o){if("object"!=i(e)||"object"!=i(t))return!1;var s=e.constructor,l=t.constructor;if(s!==l&&!(y.isFunction(s)&&s instanceof s&&y.isFunction(l)&&l instanceof l)&&"constructor"in e&&"constructor"in t)return!1}a=a||[];for(var u=(n=n||[]).length;u--;)if(n[u]===e)return a[u]===t;if(n.push(e),a.push(t),o){if((u=e.length)!==t.length)return!1;for(;u--;)if(!L(e[u],t[u],n,a))return!1}else{var c,d=y.keys(e);if(u=d.length,y.keys(t).length!==u)return!1;for(;u--;)if(c=d[u],!y.has(t,c)||!L(e[c],t[c],n,a))return!1}return n.pop(),a.pop(),!0};y.isEqual=function(e,t){return L(e,t)},y.isEmpty=function(e){return null==e||(S(e)&&(y.isArray(e)||y.isString(e)||y.isArguments(e))?0===e.length:0===y.keys(e).length)},y.isElement=function(e){return!(!e||1!==e.nodeType)},y.isArray=m||function(e){return"[object Array]"===h.call(e)},y.isObject=function(e){var t=i(e);return"function"===t||"object"===t&&!!e},y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],(function(e){y["is"+e]=function(t){return h.call(t)==="[object "+e+"]"}})),y.isArguments(arguments)||(y.isArguments=function(e){return y.has(e,"callee")}),"object"!=("undefined"==typeof Int8Array?"undefined":i(Int8Array))&&(y.isFunction=function(e){return"function"==typeof e||!1}),y.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&e!==+e},y.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===h.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){return null!=e&&d.call(e,t)},y.noConflict=function(){return a._=r,this},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.noop=function(){},y.property=j,y.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},y.matcher=y.matches=function(e){return e=y.extendOwn({},e),function(t){return y.isMatch(t,e)}},y.times=function(e,t,n){var i=Array(Math.max(0,e));t=v(t,n,1);for(var a=0;a<e;a++)i[a]=t(a);return i},y.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},y.now=Date.now||function(){return(new Date).getTime()};var I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},z=y.invert(I),F=function(e){var t=function(t){return e[t]},n="(?:"+y.keys(e).join("|")+")",i=RegExp(n),a=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(a,t):e}};y.escape=F(I),y.unescape=F(z),y.result=function(e,t,n){var i=null==e?void 0:e[t];return void 0===i&&(i=n),y.isFunction(i)?i.call(e):i};var N=0;y.uniqueId=function(e){var t=++N+"";return e?e+t:t},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,V={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},G=/\\|'|\r|\n|\u2028|\u2029/g,$=function(e){return"\\"+V[e]};y.template=function(e,t,n){!t&&n&&(t=n),t=y.defaults({},t,y.templateSettings);var i=RegExp([(t.escape||H).source,(t.interpolate||H).source,(t.evaluate||H).source].join("|")+"|$","g"),a=0,r="__p+='";e.replace(i,(function(t,n,i,o,s){return r+=e.slice(a,s).replace(G,$),a=s+t.length,n?r+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?r+="'+\n((__t=("+i+"))==null?'':__t)+\n'":o&&(r+="';\n"+o+"\n__p+='"),t})),r+="';\n",t.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{var o=new Function(t.variable||"obj","_",r)}catch(e){throw e.source=r,e}var s=function(e){return o.call(this,e,y)},l=t.variable||"obj";return s.source="function("+l+"){\n"+r+"}",s},y.chain=function(e){var t=y(e);return t._chain=!0,t};var Y=function(e,t){return e._chain?y(t).chain():t};y.mixin=function(e){y.each(y.functions(e),(function(t){var n=y[t]=e[t];y.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),Y(this,n.apply(y,e))}}))},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=o[e];y.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],Y(this,n)}})),y.each(["concat","join","slice"],(function(e){var t=o[e];y.prototype[e]=function(){return Y(this,t.apply(this._wrapped,arguments))}})),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return""+this._wrapped},void 0===(n=function(){return y}.apply(t,[]))||(e.exports=n)}).call(this)},"./node_modules/handlebars/dist/cjs/handlebars.runtime.js":(e,t,n)=>{"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.__esModule=!0;var r=a(n("./node_modules/handlebars/dist/cjs/handlebars/base.js")),o=i(n("./node_modules/handlebars/dist/cjs/handlebars/safe-string.js")),s=i(n("./node_modules/handlebars/dist/cjs/handlebars/exception.js")),l=a(n("./node_modules/handlebars/dist/cjs/handlebars/utils.js")),u=a(n("./node_modules/handlebars/dist/cjs/handlebars/runtime.js")),c=i(n("./node_modules/handlebars/dist/cjs/handlebars/no-conflict.js"));function h(){var e=new r.HandlebarsEnvironment;return l.extend(e,r),e.SafeString=o.default,e.Exception=s.default,e.Utils=l,e.escapeExpression=l.escapeExpression,e.VM=u,e.template=function(t){return u.template(t,e)},e}var d=h();d.create=h,c.default(d),d.default=d,t.default=d,e.exports=t.default},"./node_modules/handlebars/dist/cjs/handlebars/base.js":(e,t,n)=>{"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.HandlebarsEnvironment=h;var a=n("./node_modules/handlebars/dist/cjs/handlebars/utils.js"),r=i(n("./node_modules/handlebars/dist/cjs/handlebars/exception.js")),o=n("./node_modules/handlebars/dist/cjs/handlebars/helpers.js"),s=n("./node_modules/handlebars/dist/cjs/handlebars/decorators.js"),l=i(n("./node_modules/handlebars/dist/cjs/handlebars/logger.js")),u=n("./node_modules/handlebars/dist/cjs/handlebars/internal/proto-access.js");t.VERSION="4.7.8",t.COMPILER_REVISION=8,t.LAST_COMPATIBLE_COMPILER_REVISION=7,t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var c="[object Object]";function h(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},o.registerDefaultHelpers(this),s.registerDefaultDecorators(this)}h.prototype={constructor:h,logger:l.default,log:l.default.log,registerHelper:function(e,t){if(a.toString.call(e)===c){if(t)throw new r.default("Arg not supported with multiple helpers");a.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(a.toString.call(e)===c)a.extend(this.partials,e);else{if(void 0===t)throw new r.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(a.toString.call(e)===c){if(t)throw new r.default("Arg not supported with multiple decorators");a.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){u.resetLoggedProperties()}};var d=l.default.log;t.log=d,t.createFrame=a.createFrame,t.logger=l.default},"./node_modules/handlebars/dist/cjs/handlebars/decorators.js":(e,t,n)=>{"use strict";t.__esModule=!0,t.registerDefaultDecorators=function(e){a.default(e)};var i,a=(i=n("./node_modules/handlebars/dist/cjs/handlebars/decorators/inline.js"))&&i.__esModule?i:{default:i}},"./node_modules/handlebars/dist/cjs/handlebars/decorators/inline.js":(e,t,n)=>{"use strict";t.__esModule=!0;var i=n("./node_modules/handlebars/dist/cjs/handlebars/utils.js");t.default=function(e){e.registerDecorator("inline",(function(e,t,n,a){var r=e;return t.partials||(t.partials={},r=function(a,r){var o=n.partials;n.partials=i.extend({},o,t.partials);var s=e(a,r);return n.partials=o,s}),t.partials[a.args[0]]=a.fn,r}))},e.exports=t.default},"./node_modules/handlebars/dist/cjs/handlebars/exception.js":(e,t)=>{"use strict";t.__esModule=!0;var n=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function i(e,t){var a=t&&t.loc,r=void 0,o=void 0,s=void 0,l=void 0;a&&(r=a.start.line,o=a.end.line,s=a.start.column,l=a.end.column,e+=" - "+r+":"+s);for(var u=Error.prototype.constructor.call(this,e),c=0;c<n.length;c++)this[n[c]]=u[n[c]];Error.captureStackTrace&&Error.captureStackTrace(this,i);try{a&&(this.lineNumber=r,this.endLineNumber=o,Object.defineProperty?(Object.defineProperty(this,"column",{value:s,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:l,enumerable:!0})):(this.column=s,this.endColumn=l))}catch(e){}}i.prototype=new Error,t.default=i,e.exports=t.default},"./node_modules/handlebars/dist/cjs/handlebars/helpers.js":(e,t,n)=>{"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.registerDefaultHelpers=function(e){a.default(e),r.default(e),o.default(e),s.default(e),l.default(e),u.default(e),c.default(e)},t.moveHelperToHooks=function(e,t,n){e.helpers[t]&&(e.hooks[t]=e.helpers[t],n||delete e.helpers[t])};var a=i(n("./node_modules/handlebars/dist/cjs/handlebars/helpers/block-helper-missing.js")),r=i(n("./node_modules/handlebars/dist/cjs/handlebars/helpers/each.js")),o=i(n("./node_modules/handlebars/dist/cjs/handlebars/helpers/helper-missing.js")),s=i(n("./node_modules/handlebars/dist/cjs/handlebars/helpers/if.js")),l=i(n("./node_modules/handlebars/dist/cjs/handlebars/helpers/log.js")),u=i(n("./node_modules/handlebars/dist/cjs/handlebars/helpers/lookup.js")),c=i(n("./node_modules/handlebars/dist/cjs/handlebars/helpers/with.js"))},"./node_modules/handlebars/dist/cjs/handlebars/helpers/block-helper-missing.js":(e,t,n)=>{"use strict";t.__esModule=!0;var i=n("./node_modules/handlebars/dist/cjs/handlebars/utils.js");t.default=function(e){e.registerHelper("blockHelperMissing",(function(t,n){var a=n.inverse,r=n.fn;if(!0===t)return r(this);if(!1===t||null==t)return a(this);if(i.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):a(this);if(n.data&&n.ids){var o=i.createFrame(n.data);o.contextPath=i.appendContextPath(n.data.contextPath,n.name),n={data:o}}return r(t,n)}))},e.exports=t.default},"./node_modules/handlebars/dist/cjs/handlebars/helpers/each.js":(e,t,n)=>{"use strict";t.__esModule=!0;var i,a=n("./node_modules/handlebars/dist/cjs/handlebars/utils.js"),r=(i=n("./node_modules/handlebars/dist/cjs/handlebars/exception.js"))&&i.__esModule?i:{default:i};t.default=function(e){e.registerHelper("each",(function(e,t){if(!t)throw new r.default("Must pass iterator to #each");var n,i=t.fn,o=t.inverse,s=0,l="",u=void 0,c=void 0;function h(t,n,r){u&&(u.key=t,u.index=n,u.first=0===n,u.last=!!r,c&&(u.contextPath=c+t)),l+=i(e[t],{data:u,blockParams:a.blockParams([e[t],t],[c+t,null])})}if(t.data&&t.ids&&(c=a.appendContextPath(t.data.contextPath,t.ids[0])+"."),a.isFunction(e)&&(e=e.call(this)),t.data&&(u=a.createFrame(t.data)),e&&"object"==typeof e)if(a.isArray(e))for(var d=e.length;s<d;s++)s in e&&h(s,s,s===e.length-1);else if("function"==typeof Symbol&&e[Symbol.iterator]){for(var m=[],f=e[Symbol.iterator](),p=f.next();!p.done;p=f.next())m.push(p.value);for(d=(e=m).length;s<d;s++)h(s,s,s===e.length-1)}else n=void 0,Object.keys(e).forEach((function(e){void 0!==n&&h(n,s-1),n=e,s++})),void 0!==n&&h(n,s-1,!0);return 0===s&&(l=o(this)),l}))},e.exports=t.default},"./node_modules/handlebars/dist/cjs/handlebars/helpers/helper-missing.js":(e,t,n)=>{"use strict";t.__esModule=!0;var i,a=(i=n("./node_modules/handlebars/dist/cjs/handlebars/exception.js"))&&i.__esModule?i:{default:i};t.default=function(e){e.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new a.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},e.exports=t.default},"./node_modules/handlebars/dist/cjs/handlebars/helpers/if.js":(e,t,n)=>{"use strict";t.__esModule=!0;var i,a=n("./node_modules/handlebars/dist/cjs/handlebars/utils.js"),r=(i=n("./node_modules/handlebars/dist/cjs/handlebars/exception.js"))&&i.__esModule?i:{default:i};t.default=function(e){e.registerHelper("if",(function(e,t){if(2!=arguments.length)throw new r.default("#if requires exactly one argument");return a.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||a.isEmpty(e)?t.inverse(this):t.fn(this)})),e.registerHelper("unless",(function(t,n){if(2!=arguments.length)throw new r.default("#unless requires exactly one argument");return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}))},e.exports=t.default},"./node_modules/handlebars/dist/cjs/handlebars/helpers/log.js":(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("log",(function(){for(var t=[void 0],n=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)t.push(arguments[i]);var a=1;null!=n.hash.level?a=n.hash.level:n.data&&null!=n.data.level&&(a=n.data.level),t[0]=a,e.log.apply(e,t)}))},e.exports=t.default},"./node_modules/handlebars/dist/cjs/handlebars/helpers/lookup.js":(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",(function(e,t,n){return e?n.lookupProperty(e,t):e}))},e.exports=t.default},"./node_modules/handlebars/dist/cjs/handlebars/helpers/with.js":(e,t,n)=>{"use strict";t.__esModule=!0;var i,a=n("./node_modules/handlebars/dist/cjs/handlebars/utils.js"),r=(i=n("./node_modules/handlebars/dist/cjs/handlebars/exception.js"))&&i.__esModule?i:{default:i};t.default=function(e){e.registerHelper("with",(function(e,t){if(2!=arguments.length)throw new r.default("#with requires exactly one argument");a.isFunction(e)&&(e=e.call(this));var n=t.fn;if(a.isEmpty(e))return t.inverse(this);var i=t.data;return t.data&&t.ids&&((i=a.createFrame(t.data)).contextPath=a.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:i,blockParams:a.blockParams([e],[i&&i.contextPath])})}))},e.exports=t.default},"./node_modules/handlebars/dist/cjs/handlebars/internal/create-new-lookup-object.js":(e,t,n)=>{"use strict";t.__esModule=!0,t.createNewLookupObject=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.extend.apply(void 0,[Object.create(null)].concat(t))};var i=n("./node_modules/handlebars/dist/cjs/handlebars/utils.js")},"./node_modules/handlebars/dist/cjs/handlebars/internal/proto-access.js":(e,t,n)=>{"use strict";t.__esModule=!0,t.createProtoAccessControl=function(e){var t=Object.create(null);t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1;var n=Object.create(null);return n.__proto__=!1,{properties:{whitelist:a.createNewLookupObject(n,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:a.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},t.resultIsAllowed=function(e,t,n){return function(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(function(e){!0!==o[e]&&(o[e]=!0,r.default.log("error",'Handlebars: Access has been denied to resolve the property "'+e+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(t),!1)}("function"==typeof e?t.methods:t.properties,n)},t.resetLoggedProperties=function(){Object.keys(o).forEach((function(e){delete o[e]}))};var i,a=n("./node_modules/handlebars/dist/cjs/handlebars/internal/create-new-lookup-object.js"),r=(i=n("./node_modules/handlebars/dist/cjs/handlebars/logger.js"))&&i.__esModule?i:{default:i},o=Object.create(null)},"./node_modules/handlebars/dist/cjs/handlebars/internal/wrapHelper.js":(e,t)=>{"use strict";t.__esModule=!0,t.wrapHelper=function(e,t){return"function"!=typeof e?e:function(){return arguments[arguments.length-1]=t(arguments[arguments.length-1]),e.apply(this,arguments)}}},"./node_modules/handlebars/dist/cjs/handlebars/logger.js":(e,t,n)=>{"use strict";t.__esModule=!0;var i=n("./node_modules/handlebars/dist/cjs/handlebars/utils.js"),a={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=i.indexOf(a.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=a.lookupLevel(e),"undefined"!=typeof console&&a.lookupLevel(a.level)<=e){var t=a.methodMap[e];console[t]||(t="log");for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];console[t].apply(console,i)}}};t.default=a,e.exports=t.default},"./node_modules/handlebars/dist/cjs/handlebars/no-conflict.js":(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e){"object"!=typeof globalThis&&(Object.prototype.__defineGetter__("__magic__",(function(){return this})),__magic__.globalThis=__magic__,delete Object.prototype.__magic__);var t=globalThis.Handlebars;e.noConflict=function(){return globalThis.Handlebars===e&&(globalThis.Handlebars=t),e}},e.exports=t.default},"./node_modules/handlebars/dist/cjs/handlebars/runtime.js":(e,t,n)=>{"use strict";t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,n=o.COMPILER_REVISION;if(!(t>=o.LAST_COMPATIBLE_COMPILER_REVISION&&t<=o.COMPILER_REVISION)){if(t<o.LAST_COMPATIBLE_COMPILER_REVISION){var i=o.REVISION_CHANGES[n],a=o.REVISION_CHANGES[t];throw new r.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+a+").")}throw new r.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}},t.template=function(e,t){if(!t)throw new r.default("No environment passed to template");if(!e||!e.main)throw new r.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var n=e.compiler&&7===e.compiler[0],i={strict:function(e,t,n){if(!e||!(t in e))throw new r.default('"'+t+'" not defined in '+e,{loc:n});return i.lookupProperty(e,t)},lookupProperty:function(e,t){var n=e[t];return null==n||Object.prototype.hasOwnProperty.call(e,t)||u.resultIsAllowed(n,i.protoAccessControl,t)?n:void 0},lookup:function(e,t){for(var n=e.length,a=0;a<n;a++)if(null!=(e[a]&&i.lookupProperty(e[a],t)))return e[a][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:a.escapeExpression,invokePartial:function(n,i,o){o.hash&&(i=a.extend({},i,o.hash),o.ids&&(o.ids[0]=!0)),n=t.VM.resolvePartial.call(this,n,i,o);var s=a.extend({},o,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),l=t.VM.invokePartial.call(this,n,i,s);if(null==l&&t.compile&&(o.partials[o.name]=t.compile(n,e.compilerOptions,t),l=o.partials[o.name](i,s)),null!=l){if(o.indent){for(var u=l.split("\n"),c=0,h=u.length;c<h&&(u[c]||c+1!==h);c++)u[c]=o.indent+u[c];l=u.join("\n")}return l}throw new r.default("The partial "+o.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,i,a){var r=this.programs[e],o=this.fn(e);return t||a||i||n?r=c(this,e,o,t,n,i,a):r||(r=this.programs[e]=c(this,e,o)),r},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=a.extend({},t,e)),n},nullContext:Object.seal({}),noop:t.VM.noop,compilerInfo:e.compiler};function h(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=n.data;h._setup(n),!n.partial&&e.useData&&(a=function(e,t){return t&&"root"in t||((t=t?o.createFrame(t):{}).root=e),t}(t,a));var r=void 0,s=e.useBlockParams?[]:void 0;function l(t){return""+e.main(i,t,i.helpers,i.partials,a,s,r)}return e.useDepths&&(r=n.depths?t!=n.depths[0]?[t].concat(n.depths):n.depths:[t]),(l=d(e.main,l,i,n.depths||[],a,s))(t,n)}return h.isTop=!0,h._setup=function(r){if(r.partial)i.protoAccessControl=r.protoAccessControl,i.helpers=r.helpers,i.partials=r.partials,i.decorators=r.decorators,i.hooks=r.hooks;else{var o=a.extend({},t.helpers,r.helpers);!function(e,t){Object.keys(e).forEach((function(n){var i=e[n];e[n]=function(e,t){var n=t.lookupProperty;return l.wrapHelper(e,(function(e){return a.extend({lookupProperty:n},e)}))}(i,t)}))}(o,i),i.helpers=o,e.usePartial&&(i.partials=i.mergeIfNeeded(r.partials,t.partials)),(e.usePartial||e.useDecorators)&&(i.decorators=a.extend({},t.decorators,r.decorators)),i.hooks={},i.protoAccessControl=u.createProtoAccessControl(r);var c=r.allowCallsToHelperMissing||n;s.moveHelperToHooks(i,"helperMissing",c),s.moveHelperToHooks(i,"blockHelperMissing",c)}},h._child=function(t,n,a,o){if(e.useBlockParams&&!a)throw new r.default("must pass block params");if(e.useDepths&&!o)throw new r.default("must pass parent depths");return c(i,t,e[t],n,0,a,o)},h},t.wrapProgram=c,t.resolvePartial=function(e,t,n){return e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name],e},t.invokePartial=function(e,t,n){var i=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var s=void 0;if(n.fn&&n.fn!==h&&function(){n.data=o.createFrame(n.data);var e=n.fn;s=n.data["partial-block"]=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=o.createFrame(n.data),n.data["partial-block"]=i,e(t,n)},e.partials&&(n.partials=a.extend({},n.partials,e.partials))}(),void 0===e&&s&&(e=s),void 0===e)throw new r.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)},t.noop=h;var i,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("./node_modules/handlebars/dist/cjs/handlebars/utils.js")),r=(i=n("./node_modules/handlebars/dist/cjs/handlebars/exception.js"))&&i.__esModule?i:{default:i},o=n("./node_modules/handlebars/dist/cjs/handlebars/base.js"),s=n("./node_modules/handlebars/dist/cjs/handlebars/helpers.js"),l=n("./node_modules/handlebars/dist/cjs/handlebars/internal/wrapHelper.js"),u=n("./node_modules/handlebars/dist/cjs/handlebars/internal/proto-access.js");function c(e,t,n,i,a,r,o){function s(t){var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=o;return!o||t==o[0]||t===e.nullContext&&null===o[0]||(s=[t].concat(o)),n(e,t,e.helpers,e.partials,a.data||i,r&&[a.blockParams].concat(r),s)}return(s=d(n,s,e,o,i,r)).program=t,s.depth=o?o.length:0,s.blockParams=a||0,s}function h(){return""}function d(e,t,n,i,r,o){if(e.decorator){var s={};t=e.decorator(t,s,n,i&&i[0],r,o,i),a.extend(t,s)}return t}},"./node_modules/handlebars/dist/cjs/handlebars/safe-string.js":(e,t)=>{"use strict";function n(e){this.string=e}t.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},t.default=n,e.exports=t.default},"./node_modules/handlebars/dist/cjs/handlebars/utils.js":(e,t)=>{"use strict";t.__esModule=!0,t.extend=o,t.indexOf=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return a.test(e)?e.replace(i,r):e},t.isEmpty=function(e){return!e&&0!==e||!(!u(e)||0!==e.length)},t.createFrame=function(e){var t=o({},e);return t._parent=e,t},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},i=/[&<>"'`=]/g,a=/[&<>"'`=]/;function r(e){return n[e]}function o(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}var s=Object.prototype.toString;t.toString=s;var l=function(e){return"function"==typeof e};l(/x/)&&(t.isFunction=l=function(e){return"function"==typeof e&&"[object Function]"===s.call(e)}),t.isFunction=l;var u=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===s.call(e)};t.isArray=u},"./node_modules/handlebars/runtime.js":(e,t,n)=>{e.exports=n("./node_modules/handlebars/dist/cjs/handlebars.runtime.js").default},"./node_modules/jquery.transit/jquery.transit.js":function(e,t,n){var i,a,r;a=[n("jquery")],i=function(e){e.transit={version:"0.9.12",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var t=document.createElement("div"),n={};function i(e){if(e in t.style)return e;for(var n=["Moz","Webkit","O","ms"],i=e.charAt(0).toUpperCase()+e.substr(1),a=0;a<n.length;++a){var r=n[a]+i;if(r in t.style)return r}}var a=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;n.transition=i("transition"),n.transitionDelay=i("transitionDelay"),n.transform=i("transform"),n.transformOrigin=i("transformOrigin"),n.filter=i("Filter"),n.transform3d=(t.style[n.transform]="",t.style[n.transform]="rotateY(90deg)",""!==t.style[n.transform]);var r=n.transitionEnd={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"}[n.transition]||null;for(var o in n)n.hasOwnProperty(o)&&void 0===e.support[o]&&(e.support[o]=n[o]);function s(e){return"string"==typeof e&&this.parse(e),this}function l(e,t,n){!0===t?e.queue(n):t?e.queue(t,n):e.each((function(){n.call(this)}))}function u(t,i,a,r){var o=function(t){var i=[];return e.each(t,(function(t){t=e.camelCase(t),t=h(t=e.transit.propertyMap[t]||e.cssProps[t]||t),n[t]&&(t=h(n[t])),-1===e.inArray(t,i)&&i.push(t)})),i}(t);e.cssEase[a]&&(a=e.cssEase[a]);var s=m(i)+" "+a;parseInt(r,10)>0&&(s+=" "+m(r));var l=[];return e.each(o,(function(e,t){l.push(t+" "+s)})),l.join(", ")}function c(t,i){i||(e.cssNumber[t]=!0),e.transit.propertyMap[t]=n.transform,e.cssHooks[t]={get:function(n){return e(n).css("transit:transform").get(t)},set:function(n,i){var a=e(n).css("transit:transform");a.setFromString(t,i),e(n).css({"transit:transform":a})}}}function h(e){return e.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))}function d(e,t){return"string"!=typeof e||e.match(/^[\-0-9\.]+$/)?""+e+t:e}function m(t){var n=t;return"string"!=typeof n||n.match(/^[\-0-9\.]+/)||(n=e.fx.speeds[n]||e.fx.speeds._default),d(n,"ms")}return t=null,e.cssEase={_default:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeInCubic:"cubic-bezier(.550,.055,.675,.190)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},e.cssHooks["transit:transform"]={get:function(t){return e(t).data("transform")||new s},set:function(t,i){var r=i;r instanceof s||(r=new s(r)),"WebkitTransform"!==n.transform||a?t.style[n.transform]=r.toString():t.style[n.transform]=r.toString(!0),e(t).data("transform",r)}},e.cssHooks.transform={set:e.cssHooks["transit:transform"].set},e.cssHooks.filter={get:function(e){return e.style[n.filter]},set:function(e,t){e.style[n.filter]=t}},e.fn.jquery<"1.8"&&(e.cssHooks.transformOrigin={get:function(e){return e.style[n.transformOrigin]},set:function(e,t){e.style[n.transformOrigin]=t}},e.cssHooks.transition={get:function(e){return e.style[n.transition]},set:function(e,t){e.style[n.transition]=t}}),c("scale"),c("scaleX"),c("scaleY"),c("translate"),c("rotate"),c("rotateX"),c("rotateY"),c("rotate3d"),c("perspective"),c("skewX"),c("skewY"),c("x",!0),c("y",!0),s.prototype={setFromString:function(e,t){var n="string"==typeof t?t.split(","):t.constructor===Array?t:[t];n.unshift(e),s.prototype.set.apply(this,n)},set:function(e){var t=Array.prototype.slice.apply(arguments,[1]);this.setter[e]?this.setter[e].apply(this,t):this[e]=t.join(",")},get:function(e){return this.getter[e]?this.getter[e].apply(this):this[e]||0},setter:{rotate:function(e){this.rotate=d(e,"deg")},rotateX:function(e){this.rotateX=d(e,"deg")},rotateY:function(e){this.rotateY=d(e,"deg")},scale:function(e,t){void 0===t&&(t=e),this.scale=e+","+t},skewX:function(e){this.skewX=d(e,"deg")},skewY:function(e){this.skewY=d(e,"deg")},perspective:function(e){this.perspective=d(e,"px")},x:function(e){this.set("translate",e,null)},y:function(e){this.set("translate",null,e)},translate:function(e,t){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!=e&&(this._translateX=d(e,"px")),null!=t&&(this._translateY=d(t,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var e=(this.scale||"1,1").split(",");return e[0]&&(e[0]=parseFloat(e[0])),e[1]&&(e[1]=parseFloat(e[1])),e[0]===e[1]?e[0]:e},rotate3d:function(){for(var e=(this.rotate3d||"0,0,0,0deg").split(","),t=0;t<=3;++t)e[t]&&(e[t]=parseFloat(e[t]));return e[3]&&(e[3]=d(e[3],"deg")),e}},parse:function(e){var t=this;e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,(function(e,n,i){t.setFromString(n,i)}))},toString:function(e){var t=[];for(var i in this)if(this.hasOwnProperty(i)){if(!n.transform3d&&("rotateX"===i||"rotateY"===i||"perspective"===i||"transformOrigin"===i))continue;"_"!==i[0]&&(e&&"scale"===i?t.push(i+"3d("+this[i]+",1)"):e&&"translate"===i?t.push(i+"3d("+this[i]+",0)"):t.push(i+"("+this[i]+")"))}return t.join(" ")}},e.fn.transition=e.fn.transit=function(t,i,a,o){var s=this,c=0,h=!0,d=e.extend(!0,{},t);"function"==typeof i&&(o=i,i=void 0),"object"==typeof i&&(a=i.easing,c=i.delay||0,h=void 0===i.queue||i.queue,o=i.complete,i=i.duration),"function"==typeof a&&(o=a,a=void 0),void 0!==d.easing&&(a=d.easing,delete d.easing),void 0!==d.duration&&(i=d.duration,delete d.duration),void 0!==d.complete&&(o=d.complete,delete d.complete),void 0!==d.queue&&(h=d.queue,delete d.queue),void 0!==d.delay&&(c=d.delay,delete d.delay),void 0===i&&(i=e.fx.speeds._default),void 0===a&&(a=e.cssEase._default),i=m(i);var f=u(d,i,a,c),p=e.transit.enabled&&n.transition?parseInt(i,10)+parseInt(c,10):0;if(0===p){return l(s,h,(function(e){s.css(d),o&&o.apply(s),e&&e()})),s}var g={};return l(s,h,(function(t){var i,a,l;this.offsetWidth,i=t,a=!1,l=function(){a&&s.unbind(r,l),p>0&&s.each((function(){this.style[n.transition]=g[this]||null})),"function"==typeof o&&o.apply(s),"function"==typeof i&&i()},p>0&&r&&e.transit.useTransitionEnd?(a=!0,s.bind(r,l)):window.setTimeout(l,p),s.each((function(){p>0&&(this.style[n.transition]=f),e(this).css(d)}))})),this},e.transit.getTransitionValue=u,e},void 0===(r=i.apply(t,a))||(e.exports=r)},jquery:e=>{"use strict";e.exports=t},mori:t=>{"use strict";t.exports=e}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}};return n[e].call(r.exports,r,r.exports,a),r.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{"use strict";var e=a("./client/js/util/listmap.js"),t=a("./client/js/util/data-clone.js"),n=a.n(t);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,o(i.key),i)}}function o(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}var s=function(){function t(n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=n,this.world=i,this.components=new e.default,this.data={},this.tags=new Set,this._isActive=!0,this._shouldRender=!0,this.forwardMessages=[],this.forwardInit=!1}return function(e,t){return t&&r(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"isActive",get:function(){return this.world.updateEntities.contains(this.id)},set:function(e){e?this.world.updateEntities.add(this.id,this):this.world.updateEntities.remove(this.id)}},{key:"shouldRender",get:function(){return this.world.renderEntities.contains(this.id)},set:function(e){e?this.world.renderEntities.add(this.id,this):this.world.renderEntities.remove(this.id)}},{key:"addComponent",value:function(e,t){var n=this.world.components[e];if(!n)throw new Error("Component "+e+" not found");var i=Object.create(n);return i.data=t||{},i.entity=this,n.requiredComponents&&n.requiredComponents.forEach(function(e){if(!this.hasComponent(e))throw new Error("Required component "+e+" not found on entity "+JSON.stringify(this.tags))}.bind(this)),this.components.set(e,i),n.onAdd&&n.onAdd.call(i),this}},{key:"removeComponent",value:function(e){this.world.removeComponent(this,e)}},{key:"destroy",value:function(){this.__isDestroyed||(this.components.forEach((function(e){e.onRemove&&e.onRemove()})),this.sendMessage("destroyed"),this.world.destroyEntity(this),this.__isDestroyed=!0)}},{key:"isDestroyed",value:function(){return!!this.__isDestroyed}},{key:"update",value:function(e){if(!this.__isDestroyed)for(var t=this.components.getList(),n=0;n<t.length;n++){var i=t[n],a=i._update;this.isActive&&a&&a.call(this.data,e,this,i)}}},{key:"render",value:function(e){if(!this.__isDestroyed)for(var t=this.components.getList(),n=0;n<t.length;n++){var i=t[n],a=i._render;this.shouldRender&&a&&a.call(this.data,e,this,i)}}},{key:"sendMessage",value:function(e,t,i,a){var r={handled:!1,results:[],version:(null==t?void 0:t.version)||"1.0.0",timestamp:Date.now()},o=n().clone(t);return this.components.getList().forEach(function(t){if(e in t.messageHandlers){if(!t.isVersionCompatible(r.version))return void console.warn("Component ".concat(t.name," version ").concat(t.version," is not compatible with message version ").concat(r.version));r.handled=!0;var i=t.messageHandlers[e].call(this.data,this,o,t);void 0!==i&&r.results.push(n().clone(i))}}.bind(this)),r}},{key:"getData",value:function(e){return function(e,t){return e._data||(e._data={}),e._data[t]}(this,e)}},{key:"setData",value:function(e,t){return function(e,t,n){e._data||(e._data={});var i=e._data[t];return e._data[t]=n,e.sendMessage("data-changed",{key:t,oldValue:i,newValue:n}),n}(this,e,t)}},{key:"hasData",value:function(e){return function(e,t){return e._data&&t in e._data}(this,e)}},{key:"hasComponent",value:function(e){return this.components.has(e)}},{key:"getComponent",value:function(e){return this.components.get(e)}},{key:"addTag",value:function(e){return this.tags.add(e),this}},{key:"removeTag",value:function(e){return this.tags.delete(e),this}},{key:"hasTag",value:function(e){return this.tags.has(e)}},{key:"clone",value:function(){var e=new t(this.id+"_clone",this.world);return e.data=n()(this.data),this.components.forEach((function(t,i){e.addComponent(i,n()(t.data))})),this.tags.forEach((function(t){return e.addTag(t)})),e}}])}();const l=s;function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,h(i.key),i)}}function h(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}var d=function(){return function(e,t){return t&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=null,this.ctx=null,this.width=0,this.height=0}),[{key:"init",value:function(e){this.canvas=e,this.ctx=e.getContext("2d"),this.width=e.width,this.height=e.height}},{key:"render",value:function(e){var t=this;this.ctx&&(this.ctx.clearRect(0,0,this.width,this.height),e.sort((function(e,t){var n,i;return((null===(n=e.getComponent("renderer"))||void 0===n?void 0:n.data.zIndex)||0)-((null===(i=t.getComponent("renderer"))||void 0===i?void 0:i.data.zIndex)||0)})).forEach((function(e){var n=e.getComponent("renderer");n&&n.render&&n.render(t.ctx)})))}},{key:"resize",value:function(e,t){this.canvas&&(this.canvas.width=e,this.canvas.height=t,this.width=e,this.height=t)}}])}();const m=d;function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,b(i.key),i)}}function b(e){var t=function(e){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}const y=function(){return function(e,t){return t&&g(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.entities=[],this.systems=[],this.renderer=new m,this.components=n,this.nextEntityId=0,i&&i.length>0&&i.forEach((function(e){t.createEntity(e)}))}),[{key:"addEntity",value:function(e){return this.entities.push(e),e}},{key:"removeEntity",value:function(e){var t=this.entities.indexOf(e);-1!==t&&this.entities.splice(t,1)}},{key:"addSystem",value:function(e){return this.systems.push(e),e}},{key:"removeSystem",value:function(e){var t=this.systems.indexOf(e);-1!==t&&this.systems.splice(t,1)}},{key:"update",value:function(e){this.systems.forEach((function(t){t.update(e)}))}},{key:"render",value:function(){this.renderer.render(this.entities)}},{key:"createEntity",value:function(e){var t=new l(this.nextEntityId++,this);return e.tags&&Array.isArray(e.tags)&&e.tags.forEach((function(e){return t.addTag(e)})),e.components&&"object"===p(e.components)&&Object.entries(e.components).forEach((function(e){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r,o,s=[],l=!0,u=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=r.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),i=n[0],a=n[1];t.addComponent(i,a)})),this.addEntity(t),t}},{key:"destroy",value:function(){this.entities.forEach((function(e){e.destroy&&e.destroy()})),this.entities=[],this.systems=[],this.renderer&&this.renderer.destroy&&this.renderer.destroy()}},{key:"pause",value:function(){}},{key:"play",value:function(){}}])}();var v=a("mori"),w=a.n(v);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function j(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_(i.key),i)}}function _(e){var t=function(e){if("object"!=x(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}var k=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.data={},this.entity=null,this.messages={}}return function(e,t,n){return t&&j(e.prototype,t),n&&j(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"handleMessageProxy",value:function(e,t){this.messageHandlers||(this.messageHandlers=w()?w().hashMap():{}),w()&&w().hashMap.isPrototypeOf(this.messageHandlers)?this.messageHandlers=w().assoc(this.messageHandlers,e,t.bind(this)):this.messageHandlers[e]=t.bind(this)}},{key:"update",value:function(e){this._update=e}},{key:"onAdd",value:function(e){this._onAdd=e}},{key:"onRemove",value:function(e){this._onRemove=e}},{key:"render",value:function(e){this._render=e}},{key:"aggregateUpdate",value:function(e){this._aggregateUpdate=e}},{key:"getState",value:function(e){if(!this.syncState)return{};var t={};return this.syncProperties.forEach((function(n){n in e.data&&(t[n]=e.data[n])})),t}},{key:"applyState",value:function(e,t){var n=this;this.syncState&&Object.entries(t).forEach((function(t){var i=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r,o,s=[],l=!0,u=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=r.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),a=i[0],r=i[1];n.syncProperties.includes(a)&&e.setData(a,r)}))}},{key:"handleStateUpdate",value:function(e,t){this.syncState&&t.delta&&this.applyState(e,t.delta)}},{key:"isVersionCompatible",value:function(e){if(!e)return!0;this.version.split(".").map(Number);var t=e.split(".").map(Number);if(this.minVersion){var n=this.minVersion.split(".").map(Number);if(t[0]<n[0]||t[0]===n[0]&&t[1]<n[1]||t[0]===n[0]&&t[1]===n[1]&&t[2]<n[2])return!1}if(this.maxVersion){var i=this.maxVersion.split(".").map(Number);if(t[0]>i[0]||t[0]===i[0]&&t[1]>i[1]||t[0]===i[0]&&t[1]===i[1]&&t[2]>i[2])return!1}return!0}},{key:"sendMessage",value:function(e,t){this.entity&&this.entity.sendMessage(e,t)}}],[{key:"build",value:function(n,i){var a=new t;return a.name=n,a.requiredComponents=i.requiredComponents||[],a.defaultData=i.defaultData||i._||{},a.entities=new e.default,a.messageHandlers=w()?w().hashMap():{},a._onAdd=i.onAdd||null,a._onRemove=i.onRemove||null,a._update=i.update||null,a._aggregateUpdate=i.aggregateUpdate||null,a._render=i.render||null,a.tags=i.tags||null,a.entityData=new e.default,a.version=i.version||"1.0.0",a.minVersion=i.minVersion||"1.0.0",a.maxVersion=i.maxVersion||null,a.syncState=i.syncState||!1,a.syncProperties=i.syncProperties||[],a.handleMessage=a.handleMessageProxy.bind(a),a.update=a.update.bind(a),a.onAdd=a.onAdd.bind(a),a.onRemove=a.onRemove.bind(a),a.render=a.render.bind(a),a.aggregateUpdate=a.aggregateUpdate.bind(a),a.getState=a.getState.bind(a),a.applyState=a.applyState.bind(a),a.handleStateUpdate=a.handleStateUpdate.bind(a),a.isVersionCompatible=a.isVersionCompatible.bind(a),a.handleMessage("state-update",(function(e,t){return a.handleStateUpdate(e,t)})),a}}])}();const S=k,C=S.build("health",{requiredComponents:["position"],defaultData:{health:100,maxHealth:100,lastDamageTime:0,damageCooldown:500},syncState:!0,syncProperties:["health","maxHealth"],onAdd:function(e){e.hasData("health")||e.setData("health",this.defaultData.health),e.hasData("maxHealth")||e.setData("maxHealth",this.defaultData.maxHealth)},messages:{damage:function(e,t){var n=Date.now();if(!(n-(e.getData("lastDamageTime")||0)<this.defaultData.damageCooldown)){var i=e.getData("health"),a=t.amount||0,r=Math.max(0,i-a);e.setData("health",r),e.setData("lastDamageTime",n),e.sendMessage("damage-taken",{amount:a,newHealth:r}),r<=0&&e.sendMessage("death")}},heal:function(e,t){var n=e.getData("health"),i=e.getData("maxHealth"),a=t.amount||0,r=Math.min(i,n+a);e.setData("health",r),e.sendMessage("healed",{amount:a,newHealth:r})}}});function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return(t=function(e){var t=function(e){if("object"!=T(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==T(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(){return{_:{x:0,y:0,z:0,rotation:0,scale:1,layer:0},update:function(e,t,n){this.position=P(P({},(null==this?void 0:this.position)||{}),{},{x:this.x,y:this.y,z:this.z,rotation:this.rotation,scale:this.scale,layer:this.layer})},messages:{move:function(e,t){void 0!==t.x&&(e.data.x=t.x),void 0!==t.y&&(e.data.y=t.y),void 0!==t.z&&(e.data.z=t.z),void 0!==t.rotation&&(e.data.rotation=t.rotation),void 0!==t.scale&&(e.data.scale=t.scale),void 0!==t.layer&&(e.data.layer=t.layer)}}}}function D(e){return function(){return{_:{renderer:null,visible:!0,alpha:1,tint:16777215,blendMode:PIXI.BLEND_MODES.NORMAL},messages:{init:function(t){this.renderer=new e(t)},update:function(e){this.renderer&&this.renderer.update(e)},"set-visible":function(e,t){this.visible=t.visible,this.renderer&&this.renderer.setVisible(this.visible)},"set-alpha":function(e,t){this.alpha=t.alpha,this.renderer&&this.renderer.setAlpha(this.alpha)},"set-tint":function(e,t){this.tint=t.tint,this.renderer&&this.renderer.setTint(this.tint)},"set-blend-mode":function(e,t){this.blendMode=t.blendMode,this.renderer&&this.renderer.setBlendMode(this.blendMode)}}}}}function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function B(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,L(i.key),i)}}function L(e){var t=function(e){if("object"!=R(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==R(t)?t:t+""}const I=function(){return function(e,t){return t&&B(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}),[{key:"update",value:function(e){}}])}();var z=a("./client/js/components/physics.js"),F=a.n(z),N=a("./client/js/components/combat.js"),H=a.n(N);function V(){return{}}var G=a("./client/js/components/quest.js"),$=a.n(G),Y=a("./client/js/components/dialogue.js"),q=a.n(Y);function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function W(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,U(i.key),i)}}function U(e){var t=function(e){if("object"!=K(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==K(t)?t:t+""}const X=function(){return function(e,t){return t&&W(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}),[{key:"update",value:function(e){}}])}();function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function Q(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Z(i.key),i)}}function Z(e){var t=function(e){if("object"!=J(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==J(t)?t:t+""}const ee=function(){return function(e,t){return t&&Q(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}),[{key:"update",value:function(e){}}])}();var te=a("./client/js/components/animation.js"),ne=a.n(te),ie=a("./client/js/components/augment.js"),ae=a.n(ie),re=a("./client/js/components/center-aligned.js"),oe=a.n(re),se=a("./client/js/components/combatant.js"),le=a.n(se),ue=a("./client/js/components/defensive-augment.js"),ce=a.n(ue),he=a("./client/js/util/chance.js"),de=new(a.n(he)());function me(){return{messages:{death:function(e,t){var n=de.d6();5==n?e.engine.createEntity({tags:["weapon","world-entity"]}).addComponent("weapon",{position:{x:this.position.x,y:this.position.y+100},icon:"umbrella",pursueTarget:!1,damage:de.d6()+"d"+de.d10()}):6==n&&e.engine.createEntity({tags:["health-potion","world-entity"]}).addComponent("health-potion",{position:{x:this.position.x,y:this.position.y+100},pursueTarget:!1})}}}}var fe=a("./client/js/components/enemy-spawner.js"),pe=a.n(fe),ge=a("./client/js/components/enemy.js"),be=a.n(ge),ye=a("./client/js/components/floating-combat-text.js"),ve=a.n(ye),we=a("./client/js/components/game-manager.js"),xe=a.n(we),Me=a("./client/js/components/game-metrics-display.js"),je=a.n(Me),_e=a("./client/js/components/glyphicon-renderer.js"),ke=a.n(_e),Se=a("./client/js/components/health-display.js"),Ce=a.n(Se),Te=a("./client/js/components/health-potion.js"),Ae=a.n(Te),Pe=a("./client/js/components/hide-on-pause.js"),Ee=a.n(Pe),Oe=a("jquery");function De(){null!=this.size.height&&null!=this.size.width&&Oe(this.$el).css({"font-size":null!=this.size.height&&null!=this.size.width?(this.size.height+this.size.width)/2+"px":this.$el.css("font-size"),width:null===this.size.width?this.$el.css("width"):this.size.width,height:null===this.size.height?this.$el.css("height"):this.size.height}),Oe(this.$el).css("z-index",this["z-index"]),this.positionAnchor&&"top-left"!==this.positionAnchor?"top-right"===this.positionAnchor?Oe(this.$el).css({bottom:"initial",left:"initial",right:this.x-this.size.width/2,top:this.y-this.size.height/2}):"bottom-left"===this.positionAnchor?Oe(this.$el).css({top:"initial",right:"initial",left:this.x-this.size.width/2,bottom:this.y-this.size.height/2}):"bottom-right"===this.positionAnchor&&Oe(this.$el).css({top:"initial",left:"initial",right:this.x+this.size.width/2,bottom:this.y+this.size.height/2}):Oe(this.$el).css({bottom:"initial",right:"initial",left:this.x-this.size.width/2,top:this.y-this.size.height/2})}function Re(){return{_:{htmlTemplateFactory:function(e,t){return'<span style="position: '+(e.data.isStaticPosition?"fixed":"absolute")+"; display: block; overflow: visible; color: "+(e.data.iconColor||"black")+" z-index:"+e.data["z-index"]+';" class="go-faster-hack glyphicons" data-entity-id="'+e.id+'"></span>'},selector:"#game","z-index":0,renderBuffer:{position:{x:0,y:0},rotation:0,width:0,height:0,shouldRender:!1},size:{width:0,height:0},levelSetsColor:!0,positionAnchor:"top-left"},requiredComponents:["position"],onAdd:function(e,t){try{this.$el=Oe(this.selector).append((new DOMParser).parseFromString(this.htmlTemplateFactory(e,t),"text/html").body.firstElementChild)}catch(e){}De.call(this),e.shouldRender||this.$el.hide()},update:function(e,t,n){this.renderBuffer.shouldRender!=t.shouldRender&&(t.shouldRender&&!this.renderBuffer.shouldRender&&this.$el?this.$el.show():!t.shouldRender&&this.renderBuffer.shouldRender&&this.$el&&this.$el.hide()),this.renderBuffer.shouldRender=t.shouldRender},render:function(e,t,n){this.renderBuffer.position.x==this.x&&this.renderBuffer.position.y==this.y&&this.renderBuffer.width==this.size.width&&this.renderBuffer.height==this.size.height||(t.shouldRender&&De.call(this),this.renderBuffer.position.x=this.x,this.renderBuffer.position.y=this.y,this.renderBuffer.width=this.size.width,this.renderBuffer.height=this.size.height,this.renderBuffer.shouldRender=t.shouldRender)},onRemove:function(e,t){this.$el&&(this.$el.hide(),this.$el.remove())},messages:{show:function(e,t){e.data.$el&&e.data.$el.show(80),e.shouldRender=!0},hide:function(e,t){e.data.$el&&e.data.$el.hide(80),e.shouldRender=!1},"set-position-type":function(e,t){t.isStaticPosition?(this.isStaticPosition=!0,this.$el.css("position","fixed")):(this.$el.css("position","absolute"),this.isStaticPosition=!1)}}}}var Be=a("./client/js/components/keyboard-events.js"),Le=a.n(Be),Ie=a("./client/js/components/level-door.js"),ze=a.n(Ie),Fe=a("./client/js/components/level-manager.js"),Ne=a.n(Fe),He=a("./client/js/components/minimap.js"),Ve=a.n(He),Ge=a("./client/js/components/mounted.js"),$e=a.n(Ge),Ye=a("./client/js/components/movement.js"),qe=a.n(Ye),Ke=a("./client/js/components/music.js"),We=a.n(Ke),Ue=a("./client/js/components/offensive-augment.js"),Xe=a.n(Ue),Je=a("./client/js/util/random.js"),Qe=a.n(Je),Ze=S.build("player",{requiredComponents:["position","health"],defaultData:{direction:"right",character:{strength:10,dexterity:10,intelligence:10,vitality:10}},syncState:!0,syncProperties:["direction","character"],onAdd:function(e){e.hasData("direction")||e.setData("direction",this.defaultData.direction),e.hasData("character")||e.setData("character",this.defaultData.character)},messages:{"targets-in-range":function(e,t){var n=t.targets||[];if(0!==n.length){var i=n[0],a=i.getData("position"),r=e.getData("position"),o=a.x>r.x?"right":"left";e.setData("direction",o);var s=e.getData("character"),l=(s.dexterity,Math.floor(s.strength*(1+Qe().random(0,.5)))),u=Qe().random(0,1)<s.dexterity/100,c=u?2*l:l;i.sendMessage("damage",{amount:c,isCritical:u});var h=e.getComponent("weapon");h&&h.sendMessage("attack",{target:i,damage:c,isCritical:u})}},death:function(e){e.sendMessage("game-over")}}});const et=Ze;var tt=a("./client/js/components/scroll-chaser.js"),nt=a.n(tt),it=a("./client/js/components/sensor.js"),at=a.n(it),rt=a("./client/js/components/shield.js"),ot=a.n(rt),st=a("./client/js/components/sine-line.js"),lt=a.n(st),ut=a("./client/js/components/sine-wave-movement.js"),ct=a.n(ut),ht=a("./client/js/components/text.js"),dt=a.n(ht);function mt(){return{_:{destroyTime:0,destroyDelay:1e3,destroyOnStart:!1},onAdd:function(e,t){this.destroyOnStart&&(this.destroyTime=e.engine.gameTime+this.destroyDelay)},update:function(e,t,n){this.destroyTime>0&&t.engine.gameTime>=this.destroyTime&&t.destroy()},messages:{"start-destroy-timer":function(e,t){t.delay&&(this.destroyDelay=t.delay),this.destroyTime=e.engine.gameTime+this.destroyDelay},"cancel-destroy-timer":function(e,t){this.destroyTime=0}}}}var ft=a("./client/js/components/trap.js"),pt=a.n(ft),gt=a("./client/js/components/vision.js"),bt=a.n(gt),yt=window.mori;if(!yt)throw new Error("Mori library not loaded. Please ensure mori is properly included in your dependencies.");const vt=yt;function wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r,o,s=[],l=!0,u=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=r.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}a("./node_modules/jquery.transit/jquery.transit.js");var Mt=S.build("boss",{requiredComponents:["position","health"],defaultData:{name:"The Wellspring Guardian",phase:1,maxPhases:3,waterLevel:100,powerLevel:100,rotationSpeed:.5,currentRotation:0,weightHit:!1,components:{fan:{health:100,active:!0,rotationOffset:0,effect:"speed"},battery:{health:100,active:!0,rotationOffset:90,effect:"power"},bladder:{health:100,active:!0,rotationOffset:180,effect:"defense"},alternator:{health:100,active:!0,rotationOffset:270,effect:"regen"},fuse:{health:100,active:!0,rotationOffset:45,effect:"fuse"}},vulnerableAngle:45,lastRotationUpdate:0,defeatedComponents:new Set,isDefeated:!1},onAdd:function(e){e.hasData("boss")||e.setData("boss",this.defaultData),e.getData("boss").lastRotationUpdate=Date.now()},messages:{update:function(e,t){var n=this,i=e.getData("boss");if(!i.isDefeated){var a=Date.now(),r=(a-i.lastRotationUpdate)/1e3;i.lastRotationUpdate=a;var o=i.defeatedComponents.has("fan")?1.5:1;i.currentRotation=(i.currentRotation+i.rotationSpeed*o*r*360)%360,Object.entries(i.components).forEach((function(t){var a=wt(t,2),r=a[0],o=a[1],s=(o.rotationOffset+i.currentRotation)%360,l=o.isVulnerable,u=n.calculateVulnerability(i,r,s);o.isVulnerable=u,o.isVulnerable&&!l&&e.sendMessage("component-vulnerable",{component:r,angle:s,reason:n.getVulnerabilityReason(i,r)})})),this.updatePhase(e)}},damage:function(e,t){var n=e.getData("boss");if(!n.isDefeated){var i=n.components[t.target];if(null!=i&&i.active&&i.isVulnerable){var a=n.defeatedComponents.has("bladder")?1:.75,r=t.amount*a;i.health=Math.max(0,i.health-r),e.sendMessage("component-damaged",{component:t.target,damage:r,originalDamage:t.amount}),i.health<=0&&(i.active=!1,n.defeatedComponents.add(t.target),e.sendMessage("component-destroyed",{component:t.target,effect:i.effect}),this.applyComponentDestructionEffects(n,t.target),("fuse"===t.target||this.shouldBlowFuse(n))&&this.blowFuse(e,n))}}},"update-phase":function(e,t){var n=e.getData("boss");n.phase<n.maxPhases&&(n.phase++,Object.entries(n.components).forEach((function(e){var t=wt(e,2),i=t[0],a=t[1];a.active||(a.active=!0,a.health=100*n.phase,n.defeatedComponents.delete(i))})),this.adjustPhaseMechanics(n),e.sendMessage("phase-changed",{phase:n.phase,components:n.components,defeatedComponents:Array.from(n.defeatedComponents)}))},"weight-hit":function(e,t){var n=e.getData("boss");n.isDefeated||"down"===t.direction&&(n.powerLevel=Math.min(200,n.powerLevel+25),n.weightHit=!0,e.sendMessage("power-increased",{amount:25,newLevel:n.powerLevel}),this.shouldBlowFuse(n)&&this.blowFuse(e,n))}},calculateVulnerability:function(e,t,n){var i=Math.abs(n-180)<=e.vulnerableAngle,a=({fan:["alternator"],battery:["alternator"],bladder:["fan"],alternator:["battery"],fuse:["battery","alternator"]}[t]||[]).some((function(t){return e.defeatedComponents.has(t)}));return i||a},getVulnerabilityReason:function(e,t){var n=({fan:["alternator"],battery:["alternator"],bladder:["fan"],alternator:["battery"],fuse:["battery","alternator"]}[t]||[]).find((function(t){return e.defeatedComponents.has(t)}));return n?"Vulnerable due to missing ".concat(n):"Vulnerable due to position"},applyComponentDestructionEffects:function(e,t){var n={fan:function(){e.rotationSpeed*=1.5},battery:function(){e.powerLevel*=1.5},bladder:function(){e.waterLevel*=.75},alternator:function(){e.rotationSpeed*=.75,e.powerLevel*=.75},fuse:function(){}};n[t]&&n[t]()},adjustPhaseMechanics:function(e){switch(e.phase){case 2:e.rotationSpeed*=1.5,e.vulnerableAngle=30;break;case 3:e.rotationSpeed*=1.5,e.vulnerableAngle=20,Object.values(e.components).forEach((function(e){e.rotationOffset=360*Math.random()}))}},shouldBlowFuse:function(e){var t=Object.values(e.components).filter((function(e){return e.active})).length;return e.powerLevel>100*t&&!e.defeatedComponents.has("fuse")},blowFuse:function(e,t){t.isDefeated=!0;for(var n=function(){var t=270-i/7*135,n=e.engine.createEntity({tags:["fuse-particle"]});n.addComponent("position",{x:0,y:0}),n.addComponent("renderer",{char:"💡",color:"#ffff00"}),n.$el.style.setProperty("--burst-angle","".concat(t,"deg")),n.$el.addClass("lightbulb-burst"),setTimeout((function(){n.destroy()}),500)},i=0;i<8;i++)n();e.sendMessage("boss-defeated",{components:t.components,defeatedComponents:Array.from(t.defeatedComponents)})},updatePhase:function(e){var t=e.getData("boss");Object.values(t.components).every((function(e){return!e.active}))&&t.phase<t.maxPhases&&e.sendMessage("update-phase")}});const jt=Mt;var _t=a("./client/js/components/spell-container.js"),kt=a.n(_t),St=a("./client/js/components/spell.js"),Ct=a.n(St),Tt=a("./client/js/components/tests.js"),At=a.n(Tt),Pt=a("./client/js/components/options.js"),Et=a.n(Pt),Ot=a("./client/js/components/window.js"),Dt=a.n(Ot),Rt=a("./client/js/components/weapon.js"),Bt=a.n(Rt);function Lt(e){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lt(e)}function It(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r,o,s=[],l=!0,u=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=r.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return zt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(n),!0).forEach((function(t){Ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ht(e,t,n){return(t=Gt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Gt(i.key),i)}}function Gt(e){var t=function(e){if("object"!=Lt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Lt(t)?t:t+""}function $t(){$t=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,n,i){return Object.defineProperty(e,t,{value:n,enumerable:!i,configurable:!i,writable:!i})}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(t,n,i,a){var r=n&&n.prototype instanceof d?n:d,o=Object.create(r.prototype);return l(o,"_invoke",function(t,n,i){var a=1;return function(r,o){if(3===a)throw Error("Generator is already running");if(4===a){if("throw"===r)throw o;return{value:e,done:!0}}for(i.method=r,i.arg=o;;){var s=i.delegate;if(s){var l=x(s,i);if(l){if(l===h)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(1===a)throw a=4,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a=3;var u=c(t,n,i);if("normal"===u.type){if(a=i.done?4:2,u.arg===h)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(a=4,i.method="throw",i.arg=u.arg)}}}(t,i,new _(a||[])),!0),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h={};function d(){}function m(){}function f(){}var p={};l(p,r,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(k([])));b&&b!==n&&i.call(b,r)&&(p=b);var y=f.prototype=d.prototype=Object.create(p);function v(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(a,r,o,s){var l=c(e[a],e,r);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==Lt(h)&&i.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(h).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var a;l(this,"_invoke",(function(e,i){function r(){return new t((function(t,a){n(e,i,t,a)}))}return a=a?a.then(r,r):r()}),!0)}function x(t,n){var i=n.method,a=t.i[i];if(a===e)return n.delegate=null,"throw"===i&&t.i.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),h;var r=c(a,t.i,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,h;var o=r.arg;return o?o.done?(n[t.r]=o.value,n.next=t.n,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function M(e){this.tryEntries.push(e)}function j(t){var n=t[4]||{};n.type="normal",n.arg=e,t[4]=n}function _(e){this.tryEntries=[[-1]],e.forEach(M,this),this.reset(!0)}function k(t){if(null!=t){var n=t[r];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(i.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Lt(t)+" is not iterable")}return m.prototype=f,l(y,"constructor",f),l(f,"constructor",m),m.displayName=l(f,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},v(w.prototype),l(w.prototype,o,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,i,a,r){void 0===r&&(r=Promise);var o=new w(u(e,n,i,a),r);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},v(y),l(y,s,"Generator"),l(y,r,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.unshift(i);return function e(){for(;n.length;)if((i=n.pop())in t)return e.value=i,e.done=!1,e;return e.done=!0,e}},t.values=k,_.prototype={constructor:_,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(e){o.type="throw",o.arg=t,n.next=e}for(var a=n.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a],o=r[4],s=this.prev,l=r[1],u=r[2];if(-1===r[0])return i("end"),!1;if(!l&&!u)throw Error("try statement without catch or finally");if(null!=r[0]&&r[0]<=s){if(s<l)return this.method="next",this.arg=e,i(l),!0;if(s<u)return i(u),!1}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i[0]>-1&&i[0]<=this.prev&&this.prev<i[2]){var a=i;break}}a&&("break"===e||"continue"===e)&&a[0]<=t&&t<=a[2]&&(a=null);var r=a?a[4]:{};return r.type=e,r.arg=t,a?(this.method="next",this.next=a[2],h):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n[2]===e)return this.complete(n[4],n[3]),j(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n[0]===e){var i=n[4];if("throw"===i.type){var a=i.arg;j(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={i:k(t),r:n,n:i},"next"===this.method&&(this.arg=e),h}},t}function Yt(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function qt(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){Yt(r,i,a,o,s,"next",e)}function s(e){Yt(r,i,a,o,s,"throw",e)}o(void 0)}))}}var Kt=function(){var e=qt($t().mark((function e(){return $t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{health:C,position:O,renderer:D,input:I,physics:F(),combat:H(),inventory:V,quest:$(),dialogue:q(),ai:X,network:ee,animation:ne(),augment:ae(),"center-aligned":oe(),combatant:le(),"defensive-augment":ce(),"drops-loot":me,"enemy-spawner":pe(),enemy:be(),"floating-combat-text":ve(),"game-manager":xe(),"game-metrics-display":je(),"glyphicon-renderer":ke(),"health-display":Ce(),"health-potion":Ae(),"hide-on-pause":Ee(),"html-renderer":Re,"keyboard-events":Le(),"level-door":ze(),"level-manager":Ne(),minimap:Ve(),mounted:$e(),movement:qe(),music:We(),"offensive-augment":Xe(),player:et,"scroll-chaser":nt(),sensor:at(),shield:ot(),"sine-line":lt(),"sine-wave-movement":ct(),text:dt(),"timed-destroy":mt,trap:pt(),vision:bt(),boss:jt,"spell-container":kt(),spell:Ct(),tests:At(),options:Et(),window:Dt(),weapon:Bt()});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Wt=new(function(){return function(e,t){return t&&Vt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.game=null,this.components={},this.entities=vt.vector(vt.hashMap("tags",vt.vector("level-manager"),"components",vt.hashMap("level-manager",vt.hashMap())),vt.hashMap("tags",vt.vector("music","level-change-subscriber"),"components",vt.hashMap("music",vt.hashMap())),vt.hashMap("tags",vt.vector("player","hide-at-start"),"components",vt.hashMap("health",vt.hashMap("health",70,"maxHealth",100),"player",vt.hashMap("iconColor","#eee"),"movement",vt.hashMap("speed",250),"glyphicon-renderer",vt.hashMap("position",vt.hashMap("x",document.documentElement.clientWidth/2,"y",-75),"width",50,"height",50,"icon","user"),"keyboard-events",vt.hashMap(),"vision",vt.hashMap()),"shouldRender",!1),vt.hashMap("tags",vt.vector("shield","hide-at-start"),"components",vt.hashMap("shield",vt.hashMap("mountTag","player"))),vt.hashMap("tags",vt.vector("weapon","hide-at-start","level-change-subscriber"),"components",vt.hashMap("weapon",vt.hashMap("mountTag","player"))),vt.hashMap("tags",vt.vector("health-display","hide-at-start"),"components",vt.hashMap("health-display",vt.hashMap("textColor","#eee","z-index",1e4),"hide-on-pause",vt.hashMap())),vt.hashMap("tags",vt.vector("metrics"),"components",vt.hashMap("game-metrics-display",vt.hashMap("textColor","#eee","z-index",1e4),"hide-on-pause",vt.hashMap())),vt.hashMap("tags",vt.vector("health-potion","hide-at-start"),"components",vt.hashMap("health-potion",vt.hashMap("position",vt.hashMap("y",500,"x",0),"target",vt.hashMap("y",500,"x",0),"pursueTarget",!1))),vt.hashMap("tags",vt.vector("game-manager"),"components",vt.hashMap("game-manager",vt.hashMap())),vt.hashMap("tags",vt.vector("player-metrics"),"components",vt.hashMap("game-metrics-display",vt.hashMap("shouldRender",!1,"isActive",!1,"metricsTargetTag","player","isStaticPosition",!0,"positionAnchor","bottom-right","position",vt.hashMap("x",250,"y",200),"metricsFunction",(function(e,t,n){return n.data.position.x.toFixed(3)+" "+n.engine.updateEntities.getList().length}),"icon","global","textColor","#eee"),"hide-on-pause",vt.hashMap())),vt.hashMap("components",vt.hashMap("defensive-augment",vt.hashMap("mountTag","player"))),vt.hashMap("components",vt.hashMap("offensive-augment",vt.hashMap("mountTag","player"))),vt.hashMap("components",vt.hashMap("glyphicon-renderer",vt.hashMap("icon","align-center"),"mounted",vt.hashMap("mountTag","level-door","offset",vt.hashMap("x",0,"y",25)))),vt.hashMap("tags",vt.vector("minimap"),"components",vt.hashMap("minimap",vt.hashMap())),vt.hashMap("tags",vt.vector("options"),"components",vt.hashMap("options",vt.hashMap())),vt.hashMap("tags",vt.vector("spell-container"),"components",vt.hashMap("spell-container",vt.hashMap()))),this.isRunning=!1,this.lastTime=0,this.targetFPS=60,this.frameTime=1e3/this.targetFPS,this.init=this.init.bind(this),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this.gameLoop=this.gameLoop.bind(this),this.cleanup=this.cleanup.bind(this),this.play=this.play.bind(this),this.pause=this.pause.bind(this)}),[{key:"init",value:(e=qt($t().mark((function e(){var t,n,i=this;return $t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Starting RogueScroll initialization..."),e.next=4,Kt();case 4:return t=e.sent,console.log("nonCriticalComponents:",t),console.log("Before merge - components:",this.components),this.components=Nt(Nt({},this.components),t),console.log("After merge - components:",this.components),this.game=new y(this.components,vt.intoArray(this.entities)),console.log("DEBUG this.game:",this.game),console.log("DEBUG this in init:",this),this.systems={physics:new(F()),combat:new(H()),ai:new X,network:new ee,input:new I,renderer:new D},Object.values(this.systems).forEach((function(e){i.game.addSystem(e)})),this.entities=vt.conj(this.entities,{tags:["player"],components:{position:{x:0,y:0},renderer:{type:"player"},health:{current:100,max:100},input:{},physics:{velocity:{x:0,y:0}}}}),n=this.game,vt.each(this.entities,(function(e){var t=vt.toJs(e),i=n.createEntity({tags:(null==t?void 0:t.tags)||[]});try{vt.each(Object.entries((null==t?void 0:t.components)||{}),(function(e){var t=It(e,2),n=t[0],a=t[1];i.addComponent(n,a)}))}catch(e){console.error("Failed to add component to entity:",e,t)}})),this.start(),window.addEventListener("unload",this.cleanup),e.abrupt("return",!0);case 22:return e.prev=22,e.t0=e.catch(0),console.error("Failed to initialize RogueScroll:",e.t0),e.abrupt("return",!1);case 26:case"end":return e.stop()}}),e,this,[[0,22]])}))),function(){return e.apply(this,arguments)})},{key:"start",value:function(){this.isRunning||(this.isRunning=!0,this.lastTime=performance.now(),requestAnimationFrame(this.gameLoop))}},{key:"stop",value:function(){this.isRunning=!1}},{key:"gameLoop",value:function(e){if(this.isRunning){var t=(e-this.lastTime)/1e3;this.lastTime=e,t=Math.min(t,.1);try{this.game.update(t),this.game.render()}catch(e){return console.error("Error in game loop:",e),void this.stop()}requestAnimationFrame(this.gameLoop)}}},{key:"cleanup",value:function(){this.stop(),this.game&&(Object.values(this.systems).forEach((function(e){e.cleanup&&e.cleanup()})),this.game.destroy(),this.game=null)}},{key:"play",value:function(){this.game&&this.game.play()}},{key:"pause",value:function(){this.game&&this.game.pause()}}]);var e}());window.RogueScroll=Wt;const Ut=Wt;var Xt=a("jquery"),Jt=a("jquery");function Qt(e){return Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qt(e)}function Zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function en(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(n),!0).forEach((function(t){tn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tn(e,t,n){return(t=function(e){var t=function(e){if("object"!=Qt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Qt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Qt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.addEventListener("load",(function(){void 0!==Xt?"undefined"!=typeof PIXI?void 0!==Ut?Xt((function(){Ut.init().then((function(){var e=en(en({},Ut),{},{pause:Ut.pause.bind(Ut),play:Ut.play.bind(Ut),cleanup:Ut.cleanup.bind(Ut)});return Jt("a[href='#menu']").click((function(){Jt("li a[href='#game']").parent().removeClass("active"),Jt(this).parent().addClass("active")})),Jt("a[href='#game']").click((function(){Jt("li a[href='#menu']").parent().removeClass("active"),Jt(this).parent().addClass("active")})),Jt("#nav").on("activate.bs.scrollspy",(function(){Jt(".active [href='#menu']").length&&e.game&&"function"==typeof e.game.pause&&e.pause(),Jt(".active [href='#game']").length&&e.game&&"function"==typeof e.game.play&&"in-play"===e.engine.findEntityByTag("game-manager").data.gameState&&e.play()})),e.game&&"function"==typeof e.game.pause&&e.pause(),window.addEventListener("unload",(function(){e.cleanup&&"function"==typeof e.cleanup&&e.cleanup()})),e})).catch((function(e){console.error("Failed to initialize RogueScroll:",e)}))})):console.error("RogueScroll is not loaded"):console.error("PIXI is not loaded"):console.error("jQuery is not loaded")}))})(),o.default})()));
//# sourceMappingURL=main.bundle.js.map